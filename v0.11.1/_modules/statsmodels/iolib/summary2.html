

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../../../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../../../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../../../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../../../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../../../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>statsmodels.iolib.summary2 &#8212; statsmodels</title>
  <link rel="icon" type="image/png" sizes="32x32" href="../../../_static/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../../../_static/icons/favicon-16x16.png">
  <link rel="manifest" href="../../../_static/icons/site.webmanifest">
  <link rel="mask-icon" href="../../../_static/icons/safari-pinned-tab.svg" color="#919191">
  <meta name="msapplication-TileColor" content="#2b5797">
  <meta name="msapplication-config" content="../../../_static/icons/browserconfig.xml">
  <link rel="stylesheet" href="../../../_static/stylesheets/examples.css">
    <link rel="stylesheet" href="../../../_static/material.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../../../about.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
  
   
  
  <script src="../../../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../../../_static/versions.json",
        target_loc = "../../../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>


  </head>
  <body dir=ltr
        data-md-color-primary=indigo data-md-color-accent=blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#_modules/statsmodels/iolib/summary2" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../../index.html" title="statsmodels"
           class="md-header-nav__button md-logo">
          
              <img src="../../../_static/statsmodels-logo-v2-bw.svg" height="26"
                   alt="statsmodels logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">statsmodels v0.11.1</span>
          <span class="md-header-nav__topic"> statsmodels.iolib.summary2 </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../../../search.html" method="GET" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/statsmodels/statsmodels" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    statsmodels
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../../index.html" class="md-tabs__link">Module code</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../index.html" title="statsmodels" class="md-nav__button md-logo">
      
        <img src="../../../_static/statsmodels-logo-v2-bw.svg" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../../../index.html"
       title="statsmodels">statsmodels v0.11.1</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/statsmodels/statsmodels" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    statsmodels
  </div>
</a>
    </div>
  
  

  
  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <a href="../../../install.html" class="md-nav__link">Installing statsmodels</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../../gettingstarted.html" class="md-nav__link">Getting started</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../../user-guide.html" class="md-nav__link">User Guide</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../../examples/index.html" class="md-nav__link">Examples</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../../api.html" class="md-nav__link">API Reference</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../../about.html" class="md-nav__link">About statsmodels</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../../dev/index.html" class="md-nav__link">Developer Page</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../../release/index.html" class="md-nav__link">Release Notes</a>
      
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
  <ul class="md-nav__list" data-md-scrollfix="">
    

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <h1 id="modules-statsmodels-iolib-summary2--page-root">Source code for statsmodels.iolib.summary2</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">statsmodels.compat.python</span> <span class="kn">import</span> <span class="p">(</span><span class="n">lrange</span><span class="p">,</span> <span class="n">iterkeys</span><span class="p">,</span> <span class="n">iteritems</span><span class="p">,</span> <span class="n">lzip</span><span class="p">,</span>
                                       <span class="n">itervalues</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">textwrap</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">from</span> <span class="nn">.table</span> <span class="kn">import</span> <span class="n">SimpleTable</span>
<span class="kn">from</span> <span class="nn">.tableformatting</span> <span class="kn">import</span> <span class="n">fmt_latex</span><span class="p">,</span> <span class="n">fmt_txt</span>


<div class="viewcode-block" id="Summary"><a class="viewcode-back" href="../../../generated/statsmodels.iolib.summary2.Summary.html#statsmodels.iolib.summary2.Summary">[docs]</a><span class="k">class</span> <span class="nc">Summary</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tables</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extra_txt</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_merge_latex</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">as_text</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span> <span class="o">+</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">"""</span><span class="se">\n</span><span class="s1">'</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">"""'</span>

    <span class="k">def</span> <span class="nf">_repr_html_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">'''Display as HTML in IPython notebook.'''</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">as_html</span><span class="p">()</span>

<div class="viewcode-block" id="Summary.add_df"><a class="viewcode-back" href="../../../generated/statsmodels.iolib.summary2.Summary.add_df.html#statsmodels.iolib.summary2.Summary.add_df">[docs]</a>    <span class="k">def</span> <span class="nf">add_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">float_format</span><span class="o">=</span><span class="s1">'</span><span class="si">%.4f</span><span class="s1">'</span><span class="p">,</span>
               <span class="n">align</span><span class="o">=</span><span class="s1">'r'</span><span class="p">):</span>
        <span class="sd">'''Add the contents of a DataFrame to summary table</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        df : DataFrame</span>
<span class="sd">        header: bool</span>
<span class="sd">            Reproduce the DataFrame column labels in summary table</span>
<span class="sd">        index: bool</span>
<span class="sd">            Reproduce the DataFrame row labels in summary table</span>
<span class="sd">        float_format : str</span>
<span class="sd">            Formatting to float data columns</span>
<span class="sd">        align : str</span>
<span class="sd">            Data alignment (l/c/r)</span>
<span class="sd">        '''</span>

        <span class="n">settings</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'index'</span><span class="p">:</span> <span class="n">index</span><span class="p">,</span> <span class="s1">'header'</span><span class="p">:</span> <span class="n">header</span><span class="p">,</span>
                    <span class="s1">'float_format'</span><span class="p">:</span> <span class="n">float_format</span><span class="p">,</span> <span class="s1">'align'</span><span class="p">:</span> <span class="n">align</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span></div>

<div class="viewcode-block" id="Summary.add_array"><a class="viewcode-back" href="../../../generated/statsmodels.iolib.summary2.Summary.add_array.html#statsmodels.iolib.summary2.Summary.add_array">[docs]</a>    <span class="k">def</span> <span class="nf">add_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">array</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s1">'r'</span><span class="p">,</span> <span class="n">float_format</span><span class="o">=</span><span class="s2">"</span><span class="si">%.4f</span><span class="s2">"</span><span class="p">):</span>
        <span class="sd">'''Add the contents of a Numpy array to summary table</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        array : numpy array (2D)</span>
<span class="sd">        float_format : str</span>
<span class="sd">            Formatting to array if type is float</span>
<span class="sd">        align : str</span>
<span class="sd">            Data alignment (l/c/r)</span>
<span class="sd">        '''</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_df</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">float_format</span><span class="o">=</span><span class="n">float_format</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">align</span><span class="p">)</span></div>

<div class="viewcode-block" id="Summary.add_dict"><a class="viewcode-back" href="../../../generated/statsmodels.iolib.summary2.Summary.add_dict.html#statsmodels.iolib.summary2.Summary.add_dict">[docs]</a>    <span class="k">def</span> <span class="nf">add_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s1">'l'</span><span class="p">,</span> <span class="n">float_format</span><span class="o">=</span><span class="s2">"</span><span class="si">%.4f</span><span class="s2">"</span><span class="p">):</span>
        <span class="sd">'''Add the contents of a Dict to summary table</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        d : dict</span>
<span class="sd">            Keys and values are automatically coerced to strings with str().</span>
<span class="sd">            Users are encouraged to format them before using add_dict.</span>
<span class="sd">        ncols: int</span>
<span class="sd">            Number of columns of the output table</span>
<span class="sd">        align : str</span>
<span class="sd">            Data alignment (l/c/r)</span>
<span class="sd">        '''</span>

        <span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">_formatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">float_format</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">iterkeys</span><span class="p">(</span><span class="n">d</span><span class="p">)]</span>
        <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">_formatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">float_format</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">itervalues</span><span class="p">(</span><span class="n">d</span><span class="p">)]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">lzip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">vals</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">%</span> <span class="n">ncols</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">pad</span> <span class="o">=</span> <span class="n">ncols</span> <span class="o">-</span> <span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">%</span> <span class="n">ncols</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">data</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">pad</span> <span class="o">*</span> <span class="p">[[</span><span class="s1">''</span><span class="p">,</span> <span class="s1">''</span><span class="p">]])])</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ncols</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]),</span> <span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_array</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">align</span><span class="p">)</span></div>

<div class="viewcode-block" id="Summary.add_text"><a class="viewcode-back" href="../../../generated/statsmodels.iolib.summary2.Summary.add_text.html#statsmodels.iolib.summary2.Summary.add_text">[docs]</a>    <span class="k">def</span> <span class="nf">add_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
        <span class="sd">'''Append a note to the bottom of the summary table. In ASCII tables,</span>
<span class="sd">        the note will be wrapped to table width. Notes are not indendented.</span>
<span class="sd">        '''</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extra_txt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">string</span><span class="p">)</span></div>

<div class="viewcode-block" id="Summary.add_title"><a class="viewcode-back" href="../../../generated/statsmodels.iolib.summary2.Summary.add_title.html#statsmodels.iolib.summary2.Summary.add_title">[docs]</a>    <span class="k">def</span> <span class="nf">add_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">results</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">'''Insert a title on top of the summary table. If a string is provided</span>
<span class="sd">        in the title argument, that string is printed. If no title string is</span>
<span class="sd">        provided but a results instance is provided, statsmodels attempts</span>
<span class="sd">        to construct a useful title automatically.</span>
<span class="sd">        '''</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">results</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">model</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
                <span class="k">if</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">_model_types</span><span class="p">:</span>
                    <span class="n">model</span> <span class="o">=</span> <span class="n">_model_types</span><span class="p">[</span><span class="n">model</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s1">'Results: '</span> <span class="o">+</span> <span class="n">model</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s1">''</span></div>

<div class="viewcode-block" id="Summary.add_base"><a class="viewcode-back" href="../../../generated/statsmodels.iolib.summary2.Summary.add_base.html#statsmodels.iolib.summary2.Summary.add_base">[docs]</a>    <span class="k">def</span> <span class="nf">add_base</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">float_format</span><span class="o">=</span><span class="s2">"</span><span class="si">%.4f</span><span class="s2">"</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">xname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">yname</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">'''Try to construct a basic summary instance.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        results : Model results instance</span>
<span class="sd">        alpha : float</span>
<span class="sd">            significance level for the confidence intervals (optional)</span>
<span class="sd">        float_formatting: str</span>
<span class="sd">            Float formatting for summary of parameters (optional)</span>
<span class="sd">        title : str</span>
<span class="sd">            Title of the summary table (optional)</span>
<span class="sd">        xname : list[str] of length equal to the number of parameters</span>
<span class="sd">            Names of the independent variables (optional)</span>
<span class="sd">        yname : str</span>
<span class="sd">            Name of the dependent variable (optional)</span>
<span class="sd">        '''</span>

        <span class="n">param</span> <span class="o">=</span> <span class="n">summary_params</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="n">use_t</span><span class="o">=</span><span class="n">results</span><span class="o">.</span><span class="n">use_t</span><span class="p">)</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">summary_model</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">xname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">param</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">xname</span>
        <span class="k">if</span> <span class="n">yname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">info</span><span class="p">[</span><span class="s1">'Dependent Variable:'</span><span class="p">]</span> <span class="o">=</span> <span class="n">yname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_dict</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s1">'l'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_df</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">float_format</span><span class="o">=</span><span class="n">float_format</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_title</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">results</span><span class="o">=</span><span class="n">results</span><span class="p">)</span></div>

<div class="viewcode-block" id="Summary.as_text"><a class="viewcode-back" href="../../../generated/statsmodels.iolib.summary2.Summary.as_text.html#statsmodels.iolib.summary2.Summary.as_text">[docs]</a>    <span class="k">def</span> <span class="nf">as_text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">'''Generate ASCII Summary Table</span>
<span class="sd">        '''</span>

        <span class="n">tables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span>
        <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>
        <span class="n">extra_txt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra_txt</span>

        <span class="n">pad_col</span><span class="p">,</span> <span class="n">pad_index</span><span class="p">,</span> <span class="n">widest</span> <span class="o">=</span> <span class="n">_measure_tables</span><span class="p">(</span><span class="n">tables</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span>

        <span class="n">rule_equal</span> <span class="o">=</span> <span class="n">widest</span> <span class="o">*</span> <span class="s1">'='</span>

        <span class="n">simple_tables</span> <span class="o">=</span> <span class="n">_simple_tables</span><span class="p">(</span><span class="n">tables</span><span class="p">,</span> <span class="n">settings</span><span class="p">,</span> <span class="n">pad_col</span><span class="p">,</span> <span class="n">pad_index</span><span class="p">)</span>
        <span class="n">tab</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">as_text</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">simple_tables</span><span class="p">]</span>

        <span class="n">tab</span> <span class="o">=</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
        <span class="n">tab</span> <span class="o">=</span> <span class="n">tab</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
        <span class="n">tab</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">rule_equal</span>
        <span class="n">tab</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rule_equal</span><span class="p">)</span>
        <span class="n">tab</span> <span class="o">=</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">title</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">title</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">widest</span><span class="p">:</span>
                <span class="n">title</span> <span class="o">=</span> <span class="s1">' '</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">widest</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">title</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">title</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="s1">''</span>

        <span class="n">txt</span> <span class="o">=</span> <span class="p">[</span><span class="n">textwrap</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">widest</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">extra_txt</span><span class="p">]</span>
        <span class="n">txt</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">txt</span><span class="p">]</span>
        <span class="n">txt</span> <span class="o">=</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>

        <span class="n">out</span> <span class="o">=</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">title</span><span class="p">,</span> <span class="n">tab</span><span class="p">,</span> <span class="n">txt</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">out</span></div>

<div class="viewcode-block" id="Summary.as_html"><a class="viewcode-back" href="../../../generated/statsmodels.iolib.summary2.Summary.as_html.html#statsmodels.iolib.summary2.Summary.as_html">[docs]</a>    <span class="k">def</span> <span class="nf">as_html</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">'''Generate HTML Summary Table</span>
<span class="sd">        '''</span>

        <span class="n">tables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span>

        <span class="n">simple_tables</span> <span class="o">=</span> <span class="n">_simple_tables</span><span class="p">(</span><span class="n">tables</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span>
        <span class="n">tab</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">as_html</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">simple_tables</span><span class="p">]</span>
        <span class="n">tab</span> <span class="o">=</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">tab</span></div>

<div class="viewcode-block" id="Summary.as_latex"><a class="viewcode-back" href="../../../generated/statsmodels.iolib.summary2.Summary.as_latex.html#statsmodels.iolib.summary2.Summary.as_latex">[docs]</a>    <span class="k">def</span> <span class="nf">as_latex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">'''Generate LaTeX Summary Table</span>
<span class="sd">        '''</span>
        <span class="n">tables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span>
        <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>

        <span class="k">if</span> <span class="n">title</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="s1">'</span><span class="se">\\</span><span class="s1">caption{'</span> <span class="o">+</span> <span class="n">title</span> <span class="o">+</span> <span class="s1">'}'</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="s1">'</span><span class="se">\\</span><span class="s1">caption</span><span class="si">{}</span><span class="s1">'</span>

        <span class="n">simple_tables</span> <span class="o">=</span> <span class="n">_simple_tables</span><span class="p">(</span><span class="n">tables</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span>
        <span class="n">tab</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">as_latex_tabular</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">simple_tables</span><span class="p">]</span>
        <span class="n">tab</span> <span class="o">=</span> <span class="s1">'</span><span class="se">\n\\</span><span class="s1">hline</span><span class="se">\n</span><span class="s1">'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>

        <span class="n">to_replace</span> <span class="o">=</span> <span class="p">(</span><span class="s1">'</span><span class="se">\\\\</span><span class="s1">hline</span><span class="se">\\</span><span class="s1">n</span><span class="se">\\\\</span><span class="s1">hline</span><span class="se">\\</span><span class="s1">n</span><span class="se">\\\\</span><span class="s1">'</span>
                      <span class="s1">'end</span><span class="si">{tabular}</span><span class="se">\\</span><span class="s1">n</span><span class="se">\\\\</span><span class="s1">begin</span><span class="si">{tabular}</span><span class="s1">{.*}</span><span class="se">\\</span><span class="s1">n'</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_merge_latex</span><span class="p">:</span>
            <span class="c1"># create single tabular object for summary_col</span>
            <span class="n">tab</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">to_replace</span><span class="p">,</span> <span class="sa">r</span><span class="s1">'</span><span class="se">\\</span><span class="s1">midrule\n'</span><span class="p">,</span> <span class="n">tab</span><span class="p">)</span>

        <span class="n">out</span> <span class="o">=</span> <span class="s1">'</span><span class="se">\\</span><span class="s1">begin</span><span class="si">{table}</span><span class="s1">'</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">tab</span><span class="p">,</span> <span class="s1">'</span><span class="se">\\</span><span class="s1">end</span><span class="si">{table}</span><span class="s1">'</span>
        <span class="n">out</span> <span class="o">=</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span></div></div>


<span class="k">def</span> <span class="nf">_measure_tables</span><span class="p">(</span><span class="n">tables</span><span class="p">,</span> <span class="n">settings</span><span class="p">):</span>
    <span class="sd">'''Compare width of ascii tables in a list and calculate padding values.</span>
<span class="sd">    We add space to each col_sep to get us as close as possible to the</span>
<span class="sd">    width of the largest table. Then, we add a few spaces to the first</span>
<span class="sd">    column to pad the rest.</span>
<span class="sd">    '''</span>

    <span class="n">simple_tables</span> <span class="o">=</span> <span class="n">_simple_tables</span><span class="p">(</span><span class="n">tables</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span>
    <span class="n">tab</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">as_text</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">simple_tables</span><span class="p">]</span>

    <span class="n">length</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">tab</span><span class="p">]</span>
    <span class="n">len_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="n">pad_sep</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">pad_index</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tab</span><span class="p">)):</span>
        <span class="n">nsep</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">tables</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">pad</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">len_max</span> <span class="o">-</span> <span class="n">length</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">/</span> <span class="n">nsep</span><span class="p">)</span>
        <span class="n">pad_sep</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pad</span><span class="p">)</span>
        <span class="n">len_new</span> <span class="o">=</span> <span class="n">length</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">nsep</span> <span class="o">*</span> <span class="n">pad</span>
        <span class="n">pad_index</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">len_max</span> <span class="o">-</span> <span class="n">len_new</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">pad_sep</span><span class="p">,</span> <span class="n">pad_index</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>


<span class="c1"># Useful stuff  # TODO: be more specific</span>
<span class="n">_model_types</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'OLS'</span><span class="p">:</span> <span class="s1">'Ordinary least squares'</span><span class="p">,</span>
                <span class="s1">'GLS'</span><span class="p">:</span> <span class="s1">'Generalized least squares'</span><span class="p">,</span>
                <span class="s1">'GLSAR'</span><span class="p">:</span> <span class="s1">'Generalized least squares with AR(p)'</span><span class="p">,</span>
                <span class="s1">'WLS'</span><span class="p">:</span> <span class="s1">'Weighted least squares'</span><span class="p">,</span>
                <span class="s1">'RLM'</span><span class="p">:</span> <span class="s1">'Robust linear model'</span><span class="p">,</span>
                <span class="s1">'NBin'</span><span class="p">:</span> <span class="s1">'Negative binomial model'</span><span class="p">,</span>
                <span class="s1">'GLM'</span><span class="p">:</span> <span class="s1">'Generalized linear model'</span>
                <span class="p">}</span>


<span class="k">def</span> <span class="nf">summary_model</span><span class="p">(</span><span class="n">results</span><span class="p">):</span>
    <span class="sd">'''Create a dict with information about the model</span>
<span class="sd">    '''</span>

    <span class="k">def</span> <span class="nf">time_now</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M'</span><span class="p">)</span>

    <span class="n">info</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Model:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Model Family:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">family</span><span class="o">.</span><span class="n">__class</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Link Function:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">family</span><span class="o">.</span><span class="n">link</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Dependent Variable:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">endog_names</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Date:'</span><span class="p">]</span> <span class="o">=</span> <span class="n">time_now</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'No. Observations:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">"</span><span class="si">%#6d</span><span class="s2">"</span> <span class="o">%</span> <span class="n">x</span><span class="o">.</span><span class="n">nobs</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Df Model:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">"</span><span class="si">%#6d</span><span class="s2">"</span> <span class="o">%</span> <span class="n">x</span><span class="o">.</span><span class="n">df_model</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Df Residuals:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">"</span><span class="si">%#6d</span><span class="s2">"</span> <span class="o">%</span> <span class="n">x</span><span class="o">.</span><span class="n">df_resid</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Converged:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">mle_retvals</span><span class="p">[</span><span class="s1">'converged'</span><span class="p">]</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'No. Iterations:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">mle_retvals</span><span class="p">[</span><span class="s1">'iterations'</span><span class="p">]</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Method:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">method</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Norm:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">fit_options</span><span class="p">[</span><span class="s1">'norm'</span><span class="p">]</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Scale Est.:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">fit_options</span><span class="p">[</span><span class="s1">'scale_est'</span><span class="p">]</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Cov. Type:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">fit_options</span><span class="p">[</span><span class="s1">'cov'</span><span class="p">]</span>

    <span class="n">rsquared_type</span> <span class="o">=</span> <span class="s1">''</span> <span class="k">if</span> <span class="n">results</span><span class="o">.</span><span class="n">k_constant</span> <span class="k">else</span> <span class="s1">' (uncentered)'</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'R-squared'</span> <span class="o">+</span> <span class="n">rsquared_type</span> <span class="o">+</span> <span class="s1">':'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">"</span><span class="si">%#8.3f</span><span class="s2">"</span> <span class="o">%</span> <span class="n">x</span><span class="o">.</span><span class="n">rsquared</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Adj. R-squared'</span> <span class="o">+</span> <span class="n">rsquared_type</span> <span class="o">+</span> <span class="s1">':'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">"</span><span class="si">%#8.3f</span><span class="s2">"</span> <span class="o">%</span> <span class="n">x</span><span class="o">.</span><span class="n">rsquared_adj</span>  <span class="c1"># noqa:E501</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Pseudo R-squared:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">"</span><span class="si">%#8.3f</span><span class="s2">"</span> <span class="o">%</span> <span class="n">x</span><span class="o">.</span><span class="n">prsquared</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'AIC:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">"</span><span class="si">%8.4f</span><span class="s2">"</span> <span class="o">%</span> <span class="n">x</span><span class="o">.</span><span class="n">aic</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'BIC:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">"</span><span class="si">%8.4f</span><span class="s2">"</span> <span class="o">%</span> <span class="n">x</span><span class="o">.</span><span class="n">bic</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Log-Likelihood:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">"</span><span class="si">%#8.5g</span><span class="s2">"</span> <span class="o">%</span> <span class="n">x</span><span class="o">.</span><span class="n">llf</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'LL-Null:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">"</span><span class="si">%#8.5g</span><span class="s2">"</span> <span class="o">%</span> <span class="n">x</span><span class="o">.</span><span class="n">llnull</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'LLR p-value:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">"</span><span class="si">%#8.5g</span><span class="s2">"</span> <span class="o">%</span> <span class="n">x</span><span class="o">.</span><span class="n">llr_pvalue</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Deviance:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">"</span><span class="si">%#8.5g</span><span class="s2">"</span> <span class="o">%</span> <span class="n">x</span><span class="o">.</span><span class="n">deviance</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Pearson chi2:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">"</span><span class="si">%#6.3g</span><span class="s2">"</span> <span class="o">%</span> <span class="n">x</span><span class="o">.</span><span class="n">pearson_chi2</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'F-statistic:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">"</span><span class="si">%#8.4g</span><span class="s2">"</span> <span class="o">%</span> <span class="n">x</span><span class="o">.</span><span class="n">fvalue</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Prob (F-statistic):'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">"</span><span class="si">%#6.3g</span><span class="s2">"</span> <span class="o">%</span> <span class="n">x</span><span class="o">.</span><span class="n">f_pvalue</span>
    <span class="n">info</span><span class="p">[</span><span class="s1">'Scale:'</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">"</span><span class="si">%#8.5g</span><span class="s2">"</span> <span class="o">%</span> <span class="n">x</span><span class="o">.</span><span class="n">scale</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">iteritems</span><span class="p">(</span><span class="n">info</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">out</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">,</span> <span class="ne">NotImplementedError</span><span class="p">):</span>
            <span class="c1"># NOTE: some models do not have loglike defined (RLM),</span>
            <span class="c1">#   so raise NotImplementedError</span>
            <span class="k">pass</span>
    <span class="k">return</span> <span class="n">out</span>


<span class="k">def</span> <span class="nf">summary_params</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">yname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=.</span><span class="mi">05</span><span class="p">,</span> <span class="n">use_t</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                   <span class="n">skip_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">float_format</span><span class="o">=</span><span class="s2">"</span><span class="si">%.4f</span><span class="s2">"</span><span class="p">):</span>
    <span class="sd">'''create a summary table of parameters from results instance</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    res : results instance</span>
<span class="sd">        some required information is directly taken from the result</span>
<span class="sd">        instance</span>
<span class="sd">    yname : {str, None}</span>
<span class="sd">        optional name for the endogenous variable, default is "y"</span>
<span class="sd">    xname : {list[str], None}</span>
<span class="sd">        optional names for the exogenous variables, default is "var_xx"</span>
<span class="sd">    alpha : float</span>
<span class="sd">        significance level for the confidence intervals</span>
<span class="sd">    use_t : bool</span>
<span class="sd">        indicator whether the p-values are based on the Student-t</span>
<span class="sd">        distribution (if True) or on the normal distribution (if False)</span>
<span class="sd">    skip_headers : bool</span>
<span class="sd">        If false (default), then the header row is added. If true, then no</span>
<span class="sd">        header row is added.</span>
<span class="sd">    float_format : str</span>
<span class="sd">        float formatting options (e.g. ".3g")</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    params_table : SimpleTable instance</span>
<span class="sd">    '''</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="n">results</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">bse</span><span class="p">,</span> <span class="n">tvalues</span><span class="p">,</span> <span class="n">pvalues</span><span class="p">,</span> <span class="n">conf_int</span> <span class="o">=</span> <span class="n">results</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">params</span>
        <span class="n">bse</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">bse</span>
        <span class="n">tvalues</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">tvalues</span>
        <span class="n">pvalues</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">pvalues</span>
        <span class="n">conf_int</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">conf_int</span><span class="p">(</span><span class="n">alpha</span><span class="p">)</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">params</span><span class="p">,</span> <span class="n">bse</span><span class="p">,</span> <span class="n">tvalues</span><span class="p">,</span> <span class="n">pvalues</span><span class="p">])</span><span class="o">.</span><span class="n">T</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span><span class="n">data</span><span class="p">,</span> <span class="n">conf_int</span><span class="p">])</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">use_t</span><span class="p">:</span>
        <span class="n">data</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Coef.'</span><span class="p">,</span> <span class="s1">'Std.Err.'</span><span class="p">,</span> <span class="s1">'t'</span><span class="p">,</span> <span class="s1">'P&gt;|t|'</span><span class="p">,</span>
                        <span class="s1">'['</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">alpha</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">alpha</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s1">']'</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Coef.'</span><span class="p">,</span> <span class="s1">'Std.Err.'</span><span class="p">,</span> <span class="s1">'z'</span><span class="p">,</span> <span class="s1">'P&gt;|z|'</span><span class="p">,</span>
                        <span class="s1">'['</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">alpha</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">alpha</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s1">']'</span><span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">xname</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">param_names</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">exog_names</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">xname</span>

    <span class="k">return</span> <span class="n">data</span>


<span class="c1"># Vertical summary instance for multiple models</span>
<span class="k">def</span> <span class="nf">_col_params</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">float_format</span><span class="o">=</span><span class="s1">'</span><span class="si">%.4f</span><span class="s1">'</span><span class="p">,</span> <span class="n">stars</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">'''Stack coefficients and standard errors in single column</span>
<span class="sd">    '''</span>

    <span class="c1"># Extract parameters</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">summary_params</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="c1"># Format float</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="mi">2</span><span class="p">]:</span>
        <span class="n">res</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">float_format</span> <span class="o">%</span> <span class="n">x</span><span class="p">)</span>
    <span class="c1"># Std.Errors in parentheses</span>
    <span class="n">res</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'('</span> <span class="o">+</span> <span class="n">res</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">')'</span>
    <span class="c1"># Significance stars</span>
    <span class="k">if</span> <span class="n">stars</span><span class="p">:</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">.</span><span class="mi">1</span>
        <span class="n">res</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">+</span> <span class="s1">'*'</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">.</span><span class="mi">05</span>
        <span class="n">res</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">+</span> <span class="s1">'*'</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">.</span><span class="mi">01</span>
        <span class="n">res</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">+</span> <span class="s1">'*'</span>
    <span class="c1"># Stack Coefs and Std.Errors</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">rsquared</span> <span class="o">=</span> <span class="n">rsquared_adj</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">'rsquared'</span><span class="p">):</span>
        <span class="n">rsquared</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">rsquared</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">'rsquared_adj'</span><span class="p">):</span>
        <span class="n">rsquared_adj</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">rsquared_adj</span>
    <span class="n">r_result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'Basic'</span><span class="p">:</span> <span class="p">[</span><span class="n">rsquared</span><span class="p">],</span> <span class="s1">'Adj.'</span><span class="p">:</span> <span class="p">[</span><span class="n">rsquared_adj</span><span class="p">]},</span>
                            <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">'R-squared'</span><span class="p">])</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">r_result</span><span class="p">))):</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">r_result</span><span class="p">:</span>
            <span class="n">r_result</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">r_result</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">float_format</span> <span class="o">%</span> <span class="n">x</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r_result</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="c1"># TODO: Remove when min pandas &gt;= 0.23</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r_result</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">stack</span><span class="p">()</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="n">res</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">endog_names</span><span class="p">)]</span>
    <span class="k">return</span> <span class="n">res</span>


<span class="k">def</span> <span class="nf">_col_info</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">info_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">'''Stack model info in a column</span>
<span class="sd">    '''</span>

    <span class="k">if</span> <span class="n">info_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">info_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">index</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">info_dict</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">info_dict</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="c1"># this is a specific model info_dict, but not for this result...</span>
            <span class="k">continue</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">info_dict</span><span class="p">[</span><span class="n">i</span><span class="p">](</span><span class="n">result</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
        <span class="n">index</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">endog_names</span><span class="p">):</span> <span class="n">out</span><span class="p">},</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>


<span class="k">def</span> <span class="nf">_make_unique</span><span class="p">(</span><span class="n">list_of_names</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">list_of_names</span><span class="p">))</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_of_names</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">list_of_names</span>
    <span class="c1"># pandas does not like it if multiple columns have the same names</span>
    <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
    <span class="n">name_counter</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">_name</span> <span class="ow">in</span> <span class="n">list_of_names</span><span class="p">:</span>
        <span class="n">name_counter</span><span class="p">[</span><span class="n">_name</span><span class="p">]</span> <span class="o">+=</span> <span class="s2">"I"</span>
        <span class="n">header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_name</span><span class="o">+</span><span class="s2">" "</span> <span class="o">+</span> <span class="n">name_counter</span><span class="p">[</span><span class="n">_name</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">header</span>


<span class="k">def</span> <span class="nf">summary_col</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">float_format</span><span class="o">=</span><span class="s1">'</span><span class="si">%.4f</span><span class="s1">'</span><span class="p">,</span> <span class="n">model_names</span><span class="o">=</span><span class="p">(),</span> <span class="n">stars</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">info_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">regressor_order</span><span class="o">=</span><span class="p">(),</span> <span class="n">drop_omitted</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Summarize multiple results instances side-by-side (coefs and SEs)</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    results : statsmodels results instance or list of result instances</span>
<span class="sd">    float_format : str, optional</span>
<span class="sd">        float format for coefficients and standard errors</span>
<span class="sd">        Default : '%.4f'</span>
<span class="sd">    model_names : list[str], optional</span>
<span class="sd">        Must have same length as the number of results. If the names are not</span>
<span class="sd">        unique, a roman number will be appended to all model names</span>
<span class="sd">    stars : bool</span>
<span class="sd">        print significance stars</span>
<span class="sd">    info_dict : dict</span>
<span class="sd">        dict of functions to be applied to results instances to retrieve</span>
<span class="sd">        model info. To use specific information for different models, add a</span>
<span class="sd">        (nested) info_dict with model name as the key.</span>
<span class="sd">        Example: `info_dict = {"N":lambda x:(x.nobs), "R2": ..., "OLS":{</span>
<span class="sd">        "R2":...}}` would only show `R2` for OLS regression models, but</span>
<span class="sd">        additionally `N` for all other results.</span>
<span class="sd">        Default : None (use the info_dict specified in</span>
<span class="sd">        result.default_model_infos, if this property exists)</span>
<span class="sd">    regressor_order : list[str], optional</span>
<span class="sd">        list of names of the regressors in the desired order. All regressors</span>
<span class="sd">        not specified will be appended to the end of the list.</span>
<span class="sd">    drop_omitted : bool, optional</span>
<span class="sd">        Includes regressors that are not specified in regressor_order. If</span>
<span class="sd">        False, regressors not specified will be appended to end of the list.</span>
<span class="sd">        If True, only regressors in regressor_order will be included.</span>
<span class="sd">    """</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">results</span><span class="p">]</span>

    <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">_col_params</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">stars</span><span class="o">=</span><span class="n">stars</span><span class="p">,</span> <span class="n">float_format</span><span class="o">=</span><span class="n">float_format</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span>
            <span class="n">results</span><span class="p">]</span>

    <span class="c1"># Unique column names (pandas has problems merging otherwise)</span>
    <span class="k">if</span> <span class="n">model_names</span><span class="p">:</span>
        <span class="n">colnames</span> <span class="o">=</span> <span class="n">_make_unique</span><span class="p">(</span><span class="n">model_names</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">colnames</span> <span class="o">=</span> <span class="n">_make_unique</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cols</span><span class="p">)):</span>
        <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">colnames</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>

    <span class="k">def</span> <span class="nf">merg</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">'outer'</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">summ</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">merg</span><span class="p">,</span> <span class="n">cols</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">regressor_order</span><span class="p">:</span>
        <span class="n">varnames</span> <span class="o">=</span> <span class="n">summ</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="n">ordered</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">regressor_order</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">varnames</span><span class="p">]</span>
        <span class="n">unordered</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">varnames</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">regressor_order</span> <span class="o">+</span> <span class="p">[</span><span class="s1">''</span><span class="p">]]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="n">ordered</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">unordered</span><span class="p">))</span>

        <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">idx</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">sum</span><span class="p">([[</span><span class="n">x</span> <span class="o">+</span> <span class="s1">'coef'</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="s1">'stde'</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">idx</span><span class="p">],</span> <span class="p">[])</span>

        <span class="n">summ</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">varnames</span><span class="p">))</span>
        <span class="n">summ</span> <span class="o">=</span> <span class="n">summ</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">order</span><span class="p">))</span>
        <span class="n">summ</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">summ</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">drop_omitted</span><span class="p">:</span>
            <span class="n">summ</span> <span class="o">=</span> <span class="n">summ</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">regressor_order</span><span class="p">]</span>

    <span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">lrange</span><span class="p">(</span><span class="n">summ</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="n">summ</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="n">summ</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

    <span class="c1"># add infos about the models.</span>
    <span class="k">if</span> <span class="n">info_dict</span><span class="p">:</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">_col_info</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">info_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                                           <span class="n">info_dict</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">_col_info</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">"default_model_infos"</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span>
                <span class="n">results</span><span class="p">]</span>
    <span class="c1"># use unique column names, otherwise the merge will not succeed</span>
    <span class="k">for</span> <span class="n">df</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cols</span><span class="p">,</span> <span class="n">_make_unique</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">])):</span>
        <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">merg</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">'outer'</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">info</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">merg</span><span class="p">,</span> <span class="n">cols</span><span class="p">)</span>
    <span class="n">dat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">summ</span><span class="p">,</span> <span class="n">info</span><span class="p">]))</span>  <span class="c1"># pd.concat better, but error</span>
    <span class="n">dat</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">summ</span><span class="o">.</span><span class="n">columns</span>
    <span class="n">dat</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">summ</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="o">+</span> <span class="n">info</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
    <span class="n">summ</span> <span class="o">=</span> <span class="n">dat</span>

    <span class="n">summ</span> <span class="o">=</span> <span class="n">summ</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>

    <span class="n">smry</span> <span class="o">=</span> <span class="n">Summary</span><span class="p">()</span>
    <span class="n">smry</span><span class="o">.</span><span class="n">_merge_latex</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">smry</span><span class="o">.</span><span class="n">add_df</span><span class="p">(</span><span class="n">summ</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s1">'l'</span><span class="p">)</span>
    <span class="n">smry</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span><span class="s1">'Standard errors in parentheses.'</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">stars</span><span class="p">:</span>
        <span class="n">smry</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span><span class="s1">'* p&lt;.1, ** p&lt;.05, ***p&lt;.01'</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">smry</span>


<span class="k">def</span> <span class="nf">_formatter</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">float_format</span><span class="o">=</span><span class="s1">'</span><span class="si">%.4f</span><span class="s1">'</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">float_format</span> <span class="o">%</span> <span class="n">element</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">_df_to_simpletable</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s1">'r'</span><span class="p">,</span> <span class="n">float_format</span><span class="o">=</span><span class="s2">"</span><span class="si">%.4f</span><span class="s2">"</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">table_dec_above</span><span class="o">=</span><span class="s1">'-'</span><span class="p">,</span> <span class="n">table_dec_below</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                       <span class="n">header_dec_below</span><span class="o">=</span><span class="s1">'-'</span><span class="p">,</span> <span class="n">pad_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pad_index</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="n">dat</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">dat</span> <span class="o">=</span> <span class="n">dat</span><span class="o">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">_formatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">float_format</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">header</span><span class="p">:</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">dat</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">index</span><span class="p">:</span>
        <span class="n">stubs</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">pad_index</span><span class="p">)</span> <span class="o">*</span> <span class="s1">' '</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">dat</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">dat</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">pad_index</span><span class="p">)</span> <span class="o">*</span> <span class="s1">' '</span>
                          <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">dat</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]]</span>
        <span class="n">stubs</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">st</span> <span class="o">=</span> <span class="n">SimpleTable</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">dat</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">stubs</span><span class="o">=</span><span class="n">stubs</span><span class="p">,</span>
                     <span class="n">ltx_fmt</span><span class="o">=</span><span class="n">fmt_latex</span><span class="p">,</span> <span class="n">txt_fmt</span><span class="o">=</span><span class="n">fmt_txt</span><span class="p">)</span>
    <span class="n">st</span><span class="o">.</span><span class="n">output_formats</span><span class="p">[</span><span class="s1">'latex'</span><span class="p">][</span><span class="s1">'data_aligns'</span><span class="p">]</span> <span class="o">=</span> <span class="n">align</span>
    <span class="n">st</span><span class="o">.</span><span class="n">output_formats</span><span class="p">[</span><span class="s1">'txt'</span><span class="p">][</span><span class="s1">'data_aligns'</span><span class="p">]</span> <span class="o">=</span> <span class="n">align</span>
    <span class="n">st</span><span class="o">.</span><span class="n">output_formats</span><span class="p">[</span><span class="s1">'txt'</span><span class="p">][</span><span class="s1">'table_dec_above'</span><span class="p">]</span> <span class="o">=</span> <span class="n">table_dec_above</span>
    <span class="n">st</span><span class="o">.</span><span class="n">output_formats</span><span class="p">[</span><span class="s1">'txt'</span><span class="p">][</span><span class="s1">'table_dec_below'</span><span class="p">]</span> <span class="o">=</span> <span class="n">table_dec_below</span>
    <span class="n">st</span><span class="o">.</span><span class="n">output_formats</span><span class="p">[</span><span class="s1">'txt'</span><span class="p">][</span><span class="s1">'header_dec_below'</span><span class="p">]</span> <span class="o">=</span> <span class="n">header_dec_below</span>
    <span class="n">st</span><span class="o">.</span><span class="n">output_formats</span><span class="p">[</span><span class="s1">'txt'</span><span class="p">][</span><span class="s1">'colsep'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">' '</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">pad_col</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">st</span>


<span class="k">def</span> <span class="nf">_simple_tables</span><span class="p">(</span><span class="n">tables</span><span class="p">,</span> <span class="n">settings</span><span class="p">,</span> <span class="n">pad_col</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pad_index</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">simple_tables</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">float_format</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">'float_format'</span><span class="p">]</span> <span class="k">if</span> <span class="n">settings</span> <span class="k">else</span> <span class="s1">'</span><span class="si">%.4f</span><span class="s1">'</span>
    <span class="k">if</span> <span class="n">pad_col</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pad_col</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">tables</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pad_index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pad_index</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">tables</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tables</span><span class="p">):</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">'index'</span><span class="p">]</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">'header'</span><span class="p">]</span>
        <span class="n">align</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">'align'</span><span class="p">]</span>
        <span class="n">simple_tables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_df_to_simpletable</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">align</span><span class="p">,</span>
                                                <span class="n">float_format</span><span class="o">=</span><span class="n">float_format</span><span class="p">,</span>
                                                <span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span>
                                                <span class="n">pad_col</span><span class="o">=</span><span class="n">pad_col</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                                                <span class="n">pad_index</span><span class="o">=</span><span class="n">pad_index</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
    <span class="k">return</span> <span class="n">simple_tables</span>
</pre></div>

          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2009-2019, Josef Perktold, Skipper Seabold, Jonathan Taylor, statsmodels-developers.
              
          </div>
            Last updated on
              Feb 21, 2020.
            <br/>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 2.4.2.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../../../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>