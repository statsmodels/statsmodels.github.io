

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="_static/javascripts/modernizr.js"></script>
  
  
  
    <title>Getting started &#8212; statsmodels</title>
  <link rel="icon" type="image/png" sizes="32x32" href="_static/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="_static/icons/favicon-16x16.png">
  <link rel="manifest" href="_static/icons/site.webmanifest">
  <link rel="mask-icon" href="_static/icons/safari-pinned-tab.svg" color="#919191">
  <meta name="msapplication-TileColor" content="#2b5797">
  <meta name="msapplication-config" content="_static/icons/browserconfig.xml">
  <link rel="stylesheet" href="_static/stylesheets/examples.css">
    <link rel="stylesheet" href="_static/material.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="statsmodels.tools.web.webdoc" href="generated/statsmodels.tools.web.webdoc.html" />
    <link rel="prev" title="Installing statsmodels" href="install.html" />
  
   
  
  <script src="_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "_static/versions.json",
        target_loc = "../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>


  </head>
  <body dir=ltr
        data-md-color-primary=indigo data-md-color-accent=blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#gettingstarted" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="index.html" title="statsmodels"
           class="md-header-nav__button md-logo">
          
              <img src="_static/statsmodels-logo-v2-bw.svg" height="26"
                   alt="statsmodels logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">statsmodels v0.11.1</span>
          <span class="md-header-nav__topic"> Getting started </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="search.html" method="GET" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/statsmodels/statsmodels" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    statsmodels
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="index.html" title="statsmodels" class="md-nav__button md-logo">
      
        <img src="_static/statsmodels-logo-v2-bw.svg" alt=" logo" width="48" height="48">
      
    </a>
    <a href="index.html"
       title="statsmodels">statsmodels v0.11.1</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/statsmodels/statsmodels" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    statsmodels
  </div>
</a>
    </div>
  
  

  
  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <a href="install.html" class="md-nav__link">Installing statsmodels</a>
      
    </li>
    <li class="md-nav__item">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Getting started </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Getting started</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#gettingstarted--page-root" class="md-nav__link">Getting started</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#loading-modules-and-functions" class="md-nav__link">Loading modules and functions</a>
        </li>
        <li class="md-nav__item"><a href="#data" class="md-nav__link">Data</a>
        </li>
        <li class="md-nav__item"><a href="#substantive-motivation-and-model" class="md-nav__link">Substantive motivation and model</a>
        </li>
        <li class="md-nav__item"><a href="#design-matrices-endog-exog" class="md-nav__link">Design matrices (<em>endog</em> & <em>exog</em>)</a>
        </li>
        <li class="md-nav__item"><a href="#model-fit-and-summary" class="md-nav__link">Model fit and summary</a>
        </li>
        <li class="md-nav__item"><a href="#diagnostics-and-specification-tests" class="md-nav__link">Diagnostics and specification tests</a>
        </li>
        <li class="md-nav__item"><a href="#documentation" class="md-nav__link">Documentation</a>
        </li>
        <li class="md-nav__item"><a href="#more" class="md-nav__link">More</a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="_sources/gettingstarted.rst.txt">Show Source</a> </li>

  </ul>
</nav><ul class="md-nav__list"> 
    <li class="md-nav__item">
    
      <a href="#loading-modules-and-functions" class="md-nav__link">Loading modules and functions</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="#data" class="md-nav__link">Data</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="#substantive-motivation-and-model" class="md-nav__link">Substantive motivation and model</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="#design-matrices-endog-exog" class="md-nav__link">Design matrices (<em>endog</em> & <em>exog</em>)</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="#model-fit-and-summary" class="md-nav__link">Model fit and summary</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="#diagnostics-and-specification-tests" class="md-nav__link">Diagnostics and specification tests</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="#documentation" class="md-nav__link">Documentation</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
      <a href="generated/statsmodels.tools.web.webdoc.html" class="md-nav__link">statsmodels.tools.web.webdoc</a>
      
    </li></ul>
    </li>
    <li class="md-nav__item">
    
      <a href="#more" class="md-nav__link">More</a>
      
    </li></ul>
    </li>
    <li class="md-nav__item">
    
      <a href="user-guide.html" class="md-nav__link">User Guide</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="examples/index.html" class="md-nav__link">Examples</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="api.html" class="md-nav__link">API Reference</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="about.html" class="md-nav__link">About statsmodels</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="dev/index.html" class="md-nav__link">Developer Page</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="release/index.html" class="md-nav__link">Release Notes</a>
      
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#gettingstarted--page-root" class="md-nav__link">Getting started</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#loading-modules-and-functions" class="md-nav__link">Loading modules and functions</a>
        </li>
        <li class="md-nav__item"><a href="#data" class="md-nav__link">Data</a>
        </li>
        <li class="md-nav__item"><a href="#substantive-motivation-and-model" class="md-nav__link">Substantive motivation and model</a>
        </li>
        <li class="md-nav__item"><a href="#design-matrices-endog-exog" class="md-nav__link">Design matrices (<em>endog</em> & <em>exog</em>)</a>
        </li>
        <li class="md-nav__item"><a href="#model-fit-and-summary" class="md-nav__link">Model fit and summary</a>
        </li>
        <li class="md-nav__item"><a href="#diagnostics-and-specification-tests" class="md-nav__link">Diagnostics and specification tests</a>
        </li>
        <li class="md-nav__item"><a href="#documentation" class="md-nav__link">Documentation</a>
        </li>
        <li class="md-nav__item"><a href="#more" class="md-nav__link">More</a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="_sources/gettingstarted.rst.txt">Show Source</a> </li>

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="gettingstarted--page-root">Getting started<a class="headerlink" href="#gettingstarted--page-root" title="Permalink to this headline">¶</a></h1>
<p>This very simple case-study is designed to get you up-and-running quickly with
<code class="docutils literal notranslate"><span class="pre">statsmodels</span></code>. Starting from raw data, we will show the steps needed to
estimate a statistical model and to draw a diagnostic plot. We will only use
functions provided by <code class="docutils literal notranslate"><span class="pre">statsmodels</span></code> or its <code class="docutils literal notranslate"><span class="pre">pandas</span></code> and <code class="docutils literal notranslate"><span class="pre">patsy</span></code>
dependencies.</p>

<h2 id="loading-modules-and-functions">Loading modules and functions<a class="headerlink" href="#loading-modules-and-functions" title="Permalink to this headline">¶</a></h2>
<p>After <a class="reference external" href="install.html">installing statsmodels and its dependencies</a>, we load a
few modules and functions:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>

<span class="gp">In [2]: </span><span class="kn">import</span> <span class="nn">pandas</span>

<span class="gp">In [3]: </span><span class="kn">from</span> <span class="nn">patsy</span> <span class="kn">import</span> <span class="n">dmatrices</span>
</pre></div>
</div>
<p><a class="reference external" href="https://pandas.pydata.org/">pandas</a> builds on <code class="docutils literal notranslate"><span class="pre">numpy</span></code> arrays to provide
rich data structures and data analysis tools. The <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> function
provides labelled arrays of (potentially heterogenous) data, similar to the
<code class="docutils literal notranslate"><span class="pre">R</span></code> “data.frame”. The <code class="docutils literal notranslate"><span class="pre">pandas.read_csv</span></code> function can be used to convert a
comma-separated values file to a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> object.</p>
<p><a class="reference external" href="https://github.com/pydata/patsy">patsy</a> is a Python library for describing
statistical models and building <a class="reference external" href="https://en.wikipedia.org/wiki/Design_matrix">Design Matrices</a> using <code class="docutils literal notranslate"><span class="pre">R</span></code>-like formulas.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This example uses the API interface.  See <a class="reference internal" href="api-structure.html#importpaths"><span class="std std-ref">Import Paths and Structure</span></a> for information on
the difference between importing the API interfaces (<code class="docutils literal notranslate"><span class="pre">statsmodels.api</span></code> and
<code class="docutils literal notranslate"><span class="pre">statsmodels.tsa.api</span></code>) and directly importing from the module that defines
the model.</p>
</div>


<h2 id="data">Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h2>
<p>We download the <a class="reference external" href="https://vincentarelbundock.github.io/Rdatasets/doc/HistData/Guerry.html">Guerry dataset</a>, a
collection of historical data used in support of Andre-Michel Guerry’s 1833
<em>Essay on the Moral Statistics of France</em>. The data set is hosted online in
comma-separated values format (CSV) by the <a class="reference external" href="https://github.com/vincentarelbundock/Rdatasets/">Rdatasets</a> repository.
We could download the file locally and then load it using <code class="docutils literal notranslate"><span class="pre">read_csv</span></code>, but
<code class="docutils literal notranslate"><span class="pre">pandas</span></code> takes care of all of this automatically for us:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get_rdataset</span><span class="p">(</span><span class="s2">"Guerry"</span><span class="p">,</span> <span class="s2">"HistData"</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</pre></div>
</div>
<p>The <a class="reference external" href="iolib.html">Input/Output doc page</a> shows how to import from various
other formats.</p>
<p>We select the variables of interest and look at the bottom 5 rows:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="nb">vars</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Department'</span><span class="p">,</span> <span class="s1">'Lottery'</span><span class="p">,</span> <span class="s1">'Literacy'</span><span class="p">,</span> <span class="s1">'Wealth'</span><span class="p">,</span> <span class="s1">'Region'</span><span class="p">]</span>

<span class="gp">In [6]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="nb">vars</span><span class="p">]</span>

<span class="gp">In [7]: </span><span class="n">df</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:]</span>
<span class="gh">Out[7]: </span><span class="go"></span>
<span class="go">      Department  Lottery  Literacy  Wealth Region</span>
<span class="go">81        Vienne       40        25      68      W</span>
<span class="go">82  Haute-Vienne       55        13      67      C</span>
<span class="go">83        Vosges       14        62      82      E</span>
<span class="go">84         Yonne       51        47      30      C</span>
<span class="go">85         Corse       83        49      37    NaN</span>
</pre></div>
</div>
<p>Notice that there is one missing observation in the <em>Region</em> column. We
eliminate it using a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> method provided by <code class="docutils literal notranslate"><span class="pre">pandas</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="gp">In [9]: </span><span class="n">df</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:]</span>
<span class="gh">Out[9]: </span><span class="go"></span>
<span class="go">      Department  Lottery  Literacy  Wealth Region</span>
<span class="go">80        Vendee       68        28      56      W</span>
<span class="go">81        Vienne       40        25      68      W</span>
<span class="go">82  Haute-Vienne       55        13      67      C</span>
<span class="go">83        Vosges       14        62      82      E</span>
<span class="go">84         Yonne       51        47      30      C</span>
</pre></div>
</div>


<h2 id="substantive-motivation-and-model">Substantive motivation and model<a class="headerlink" href="#substantive-motivation-and-model" title="Permalink to this headline">¶</a></h2>
<p>We want to know whether literacy rates in the 86 French departments are
associated with per capita wagers on the Royal Lottery in the 1820s. We need to
control for the level of wealth in each department, and we also want to include
a series of dummy variables on the right-hand side of our regression equation to
control for unobserved heterogeneity due to regional effects. The model is
estimated using ordinary least squares regression (OLS).</p>


<h2 id="design-matrices-endog-exog">Design matrices (<em>endog</em> &amp; <em>exog</em>)<a class="headerlink" href="#design-matrices-endog-exog" title="Permalink to this headline">¶</a></h2>
<p>To fit most of the models covered by <code class="docutils literal notranslate"><span class="pre">statsmodels</span></code>, you will need to create
two design matrices. The first is a matrix of endogenous variable(s) (i.e.
dependent, response, regressand, etc.). The second is a matrix of exogenous
variable(s) (i.e. independent, predictor, regressor, etc.). The OLS coefficient
estimates are calculated as usual:</p>
<div class="math notranslate nohighlight">
\[\hat{\beta} = (X'X)^{-1} X'y\]</div>
<p>where <span class="math notranslate nohighlight">\(y\)</span> is an <span class="math notranslate nohighlight">\(N \times 1\)</span> column of data on lottery wagers per
capita (<em>Lottery</em>). <span class="math notranslate nohighlight">\(X\)</span> is <span class="math notranslate nohighlight">\(N \times 7\)</span> with an intercept, the
<em>Literacy</em> and <em>Wealth</em> variables, and 4 region binary variables.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">patsy</span></code> module provides a convenient function to prepare design matrices
using <code class="docutils literal notranslate"><span class="pre">R</span></code>-like formulas. You can find more information <a class="reference external" href="https://patsy.readthedocs.io/en/latest/">here</a>.</p>
<p>We use <code class="docutils literal notranslate"><span class="pre">patsy</span></code>’s <code class="docutils literal notranslate"><span class="pre">dmatrices</span></code> function to create design matrices:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [10]: </span><span class="n">y</span><span class="p">,</span> <span class="n">X</span> <span class="o">=</span> <span class="n">dmatrices</span><span class="p">(</span><span class="s1">'Lottery ~ Literacy + Wealth + Region'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">return_type</span><span class="o">=</span><span class="s1">'dataframe'</span><span class="p">)</span>
</pre></div>
</div>
<p>The resulting matrices/data frames look like this:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="n">y</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
<span class="gh">Out[11]: </span><span class="go"></span>
<span class="go">   Lottery</span>
<span class="go">0     41.0</span>
<span class="go">1     38.0</span>
<span class="go">2     66.0</span>

<span class="gp">In [12]: </span><span class="n">X</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
<span class="gh">Out[12]: </span><span class="go"></span>
<span class="go">   Intercept  Region[T.E]  Region[T.N]  ...  Region[T.W]  Literacy  Wealth</span>
<span class="go">0        1.0          1.0          0.0  ...          0.0      37.0    73.0</span>
<span class="go">1        1.0          0.0          1.0  ...          0.0      51.0    22.0</span>
<span class="go">2        1.0          0.0          0.0  ...          0.0      13.0    61.0</span>

<span class="go">[3 rows x 7 columns]</span>
</pre></div>
</div>
<p>Notice that <code class="docutils literal notranslate"><span class="pre">dmatrices</span></code> has</p>
<ul class="simple">
<li><p>split the categorical <em>Region</em> variable into a set of indicator variables.</p></li>
<li><p>added a constant to the exogenous regressors matrix.</p></li>
<li><p>returned <code class="docutils literal notranslate"><span class="pre">pandas</span></code> DataFrames instead of simple numpy arrays. This is useful because DataFrames allow <code class="docutils literal notranslate"><span class="pre">statsmodels</span></code> to carry-over meta-data (e.g. variable names) when reporting results.</p></li>
</ul>
<p>The above behavior can of course be altered. See the <a class="reference external" href="https://patsy.readthedocs.io/en/latest/">patsy doc pages</a>.</p>


<h2 id="model-fit-and-summary">Model fit and summary<a class="headerlink" href="#model-fit-and-summary" title="Permalink to this headline">¶</a></h2>
<p>Fitting a model in <code class="docutils literal notranslate"><span class="pre">statsmodels</span></code> typically involves 3 easy steps:</p>
<ol class="arabic simple">
<li><p>Use the model class to describe the model</p></li>
<li><p>Fit the model using a class method</p></li>
<li><p>Inspect the results using a summary method</p></li>
</ol>
<p>For OLS, this is achieved by:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [13]: </span><span class="n">mod</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span>    <span class="c1"># Describe model</span>

<span class="gp">In [14]: </span><span class="n">res</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>       <span class="c1"># Fit model</span>

<span class="gp">In [15]: </span><span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>   <span class="c1"># Summarize model</span>
<span class="go">                            OLS Regression Results                            </span>
<span class="go">==============================================================================</span>
<span class="go">Dep. Variable:                Lottery   R-squared:                       0.338</span>
<span class="go">Model:                            OLS   Adj. R-squared:                  0.287</span>
<span class="go">Method:                 Least Squares   F-statistic:                     6.636</span>
<span class="go">Date:                Fri, 21 Feb 2020   Prob (F-statistic):           1.07e-05</span>
<span class="go">Time:                        13:59:12   Log-Likelihood:                -375.30</span>
<span class="go">No. Observations:                  85   AIC:                             764.6</span>
<span class="go">Df Residuals:                      78   BIC:                             781.7</span>
<span class="go">Df Model:                           6                                         </span>
<span class="go">Covariance Type:            nonrobust                                         </span>
<span class="go">===============================================================================</span>
<span class="go">                  coef    std err          t      P&gt;|t|      [0.025      0.975]</span>
<span class="gt">-------------------------------------------------------------------------------</span>
<span class="n">Intercept</span>      <span class="mf">38.6517</span>      <span class="mf">9.456</span>      <span class="mf">4.087</span>      <span class="mf">0.000</span>      <span class="mf">19.826</span>      <span class="mf">57.478</span>
<span class="n">Region</span><span class="p">[</span><span class="n">T</span><span class="o">.</span><span class="n">E</span><span class="p">]</span>   <span class="o">-</span><span class="mf">15.4278</span>      <span class="mf">9.727</span>     <span class="o">-</span><span class="mf">1.586</span>      <span class="mf">0.117</span>     <span class="o">-</span><span class="mf">34.793</span>       <span class="mf">3.938</span>
<span class="n">Region</span><span class="p">[</span><span class="n">T</span><span class="o">.</span><span class="n">N</span><span class="p">]</span>   <span class="o">-</span><span class="mf">10.0170</span>      <span class="mf">9.260</span>     <span class="o">-</span><span class="mf">1.082</span>      <span class="mf">0.283</span>     <span class="o">-</span><span class="mf">28.453</span>       <span class="mf">8.419</span>
<span class="n">Region</span><span class="p">[</span><span class="n">T</span><span class="o">.</span><span class="n">S</span><span class="p">]</span>    <span class="o">-</span><span class="mf">4.5483</span>      <span class="mf">7.279</span>     <span class="o">-</span><span class="mf">0.625</span>      <span class="mf">0.534</span>     <span class="o">-</span><span class="mf">19.039</span>       <span class="mf">9.943</span>
<span class="n">Region</span><span class="p">[</span><span class="n">T</span><span class="o">.</span><span class="n">W</span><span class="p">]</span>   <span class="o">-</span><span class="mf">10.0913</span>      <span class="mf">7.196</span>     <span class="o">-</span><span class="mf">1.402</span>      <span class="mf">0.165</span>     <span class="o">-</span><span class="mf">24.418</span>       <span class="mf">4.235</span>
<span class="n">Literacy</span>       <span class="o">-</span><span class="mf">0.1858</span>      <span class="mf">0.210</span>     <span class="o">-</span><span class="mf">0.886</span>      <span class="mf">0.378</span>      <span class="o">-</span><span class="mf">0.603</span>       <span class="mf">0.232</span>
<span class="n">Wealth</span>          <span class="mf">0.4515</span>      <span class="mf">0.103</span>      <span class="mf">4.390</span>      <span class="mf">0.000</span>       <span class="mf">0.247</span>       <span class="mf">0.656</span>
<span class="o">==============================================================================</span>
<span class="ne">Omnibus</span>:                        3.049   Durbin-Watson:                   1.785
<span class="n">Prob</span><span class="p">(</span><span class="n">Omnibus</span><span class="p">):</span>                  <span class="mf">0.218</span>   <span class="n">Jarque</span><span class="o">-</span><span class="n">Bera</span> <span class="p">(</span><span class="n">JB</span><span class="p">):</span>                <span class="mf">2.694</span>
<span class="ne">Skew</span>:                          -0.340   Prob(JB):                        0.260
<span class="ne">Kurtosis</span>:                       2.454   Cond. No.                         371.
<span class="o">==============================================================================</span>

<span class="ne">Warnings</span>:
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="n">Standard</span> <span class="n">Errors</span> <span class="n">assume</span> <span class="n">that</span> <span class="n">the</span> <span class="n">covariance</span> <span class="n">matrix</span> <span class="n">of</span> <span class="n">the</span> <span class="n">errors</span> <span class="ow">is</span> <span class="n">correctly</span> <span class="n">specified</span><span class="o">.</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">res</span></code> object has many useful attributes. For example, we can extract
parameter estimates and r-squared by typing:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [16]: </span><span class="n">res</span><span class="o">.</span><span class="n">params</span>
<span class="gh">Out[16]: </span><span class="go"></span>
<span class="go">Intercept      38.651655</span>
<span class="go">Region[T.E]   -15.427785</span>
<span class="go">Region[T.N]   -10.016961</span>
<span class="go">Region[T.S]    -4.548257</span>
<span class="go">Region[T.W]   -10.091276</span>
<span class="go">Literacy       -0.185819</span>
<span class="go">Wealth          0.451475</span>
<span class="go">dtype: float64</span>

<span class="gp">In [17]: </span><span class="n">res</span><span class="o">.</span><span class="n">rsquared</span>
<span class="gh">Out[17]: </span><span class="go">0.337950869192882</span>
</pre></div>
</div>
<p>Type <code class="docutils literal notranslate"><span class="pre">dir(res)</span></code> for a full list of attributes.</p>
<p>For more information and examples, see the <a class="reference external" href="regression.html">Regression doc page</a></p>


<h2 id="diagnostics-and-specification-tests">Diagnostics and specification tests<a class="headerlink" href="#diagnostics-and-specification-tests" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">statsmodels</span></code> allows you to conduct a range of useful <a class="reference external" href="stats.html#residual-diagnostics-and-specification-tests">regression diagnostics
and specification tests</a>.  For instance,
apply the Rainbow test for linearity (the null hypothesis is that the
relationship is properly modelled as linear):</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [18]: </span><span class="n">sm</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">linear_rainbow</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="gh">Out[18]: </span><span class="go">(0.8472339976156913, 0.6997965543621643)</span>
</pre></div>
</div>
<p>Admittedly, the output produced above is not very verbose, but we know from
reading the <a class="reference external" href="generated/statsmodels.stats.diagnostic.linear_rainbow.html">docstring</a>
(also, <code class="docutils literal notranslate"><span class="pre">print(sm.stats.linear_rainbow.__doc__)</span></code>) that the
first number is an F-statistic and that the second is the p-value.</p>
<p><code class="docutils literal notranslate"><span class="pre">statsmodels</span></code> also provides graphics functions. For example, we can draw a
plot of partial regression for a set of regressors by:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [19]: </span><span class="n">sm</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">plot_partregress</span><span class="p">(</span><span class="s1">'Lottery'</span><span class="p">,</span> <span class="s1">'Wealth'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'Region'</span><span class="p">,</span> <span class="s1">'Literacy'</span><span class="p">],</span>
<span class="gp">   ....: </span>                             <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">obs_labels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">   ....: </span>
<span class="gh">Out[19]: </span><span class="go">&lt;Figure size 640x480 with 1 Axes&gt;</span>
</pre></div>
</div>
<img alt="_images/gettingstarted_0.png" src="_images/gettingstarted_0.png"/>


<h2 id="documentation">Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>Documentation can be accessed from an IPython session
using <a class="reference internal" href="generated/statsmodels.tools.web.webdoc.html#statsmodels.tools.web.webdoc" title="statsmodels.tools.web.webdoc"><code class="xref py py-func docutils literal notranslate"><span class="pre">webdoc</span></code></a>.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%"/>
<col style="width: 90%"/>
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/statsmodels.tools.web.webdoc.html#statsmodels.tools.web.webdoc" title="statsmodels.tools.web.webdoc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">webdoc</span></code></a></p></td>
<td><p>Opens a browser and displays online documentation</p></td>
</tr>
</tbody>
</table>


<h2 id="more">More<a class="headerlink" href="#more" title="Permalink to this headline">¶</a></h2>
<p>Congratulations! You’re ready to move on to other topics in the
<a class="reference external" href="index.html#table-of-contents">Table of Contents</a></p>




          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="install.html" title="Material"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Installing statsmodels </span>
              </div>
            </a>
          
          
            <a href="generated/statsmodels.tools.web.webdoc.html" title="Admonition"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> statsmodels.tools.web.webdoc </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2009-2019, Josef Perktold, Skipper Seabold, Jonathan Taylor, statsmodels-developers.
              
          </div>
            Last updated on
              Feb 21, 2020.
            <br/>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 2.4.2.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>