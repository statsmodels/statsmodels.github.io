

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../../../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../../../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../../../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../../../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../../../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>Autoregressions &#8212; statsmodels</title>
  <link rel="icon" type="image/png" sizes="32x32" href="../../../_static/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../../../_static/icons/favicon-16x16.png">
  <link rel="manifest" href="../../../_static/icons/site.webmanifest">
  <link rel="mask-icon" href="../../../_static/icons/safari-pinned-tab.svg" color="#919191">
  <meta name="msapplication-TileColor" content="#2b5797">
  <meta name="msapplication-config" content="../../../_static/icons/browserconfig.xml">
  <link rel="stylesheet" href="../../../_static/stylesheets/examples.css">
    <link rel="stylesheet" href="../../../_static/material.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../../../about.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Autoregressive Moving Average (ARMA): Sunspots data" href="tsa_arma_0.html" />
    <link rel="prev" title="Interactions and ANOVA" href="interactions_anova.html" />
  
   
  
  <script src="../../../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../../../_static/versions.json",
        target_loc = "../../../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>


  </head>
  <body dir=ltr
        data-md-color-primary=indigo data-md-color-accent=blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#examples/notebooks/generated/autoregressions" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../../index.html" title="statsmodels"
           class="md-header-nav__button md-logo">
          
              <img src="../../../_static/statsmodels-logo-v2-bw.svg" height="26"
                   alt="statsmodels logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">statsmodels v0.11.1</span>
          <span class="md-header-nav__topic"> Autoregressions </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../../../search.html" method="GET" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/statsmodels/statsmodels" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    statsmodels
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../../index.html" class="md-tabs__link">Examples</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../index.html" title="statsmodels" class="md-nav__button md-logo">
      
        <img src="../../../_static/statsmodels-logo-v2-bw.svg" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../../../index.html"
       title="statsmodels">statsmodels v0.11.1</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/statsmodels/statsmodels" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    statsmodels
  </div>
</a>
    </div>
  
  

  
  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <a href="../../../install.html" class="md-nav__link">Installing statsmodels</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../../gettingstarted.html" class="md-nav__link">Getting started</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../../user-guide.html" class="md-nav__link">User Guide</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../index.html" class="md-nav__link">Examples</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
      <a href="../../index.html#linear-regression-models" class="md-nav__link">Linear Regression Models</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../index.html#plotting" class="md-nav__link">Plotting</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../index.html#discrete-choice-models" class="md-nav__link">Discrete Choice Models</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../index.html#nonparametric-statistics" class="md-nav__link">Nonparametric Statistics</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../index.html#generalized-linear-models" class="md-nav__link">Generalized Linear Models</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../index.html#robust-regression" class="md-nav__link">Robust Regression</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../index.html#generalized-estimating-equations" class="md-nav__link">Generalized Estimating Equations</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../index.html#statistics" class="md-nav__link">Statistics</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../index.html#time-series-analysis" class="md-nav__link">Time Series Analysis</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Autoregressions </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Autoregressions</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#examples-notebooks-generated-autoregressions--page-root" class="md-nav__link">Autoregressions</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#Seasonal-Dummies" class="md-nav__link">Seasonal Dummies</a>
        </li>
        <li class="md-nav__item"><a href="#Seasonal-Dynamics" class="md-nav__link">Seasonal Dynamics</a>
        </li>
        <li class="md-nav__item"><a href="#Industrial-Production" class="md-nav__link">Industrial Production</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#Forecasting" class="md-nav__link">Forecasting</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#Comparing-to-SARIMAX" class="md-nav__link">Comparing to SARIMAX</a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="../../../_sources/examples/notebooks/generated/autoregressions.ipynb.txt">Show Source</a> </li>

  </ul>
</nav>
    </li>
    <li class="md-nav__item">
    
      <a href="#Forecasting" class="md-nav__link">Forecasting</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="tsa_arma_0.html" class="md-nav__link">Autoregressive Moving Average (ARMA): Sunspots data</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="tsa_arma_1.html" class="md-nav__link">Autoregressive Moving Average (ARMA): Artificial data</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="tsa_filters.html" class="md-nav__link">Time Series Filters</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="markov_regression.html" class="md-nav__link">Markov switching dynamic regression models</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="markov_autoregression.html" class="md-nav__link">Markov switching autoregression models</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="exponential_smoothing.html" class="md-nav__link">Tutorial</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="exponential_smoothing.html#Exponential-smoothing" class="md-nav__link">Exponential smoothing</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="stl_decomposition.html" class="md-nav__link">Seasonal-Trend decomposition using LOESS (STL)</a>
      
    </li></ul>
    </li>
    <li class="md-nav__item">
    
      <a href="../../index.html#state-space-models" class="md-nav__link">State space models</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../index.html#state-space-models-technical-notes" class="md-nav__link">State space models - Technical notes</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../index.html#multivariate-methods" class="md-nav__link">Multivariate Methods</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../index.html#user-notes" class="md-nav__link">User Notes</a>
      
    </li></ul>
    </li>
    <li class="md-nav__item">
    
      <a href="../../../api.html" class="md-nav__link">API Reference</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../../about.html" class="md-nav__link">About statsmodels</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../../dev/index.html" class="md-nav__link">Developer Page</a>
      
    </li>
    <li class="md-nav__item">
    
      <a href="../../../release/index.html" class="md-nav__link">Release Notes</a>
      
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#examples-notebooks-generated-autoregressions--page-root" class="md-nav__link">Autoregressions</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#Seasonal-Dummies" class="md-nav__link">Seasonal Dummies</a>
        </li>
        <li class="md-nav__item"><a href="#Seasonal-Dynamics" class="md-nav__link">Seasonal Dynamics</a>
        </li>
        <li class="md-nav__item"><a href="#Industrial-Production" class="md-nav__link">Industrial Production</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#Forecasting" class="md-nav__link">Forecasting</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#Comparing-to-SARIMAX" class="md-nav__link">Comparing to SARIMAX</a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="../../../_sources/examples/notebooks/generated/autoregressions.ipynb.txt">Show Source</a> </li>

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    min-width: 5.5ex;
    padding-top: 0.3rem;
    padding-right: 0.3rem;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 0.3rem;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>

<h1 id="examples-notebooks-generated-autoregressions--page-root">Autoregressions<a class="headerlink" href="#examples-notebooks-generated-autoregressions--page-root" title="Permalink to this headline">¶</a></h1>
<p>This notebook introduces autoregression modeling using the <code class="docutils literal notranslate"><span class="pre">AutoReg</span></code> model. It also covers aspects of <code class="docutils literal notranslate"><span class="pre">ar_select_order</span></code> assists in selecting models that minimize an information criteria such as the AIC. An autoregressive model has dynamics given by</p>
<div class="math notranslate nohighlight">
\[y_t = \delta + \phi_1 y_{t-1} + \ldots + \phi_p y_{t-p} + \epsilon_t.\]</div>
<p><code class="docutils literal notranslate"><span class="pre">AutoReg</span></code> also permits models with:</p>
<ul class="simple">
<li><p>Deterministic terms (<code class="docutils literal notranslate"><span class="pre">trend</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n</span></code>: No deterministic term</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code>: Constant (default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ct</span></code>: Constant and time trend</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">t</span></code>: Time trend only</p></li>
<li><p>Seasonal dummies (<code class="docutils literal notranslate"><span class="pre">seasonal</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">True</span></code> includes <span class="math notranslate nohighlight">\(s-1\)</span> dummies where <span class="math notranslate nohighlight">\(s\)</span> is the period of the time series (e.g., 12 for monthly)</p></li>
<li><p>Exogenous variables (<code class="docutils literal notranslate"><span class="pre">exog</span></code>)</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> or <code class="docutils literal notranslate"><span class="pre">array</span></code> of exogenous variables to include in the model</p></li>
<li><p>Omission of selected lags (<code class="docutils literal notranslate"><span class="pre">lags</span></code>)</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">lags</span></code> is an iterable of integers, then only these are included in the model.</p></li>
</ul>
<p>The complete specification is</p>
<div class="math notranslate nohighlight">
\[y_t = \delta_0 + \delta_1 t + \phi_1 y_{t-1} + \ldots + \phi_p y_{t-p} + \sum_{i=1}^{s-1} \gamma_i d_i + \sum_{j=1}^{m} \kappa_j x_{t,j} + \epsilon_t.\]</div>
<p>where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(d_i\)</span> is a seasonal dummy that is 1 if <span class="math notranslate nohighlight">\(mod(t, period) = i\)</span>. Period 0 is excluded if the model contains a constant (<code class="docutils literal notranslate"><span class="pre">c</span></code> is in <code class="docutils literal notranslate"><span class="pre">trend</span></code>).</p></li>
<li><p><span class="math notranslate nohighlight">\(t\)</span> is a time trend (<span class="math notranslate nohighlight">\(1,2,\ldots\)</span>) that starts with 1 in the first observation.</p></li>
<li><p><span class="math notranslate nohighlight">\(x_{t,j}\)</span> are exogenous regressors. <strong>Note</strong> these are time-aligned to the left-hand-side variable when defining a model.</p></li>
<li><p><span class="math notranslate nohighlight">\(\epsilon_t\)</span> is assumed to be a white noise process.</p></li>
</ul>
<p>This first cell imports standard packages and sets plats to appear inline.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">pandas_datareader</span> <span class="k">as</span> <span class="nn">pdr</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">from</span> <span class="nn">statsmodels.tsa.ar_model</span> <span class="kn">import</span> <span class="n">AutoReg</span><span class="p">,</span> <span class="n">ar_select_order</span>
<span class="kn">from</span> <span class="nn">statsmodels.tsa.api</span> <span class="kn">import</span> <span class="n">acf</span><span class="p">,</span> <span class="n">pacf</span><span class="p">,</span> <span class="n">graphics</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/home/travis/miniconda/envs/statsmodels-test/lib/python3.7/site-packages/pandas_datareader/compat/__init__.py:7: FutureWarning: pandas.util.testing is deprecated. Use the functions in the public API at pandas.testing instead.
  from pandas.util.testing import assert_frame_equal
</pre></div></div>
</div>
<p>This cell sets the plotting style, registers pandas date converters for matplotlib, and sets the default figure size.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s1">'darkgrid'</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">plotting</span><span class="o">.</span><span class="n">register_matplotlib_converters</span><span class="p">()</span>
<span class="c1"># Default figure size</span>
<span class="n">sns</span><span class="o">.</span><span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">'figure'</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>The first set of examples uses the month-over-month growth rate in U.S. Housing starts that has not been seasonally adjusted. The seasonality is evident by the regular pattern of peaks and troughs. We set the frequency for the time series to “MS” (month-start) to avoid warnings when using <code class="docutils literal notranslate"><span class="pre">AutoReg</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data</span> <span class="o">=</span> <span class="n">pdr</span><span class="o">.</span><span class="n">get_data_fred</span><span class="p">(</span><span class="s1">'HOUSTNSA'</span><span class="p">,</span> <span class="s1">'1959-01-01'</span><span class="p">,</span> <span class="s1">'2019-06-01'</span><span class="p">)</span>
<span class="n">housing</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">HOUSTNSA</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="c1"># Scale by 100 to get percentages</span>
<span class="n">housing</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">housing</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">'MS'</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">housing</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_notebooks_generated_autoregressions_6_0.png" src="../../../_images/examples_notebooks_generated_autoregressions_6_0.png"/>
</div>
</div>
<p>We can start with an AR(3). While this is not a good model for this data, it demonstrates the basic use of the API.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">mod</span> <span class="o">=</span> <span class="n">AutoReg</span><span class="p">(</span><span class="n">housing</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">res</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table>
<caption>AutoReg Model Results</caption>
<tr>
<th>Dep. Variable:</th> <td>HOUSTNSA</td> <th>  No. Observations:  </th> <td>725</td>
</tr>
<tr>
<th>Model:</th> <td>AutoReg(3)</td> <th>  Log Likelihood     </th> <td>-2993.442</td>
</tr>
<tr>
<th>Method:</th> <td>Conditional MLE</td> <th>  S.D. of innovations</th> <td>15.289</td>
</tr>
<tr>
<th>Date:</th> <td>Fri, 21 Feb 2020</td> <th>  AIC                </th> <td>5.468</td>
</tr>
<tr>
<th>Time:</th> <td>13:53:22</td> <th>  BIC                </th> <td>5.500</td>
</tr>
<tr>
<th>Sample:</th> <td>05-01-1959</td> <th>  HQIC               </th> <td>5.480</td>
</tr>
<tr>
<th></th> <td>- 06-01-2019</td> <th> </th> <td> </td>
</tr>
</table>
<table>
<tr>
<td></td> <th>coef</th> <th>std err</th> <th>z</th> <th>P&gt;|z|</th> <th>[0.025</th> <th>0.975]</th>
</tr>
<tr>
<th>intercept</th> <td>    1.1228</td> <td>    0.573</td> <td>    1.961</td> <td> 0.050</td> <td>    0.000</td> <td>    2.245</td>
</tr>
<tr>
<th>HOUSTNSA.L1</th> <td>    0.1910</td> <td>    0.036</td> <td>    5.235</td> <td> 0.000</td> <td>    0.120</td> <td>    0.263</td>
</tr>
<tr>
<th>HOUSTNSA.L2</th> <td>    0.0058</td> <td>    0.037</td> <td>    0.155</td> <td> 0.877</td> <td>   -0.067</td> <td>    0.079</td>
</tr>
<tr>
<th>HOUSTNSA.L3</th> <td>   -0.1939</td> <td>    0.036</td> <td>   -5.319</td> <td> 0.000</td> <td>   -0.265</td> <td>   -0.122</td>
</tr>
</table>
<table>
<caption>Roots</caption>
<tr>
<td></td> <th>            Real</th> <th>         Imaginary</th> <th>         Modulus</th> <th>        Frequency</th>
</tr>
<tr>
<th>AR.1</th> <td>           0.9680</td> <td>          -1.3298j</td> <td>           1.6448</td> <td>          -0.1499</td>
</tr>
<tr>
<th>AR.2</th> <td>           0.9680</td> <td>          +1.3298j</td> <td>           1.6448</td> <td>           0.1499</td>
</tr>
<tr>
<th>AR.3</th> <td>          -1.9064</td> <td>          -0.0000j</td> <td>           1.9064</td> <td>          -0.5000</td>
</tr>
</table></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AutoReg</span></code> supports the same covariance estimators as <code class="docutils literal notranslate"><span class="pre">OLS</span></code>. Below, we use <code class="docutils literal notranslate"><span class="pre">cov_type="HC0"</span></code>, which is White’s covariance estimator. While the parameter estimates are the same, all of the quantities that depend on the standard error change.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">res</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">cov_type</span><span class="o">=</span><span class="s2">"HC0"</span><span class="p">)</span>
<span class="n">res</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table>
<caption>AutoReg Model Results</caption>
<tr>
<th>Dep. Variable:</th> <td>HOUSTNSA</td> <th>  No. Observations:  </th> <td>725</td>
</tr>
<tr>
<th>Model:</th> <td>AutoReg(3)</td> <th>  Log Likelihood     </th> <td>-2993.442</td>
</tr>
<tr>
<th>Method:</th> <td>Conditional MLE</td> <th>  S.D. of innovations</th> <td>15.289</td>
</tr>
<tr>
<th>Date:</th> <td>Fri, 21 Feb 2020</td> <th>  AIC                </th> <td>5.468</td>
</tr>
<tr>
<th>Time:</th> <td>13:53:22</td> <th>  BIC                </th> <td>5.500</td>
</tr>
<tr>
<th>Sample:</th> <td>05-01-1959</td> <th>  HQIC               </th> <td>5.480</td>
</tr>
<tr>
<th></th> <td>- 06-01-2019</td> <th> </th> <td> </td>
</tr>
</table>
<table>
<tr>
<td></td> <th>coef</th> <th>std err</th> <th>z</th> <th>P&gt;|z|</th> <th>[0.025</th> <th>0.975]</th>
</tr>
<tr>
<th>intercept</th> <td>    1.1228</td> <td>    0.601</td> <td>    1.869</td> <td> 0.062</td> <td>   -0.055</td> <td>    2.300</td>
</tr>
<tr>
<th>HOUSTNSA.L1</th> <td>    0.1910</td> <td>    0.035</td> <td>    5.499</td> <td> 0.000</td> <td>    0.123</td> <td>    0.259</td>
</tr>
<tr>
<th>HOUSTNSA.L2</th> <td>    0.0058</td> <td>    0.039</td> <td>    0.150</td> <td> 0.881</td> <td>   -0.070</td> <td>    0.081</td>
</tr>
<tr>
<th>HOUSTNSA.L3</th> <td>   -0.1939</td> <td>    0.036</td> <td>   -5.448</td> <td> 0.000</td> <td>   -0.264</td> <td>   -0.124</td>
</tr>
</table>
<table>
<caption>Roots</caption>
<tr>
<td></td> <th>            Real</th> <th>         Imaginary</th> <th>         Modulus</th> <th>        Frequency</th>
</tr>
<tr>
<th>AR.1</th> <td>           0.9680</td> <td>          -1.3298j</td> <td>           1.6448</td> <td>          -0.1499</td>
</tr>
<tr>
<th>AR.2</th> <td>           0.9680</td> <td>          +1.3298j</td> <td>           1.6448</td> <td>           0.1499</td>
</tr>
<tr>
<th>AR.3</th> <td>          -1.9064</td> <td>          -0.0000j</td> <td>           1.9064</td> <td>          -0.5000</td>
</tr>
</table></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sel</span> <span class="o">=</span> <span class="n">ar_select_order</span><span class="p">(</span><span class="n">housing</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
<span class="n">sel</span><span class="o">.</span><span class="n">ar_lags</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">sel</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">res</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table>
<caption>AutoReg Model Results</caption>
<tr>
<th>Dep. Variable:</th> <td>HOUSTNSA</td> <th>  No. Observations:  </th> <td>725</td>
</tr>
<tr>
<th>Model:</th> <td>AutoReg(13)</td> <th>  Log Likelihood     </th> <td>-2676.157</td>
</tr>
<tr>
<th>Method:</th> <td>Conditional MLE</td> <th>  S.D. of innovations</th> <td>10.378</td>
</tr>
<tr>
<th>Date:</th> <td>Fri, 21 Feb 2020</td> <th>  AIC                </th> <td>4.722</td>
</tr>
<tr>
<th>Time:</th> <td>13:53:22</td> <th>  BIC                </th> <td>4.818</td>
</tr>
<tr>
<th>Sample:</th> <td>03-01-1960</td> <th>  HQIC               </th> <td>4.759</td>
</tr>
<tr>
<th></th> <td>- 06-01-2019</td> <th> </th> <td> </td>
</tr>
</table>
<table>
<tr>
<td></td> <th>coef</th> <th>std err</th> <th>z</th> <th>P&gt;|z|</th> <th>[0.025</th> <th>0.975]</th>
</tr>
<tr>
<th>intercept</th> <td>    1.3615</td> <td>    0.458</td> <td>    2.970</td> <td> 0.003</td> <td>    0.463</td> <td>    2.260</td>
</tr>
<tr>
<th>HOUSTNSA.L1</th> <td>   -0.2900</td> <td>    0.036</td> <td>   -8.161</td> <td> 0.000</td> <td>   -0.360</td> <td>   -0.220</td>
</tr>
<tr>
<th>HOUSTNSA.L2</th> <td>   -0.0828</td> <td>    0.031</td> <td>   -2.652</td> <td> 0.008</td> <td>   -0.144</td> <td>   -0.022</td>
</tr>
<tr>
<th>HOUSTNSA.L3</th> <td>   -0.0654</td> <td>    0.031</td> <td>   -2.106</td> <td> 0.035</td> <td>   -0.126</td> <td>   -0.005</td>
</tr>
<tr>
<th>HOUSTNSA.L4</th> <td>   -0.1596</td> <td>    0.031</td> <td>   -5.166</td> <td> 0.000</td> <td>   -0.220</td> <td>   -0.099</td>
</tr>
<tr>
<th>HOUSTNSA.L5</th> <td>   -0.0434</td> <td>    0.031</td> <td>   -1.387</td> <td> 0.165</td> <td>   -0.105</td> <td>    0.018</td>
</tr>
<tr>
<th>HOUSTNSA.L6</th> <td>   -0.0884</td> <td>    0.031</td> <td>   -2.867</td> <td> 0.004</td> <td>   -0.149</td> <td>   -0.028</td>
</tr>
<tr>
<th>HOUSTNSA.L7</th> <td>   -0.0556</td> <td>    0.031</td> <td>   -1.797</td> <td> 0.072</td> <td>   -0.116</td> <td>    0.005</td>
</tr>
<tr>
<th>HOUSTNSA.L8</th> <td>   -0.1482</td> <td>    0.031</td> <td>   -4.803</td> <td> 0.000</td> <td>   -0.209</td> <td>   -0.088</td>
</tr>
<tr>
<th>HOUSTNSA.L9</th> <td>   -0.0926</td> <td>    0.031</td> <td>   -2.960</td> <td> 0.003</td> <td>   -0.154</td> <td>   -0.031</td>
</tr>
<tr>
<th>HOUSTNSA.L10</th> <td>   -0.1133</td> <td>    0.031</td> <td>   -3.665</td> <td> 0.000</td> <td>   -0.174</td> <td>   -0.053</td>
</tr>
<tr>
<th>HOUSTNSA.L11</th> <td>    0.1151</td> <td>    0.031</td> <td>    3.699</td> <td> 0.000</td> <td>    0.054</td> <td>    0.176</td>
</tr>
<tr>
<th>HOUSTNSA.L12</th> <td>    0.5352</td> <td>    0.031</td> <td>   17.133</td> <td> 0.000</td> <td>    0.474</td> <td>    0.596</td>
</tr>
<tr>
<th>HOUSTNSA.L13</th> <td>    0.3178</td> <td>    0.036</td> <td>    8.937</td> <td> 0.000</td> <td>    0.248</td> <td>    0.388</td>
</tr>
</table>
<table>
<caption>Roots</caption>
<tr>
<td></td> <th>            Real</th> <th>         Imaginary</th> <th>         Modulus</th> <th>        Frequency</th>
</tr>
<tr>
<th>AR.1</th> <td>           1.0913</td> <td>          -0.0000j</td> <td>           1.0913</td> <td>          -0.0000</td>
</tr>
<tr>
<th>AR.2</th> <td>           0.8743</td> <td>          -0.5018j</td> <td>           1.0080</td> <td>          -0.0829</td>
</tr>
<tr>
<th>AR.3</th> <td>           0.8743</td> <td>          +0.5018j</td> <td>           1.0080</td> <td>           0.0829</td>
</tr>
<tr>
<th>AR.4</th> <td>           0.5041</td> <td>          -0.8765j</td> <td>           1.0111</td> <td>          -0.1669</td>
</tr>
<tr>
<th>AR.5</th> <td>           0.5041</td> <td>          +0.8765j</td> <td>           1.0111</td> <td>           0.1669</td>
</tr>
<tr>
<th>AR.6</th> <td>           0.0056</td> <td>          -1.0530j</td> <td>           1.0530</td> <td>          -0.2491</td>
</tr>
<tr>
<th>AR.7</th> <td>           0.0056</td> <td>          +1.0530j</td> <td>           1.0530</td> <td>           0.2491</td>
</tr>
<tr>
<th>AR.8</th> <td>          -0.5263</td> <td>          -0.9335j</td> <td>           1.0716</td> <td>          -0.3317</td>
</tr>
<tr>
<th>AR.9</th> <td>          -0.5263</td> <td>          +0.9335j</td> <td>           1.0716</td> <td>           0.3317</td>
</tr>
<tr>
<th>AR.10</th> <td>          -0.9525</td> <td>          -0.5880j</td> <td>           1.1194</td> <td>          -0.4120</td>
</tr>
<tr>
<th>AR.11</th> <td>          -0.9525</td> <td>          +0.5880j</td> <td>           1.1194</td> <td>           0.4120</td>
</tr>
<tr>
<th>AR.12</th> <td>          -1.2928</td> <td>          -0.2608j</td> <td>           1.3189</td> <td>          -0.4683</td>
</tr>
<tr>
<th>AR.13</th> <td>          -1.2928</td> <td>          +0.2608j</td> <td>           1.3189</td> <td>           0.4683</td>
</tr>
</table></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">plot_predict</span></code> visualizes forecasts. Here we produce a large number of forecasts which show the string seasonality captured by the model.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">plot_predict</span><span class="p">(</span><span class="mi">720</span><span class="p">,</span> <span class="mi">840</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_notebooks_generated_autoregressions_13_0.png" src="../../../_images/examples_notebooks_generated_autoregressions_13_0.png"/>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">plot_diagnositcs</span></code> indicates that the model captures the key features in the data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">9</span><span class="p">))</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">plot_diagnostics</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">lags</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_notebooks_generated_autoregressions_15_0.png" src="../../../_images/examples_notebooks_generated_autoregressions_15_0.png"/>
</div>
</div>

<h2 id="Seasonal-Dummies">Seasonal Dummies<a class="headerlink" href="#Seasonal-Dummies" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">AutoReg</span></code> supports seasonal dummies which are an alternative way to model seasonality. Including the dummies shortens the dynamics to only an AR(2).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sel</span> <span class="o">=</span> <span class="n">ar_select_order</span><span class="p">(</span><span class="n">housing</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="n">seasonal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">sel</span><span class="o">.</span><span class="n">ar_lags</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">sel</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">res</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table>
<caption>AutoReg Model Results</caption>
<tr>
<th>Dep. Variable:</th> <td>HOUSTNSA</td> <th>  No. Observations:  </th> <td>725</td>
</tr>
<tr>
<th>Model:</th> <td>Seas. AutoReg(2)</td> <th>  Log Likelihood     </th> <td>-2652.556</td>
</tr>
<tr>
<th>Method:</th> <td>Conditional MLE</td> <th>  S.D. of innovations</th> <td>9.487</td>
</tr>
<tr>
<th>Date:</th> <td>Fri, 21 Feb 2020</td> <th>  AIC                </th> <td>4.541</td>
</tr>
<tr>
<th>Time:</th> <td>13:53:24</td> <th>  BIC                </th> <td>4.636</td>
</tr>
<tr>
<th>Sample:</th> <td>04-01-1959</td> <th>  HQIC               </th> <td>4.578</td>
</tr>
<tr>
<th></th> <td>- 06-01-2019</td> <th> </th> <td> </td>
</tr>
</table>
<table>
<tr>
<td></td> <th>coef</th> <th>std err</th> <th>z</th> <th>P&gt;|z|</th> <th>[0.025</th> <th>0.975]</th>
</tr>
<tr>
<th>intercept</th> <td>    1.2726</td> <td>    1.373</td> <td>    0.927</td> <td> 0.354</td> <td>   -1.418</td> <td>    3.963</td>
</tr>
<tr>
<th>seasonal.1</th> <td>   32.6477</td> <td>    1.824</td> <td>   17.901</td> <td> 0.000</td> <td>   29.073</td> <td>   36.222</td>
</tr>
<tr>
<th>seasonal.2</th> <td>   23.0685</td> <td>    2.435</td> <td>    9.472</td> <td> 0.000</td> <td>   18.295</td> <td>   27.842</td>
</tr>
<tr>
<th>seasonal.3</th> <td>   10.7267</td> <td>    2.693</td> <td>    3.983</td> <td> 0.000</td> <td>    5.449</td> <td>   16.005</td>
</tr>
<tr>
<th>seasonal.4</th> <td>    1.6792</td> <td>    2.100</td> <td>    0.799</td> <td> 0.424</td> <td>   -2.437</td> <td>    5.796</td>
</tr>
<tr>
<th>seasonal.5</th> <td>   -4.4229</td> <td>    1.896</td> <td>   -2.333</td> <td> 0.020</td> <td>   -8.138</td> <td>   -0.707</td>
</tr>
<tr>
<th>seasonal.6</th> <td>   -4.2113</td> <td>    1.824</td> <td>   -2.309</td> <td> 0.021</td> <td>   -7.786</td> <td>   -0.636</td>
</tr>
<tr>
<th>seasonal.7</th> <td>   -6.4124</td> <td>    1.791</td> <td>   -3.581</td> <td> 0.000</td> <td>   -9.922</td> <td>   -2.902</td>
</tr>
<tr>
<th>seasonal.8</th> <td>    0.1095</td> <td>    1.800</td> <td>    0.061</td> <td> 0.952</td> <td>   -3.419</td> <td>    3.638</td>
</tr>
<tr>
<th>seasonal.9</th> <td>  -16.7511</td> <td>    1.814</td> <td>   -9.234</td> <td> 0.000</td> <td>  -20.307</td> <td>  -13.196</td>
</tr>
<tr>
<th>seasonal.10</th> <td>  -20.7023</td> <td>    1.862</td> <td>  -11.117</td> <td> 0.000</td> <td>  -24.352</td> <td>  -17.053</td>
</tr>
<tr>
<th>seasonal.11</th> <td>  -11.9554</td> <td>    1.778</td> <td>   -6.724</td> <td> 0.000</td> <td>  -15.440</td> <td>   -8.470</td>
</tr>
<tr>
<th>HOUSTNSA.L1</th> <td>   -0.2953</td> <td>    0.037</td> <td>   -7.994</td> <td> 0.000</td> <td>   -0.368</td> <td>   -0.223</td>
</tr>
<tr>
<th>HOUSTNSA.L2</th> <td>   -0.1148</td> <td>    0.037</td> <td>   -3.107</td> <td> 0.002</td> <td>   -0.187</td> <td>   -0.042</td>
</tr>
</table>
<table>
<caption>Roots</caption>
<tr>
<td></td> <th>            Real</th> <th>         Imaginary</th> <th>         Modulus</th> <th>        Frequency</th>
</tr>
<tr>
<th>AR.1</th> <td>          -1.2862</td> <td>          -2.6564j</td> <td>           2.9514</td> <td>          -0.3218</td>
</tr>
<tr>
<th>AR.2</th> <td>          -1.2862</td> <td>          +2.6564j</td> <td>           2.9514</td> <td>           0.3218</td>
</tr>
</table></div>
</div>
<p>The seasonal dummies are obvious in the forecasts which has a non-trivial seasonal component in all periods 10 years in to the future.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">plot_predict</span><span class="p">(</span><span class="mi">720</span><span class="p">,</span> <span class="mi">840</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_notebooks_generated_autoregressions_20_0.png" src="../../../_images/examples_notebooks_generated_autoregressions_20_0.png"/>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">9</span><span class="p">))</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">plot_diagnostics</span><span class="p">(</span><span class="n">lags</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_notebooks_generated_autoregressions_21_0.png" src="../../../_images/examples_notebooks_generated_autoregressions_21_0.png"/>
</div>
</div>


<h2 id="Seasonal-Dynamics">Seasonal Dynamics<a class="headerlink" href="#Seasonal-Dynamics" title="Permalink to this headline">¶</a></h2>
<p>While <code class="docutils literal notranslate"><span class="pre">AutoReg</span></code> does not directly support Seasonal components since it uses OLS to estimate parameters, it is possible to capture seasonal dynamics using an over-parametrized Seasonal AR that does not impose the restrictions in the Seasonal AR.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">yoy_housing</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">HOUSTNSA</span><span class="o">.</span><span class="n">pct_change</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">"MS"</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="n">_</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">yoy_housing</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_notebooks_generated_autoregressions_24_0.png" src="../../../_images/examples_notebooks_generated_autoregressions_24_0.png"/>
</div>
</div>
<p>We start by selecting a model using the simple method that only chooses the maximum lag. All lower lags are automatically included. The maximum lag to check is set to 13 since this allows the model to next a Seasonal AR that has both a short-run AR(1) component and a Seasonal AR(1) component, so that</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}(1-\phi_s L^{12})(1-\phi_1 L)y_t = \epsilon_t\\which becomes\end{aligned}\end{align} \]</div>
<div class="math notranslate nohighlight">
\[y_t = \phi_1 y_{t-1} +\phi_s Y_{t-12} - \phi_1\phi_s Y_{t-13} + \epsilon_t\]</div>
<p>when expanded. <code class="docutils literal notranslate"><span class="pre">AutoReg</span></code> does not enforce the structure, but can estimate the nesting model</p>
<div class="math notranslate nohighlight">
\[y_t = \phi_1 y_{t-1} +\phi_{12} Y_{t-12} - \phi_{13} Y_{t-13} + \epsilon_t.\]</div>
<p>We see that all 13 lags are selected.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sel</span> <span class="o">=</span> <span class="n">ar_select_order</span><span class="p">(</span><span class="n">yoy_housing</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
<span class="n">sel</span><span class="o">.</span><span class="n">ar_lags</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13])
</pre></div></div>
</div>
<p>It seems unlikely that all 13 lags are required. We can set <code class="docutils literal notranslate"><span class="pre">glob=True</span></code> to search all <span class="math notranslate nohighlight">\(2^{13}\)</span> models that include up to 13 lags.</p>
<p>Here we see that the first three are selected, as is the 7th, and finally the 12th and 13th are selected. This is superficially similar to the structure described above.</p>
<p>After fitting the model, we take a look at the diagnostic plots that indicate that this specification appears to be adequate to capture the dynamics in the data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sel</span> <span class="o">=</span> <span class="n">ar_select_order</span><span class="p">(</span><span class="n">yoy_housing</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="n">glob</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">sel</span><span class="o">.</span><span class="n">ar_lags</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">sel</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">res</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table>
<caption>AutoReg Model Results</caption>
<tr>
<th>Dep. Variable:</th> <td>HOUSTNSA</td> <th>  No. Observations:  </th> <td>714</td>
</tr>
<tr>
<th>Model:</th> <td>Restr. AutoReg(13)</td> <th>  Log Likelihood     </th> <td>589.177</td>
</tr>
<tr>
<th>Method:</th> <td>Conditional MLE</td> <th>  S.D. of innovations</th> <td>0.104</td>
</tr>
<tr>
<th>Date:</th> <td>Fri, 21 Feb 2020</td> <th>  AIC                </th> <td>-4.496</td>
</tr>
<tr>
<th>Time:</th> <td>13:53:33</td> <th>  BIC                </th> <td>-4.444</td>
</tr>
<tr>
<th>Sample:</th> <td>02-01-1961</td> <th>  HQIC               </th> <td>-4.476</td>
</tr>
<tr>
<th></th> <td>- 06-01-2019</td> <th> </th> <td> </td>
</tr>
</table>
<table>
<tr>
<td></td> <th>coef</th> <th>std err</th> <th>z</th> <th>P&gt;|z|</th> <th>[0.025</th> <th>0.975]</th>
</tr>
<tr>
<th>intercept</th> <td>    0.0035</td> <td>    0.004</td> <td>    0.875</td> <td> 0.382</td> <td>   -0.004</td> <td>    0.011</td>
</tr>
<tr>
<th>HOUSTNSA.L1</th> <td>    0.5640</td> <td>    0.035</td> <td>   16.167</td> <td> 0.000</td> <td>    0.496</td> <td>    0.632</td>
</tr>
<tr>
<th>HOUSTNSA.L2</th> <td>    0.2347</td> <td>    0.038</td> <td>    6.238</td> <td> 0.000</td> <td>    0.161</td> <td>    0.308</td>
</tr>
<tr>
<th>HOUSTNSA.L3</th> <td>    0.2051</td> <td>    0.037</td> <td>    5.560</td> <td> 0.000</td> <td>    0.133</td> <td>    0.277</td>
</tr>
<tr>
<th>HOUSTNSA.L7</th> <td>   -0.0903</td> <td>    0.030</td> <td>   -2.976</td> <td> 0.003</td> <td>   -0.150</td> <td>   -0.031</td>
</tr>
<tr>
<th>HOUSTNSA.L12</th> <td>   -0.3791</td> <td>    0.034</td> <td>  -11.075</td> <td> 0.000</td> <td>   -0.446</td> <td>   -0.312</td>
</tr>
<tr>
<th>HOUSTNSA.L13</th> <td>    0.3354</td> <td>    0.033</td> <td>   10.254</td> <td> 0.000</td> <td>    0.271</td> <td>    0.400</td>
</tr>
</table>
<table>
<caption>Roots</caption>
<tr>
<td></td> <th>            Real</th> <th>         Imaginary</th> <th>         Modulus</th> <th>        Frequency</th>
</tr>
<tr>
<th>AR.1</th> <td>          -1.0309</td> <td>          -0.2682j</td> <td>           1.0652</td> <td>          -0.4595</td>
</tr>
<tr>
<th>AR.2</th> <td>          -1.0309</td> <td>          +0.2682j</td> <td>           1.0652</td> <td>           0.4595</td>
</tr>
<tr>
<th>AR.3</th> <td>          -0.7454</td> <td>          -0.7417j</td> <td>           1.0515</td> <td>          -0.3754</td>
</tr>
<tr>
<th>AR.4</th> <td>          -0.7454</td> <td>          +0.7417j</td> <td>           1.0515</td> <td>           0.3754</td>
</tr>
<tr>
<th>AR.5</th> <td>          -0.3172</td> <td>          -1.0221j</td> <td>           1.0702</td> <td>          -0.2979</td>
</tr>
<tr>
<th>AR.6</th> <td>          -0.3172</td> <td>          +1.0221j</td> <td>           1.0702</td> <td>           0.2979</td>
</tr>
<tr>
<th>AR.7</th> <td>           0.2419</td> <td>          -1.0573j</td> <td>           1.0846</td> <td>          -0.2142</td>
</tr>
<tr>
<th>AR.8</th> <td>           0.2419</td> <td>          +1.0573j</td> <td>           1.0846</td> <td>           0.2142</td>
</tr>
<tr>
<th>AR.9</th> <td>           0.7840</td> <td>          -0.8303j</td> <td>           1.1420</td> <td>          -0.1296</td>
</tr>
<tr>
<th>AR.10</th> <td>           0.7840</td> <td>          +0.8303j</td> <td>           1.1420</td> <td>           0.1296</td>
</tr>
<tr>
<th>AR.11</th> <td>           1.0730</td> <td>          -0.2386j</td> <td>           1.0992</td> <td>          -0.0348</td>
</tr>
<tr>
<th>AR.12</th> <td>           1.0730</td> <td>          +0.2386j</td> <td>           1.0992</td> <td>           0.0348</td>
</tr>
<tr>
<th>AR.13</th> <td>           1.1193</td> <td>          -0.0000j</td> <td>           1.1193</td> <td>          -0.0000</td>
</tr>
</table></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">9</span><span class="p">))</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">plot_diagnostics</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">lags</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_notebooks_generated_autoregressions_29_0.png" src="../../../_images/examples_notebooks_generated_autoregressions_29_0.png"/>
</div>
</div>
<p>We can also include seasonal dummies. These are all insignificant since the model is using year-over-year changes.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sel</span> <span class="o">=</span> <span class="n">ar_select_order</span><span class="p">(</span><span class="n">yoy_housing</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="n">glob</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">seasonal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">sel</span><span class="o">.</span><span class="n">ar_lags</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">sel</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">res</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table>
<caption>AutoReg Model Results</caption>
<tr>
<th>Dep. Variable:</th> <td>HOUSTNSA</td> <th>  No. Observations:  </th> <td>714</td>
</tr>
<tr>
<th>Model:</th> <td>Restr. Seas. AutoReg(13)</td> <th>  Log Likelihood     </th> <td>590.875</td>
</tr>
<tr>
<th>Method:</th> <td>Conditional MLE</td> <th>  S.D. of innovations</th> <td>0.104</td>
</tr>
<tr>
<th>Date:</th> <td>Fri, 21 Feb 2020</td> <th>  AIC                </th> <td>-4.469</td>
</tr>
<tr>
<th>Time:</th> <td>13:53:44</td> <th>  BIC                </th> <td>-4.346</td>
</tr>
<tr>
<th>Sample:</th> <td>02-01-1961</td> <th>  HQIC               </th> <td>-4.422</td>
</tr>
<tr>
<th></th> <td>- 06-01-2019</td> <th> </th> <td> </td>
</tr>
</table>
<table>
<tr>
<td></td> <th>coef</th> <th>std err</th> <th>z</th> <th>P&gt;|z|</th> <th>[0.025</th> <th>0.975]</th>
</tr>
<tr>
<th>intercept</th> <td>    0.0167</td> <td>    0.014</td> <td>    1.215</td> <td> 0.224</td> <td>   -0.010</td> <td>    0.044</td>
</tr>
<tr>
<th>seasonal.1</th> <td>   -0.0179</td> <td>    0.019</td> <td>   -0.931</td> <td> 0.352</td> <td>   -0.056</td> <td>    0.020</td>
</tr>
<tr>
<th>seasonal.2</th> <td>   -0.0121</td> <td>    0.019</td> <td>   -0.630</td> <td> 0.528</td> <td>   -0.050</td> <td>    0.026</td>
</tr>
<tr>
<th>seasonal.3</th> <td>   -0.0210</td> <td>    0.019</td> <td>   -1.089</td> <td> 0.276</td> <td>   -0.059</td> <td>    0.017</td>
</tr>
<tr>
<th>seasonal.4</th> <td>   -0.0223</td> <td>    0.019</td> <td>   -1.157</td> <td> 0.247</td> <td>   -0.060</td> <td>    0.015</td>
</tr>
<tr>
<th>seasonal.5</th> <td>   -0.0224</td> <td>    0.019</td> <td>   -1.160</td> <td> 0.246</td> <td>   -0.060</td> <td>    0.015</td>
</tr>
<tr>
<th>seasonal.6</th> <td>   -0.0212</td> <td>    0.019</td> <td>   -1.096</td> <td> 0.273</td> <td>   -0.059</td> <td>    0.017</td>
</tr>
<tr>
<th>seasonal.7</th> <td>   -0.0101</td> <td>    0.019</td> <td>   -0.520</td> <td> 0.603</td> <td>   -0.048</td> <td>    0.028</td>
</tr>
<tr>
<th>seasonal.8</th> <td>   -0.0095</td> <td>    0.019</td> <td>   -0.491</td> <td> 0.623</td> <td>   -0.047</td> <td>    0.028</td>
</tr>
<tr>
<th>seasonal.9</th> <td>   -0.0049</td> <td>    0.019</td> <td>   -0.252</td> <td> 0.801</td> <td>   -0.043</td> <td>    0.033</td>
</tr>
<tr>
<th>seasonal.10</th> <td>   -0.0084</td> <td>    0.019</td> <td>   -0.435</td> <td> 0.664</td> <td>   -0.046</td> <td>    0.030</td>
</tr>
<tr>
<th>seasonal.11</th> <td>   -0.0077</td> <td>    0.019</td> <td>   -0.400</td> <td> 0.689</td> <td>   -0.046</td> <td>    0.030</td>
</tr>
<tr>
<th>HOUSTNSA.L1</th> <td>    0.5630</td> <td>    0.035</td> <td>   16.160</td> <td> 0.000</td> <td>    0.495</td> <td>    0.631</td>
</tr>
<tr>
<th>HOUSTNSA.L2</th> <td>    0.2347</td> <td>    0.038</td> <td>    6.248</td> <td> 0.000</td> <td>    0.161</td> <td>    0.308</td>
</tr>
<tr>
<th>HOUSTNSA.L3</th> <td>    0.2075</td> <td>    0.037</td> <td>    5.634</td> <td> 0.000</td> <td>    0.135</td> <td>    0.280</td>
</tr>
<tr>
<th>HOUSTNSA.L7</th> <td>   -0.0916</td> <td>    0.030</td> <td>   -3.013</td> <td> 0.003</td> <td>   -0.151</td> <td>   -0.032</td>
</tr>
<tr>
<th>HOUSTNSA.L12</th> <td>   -0.3810</td> <td>    0.034</td> <td>  -11.149</td> <td> 0.000</td> <td>   -0.448</td> <td>   -0.314</td>
</tr>
<tr>
<th>HOUSTNSA.L13</th> <td>    0.3373</td> <td>    0.033</td> <td>   10.327</td> <td> 0.000</td> <td>    0.273</td> <td>    0.401</td>
</tr>
</table>
<table>
<caption>Roots</caption>
<tr>
<td></td> <th>            Real</th> <th>         Imaginary</th> <th>         Modulus</th> <th>        Frequency</th>
</tr>
<tr>
<th>AR.1</th> <td>          -1.0305</td> <td>          -0.2681j</td> <td>           1.0648</td> <td>          -0.4595</td>
</tr>
<tr>
<th>AR.2</th> <td>          -1.0305</td> <td>          +0.2681j</td> <td>           1.0648</td> <td>           0.4595</td>
</tr>
<tr>
<th>AR.3</th> <td>          -0.7447</td> <td>          -0.7414j</td> <td>           1.0509</td> <td>          -0.3754</td>
</tr>
<tr>
<th>AR.4</th> <td>          -0.7447</td> <td>          +0.7414j</td> <td>           1.0509</td> <td>           0.3754</td>
</tr>
<tr>
<th>AR.5</th> <td>          -0.3172</td> <td>          -1.0215j</td> <td>           1.0696</td> <td>          -0.2979</td>
</tr>
<tr>
<th>AR.6</th> <td>          -0.3172</td> <td>          +1.0215j</td> <td>           1.0696</td> <td>           0.2979</td>
</tr>
<tr>
<th>AR.7</th> <td>           0.2416</td> <td>          -1.0568j</td> <td>           1.0841</td> <td>          -0.2142</td>
</tr>
<tr>
<th>AR.8</th> <td>           0.2416</td> <td>          +1.0568j</td> <td>           1.0841</td> <td>           0.2142</td>
</tr>
<tr>
<th>AR.9</th> <td>           0.7837</td> <td>          -0.8304j</td> <td>           1.1418</td> <td>          -0.1296</td>
</tr>
<tr>
<th>AR.10</th> <td>           0.7837</td> <td>          +0.8304j</td> <td>           1.1418</td> <td>           0.1296</td>
</tr>
<tr>
<th>AR.11</th> <td>           1.0724</td> <td>          -0.2383j</td> <td>           1.0986</td> <td>          -0.0348</td>
</tr>
<tr>
<th>AR.12</th> <td>           1.0724</td> <td>          +0.2383j</td> <td>           1.0986</td> <td>           0.0348</td>
</tr>
<tr>
<th>AR.13</th> <td>           1.1192</td> <td>          -0.0000j</td> <td>           1.1192</td> <td>          -0.0000</td>
</tr>
</table></div>
</div>


<h2 id="Industrial-Production">Industrial Production<a class="headerlink" href="#Industrial-Production" title="Permalink to this headline">¶</a></h2>
<p>We will use the industrial production index data to examine forecasting.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data</span> <span class="o">=</span> <span class="n">pdr</span><span class="o">.</span><span class="n">get_data_fred</span><span class="p">(</span><span class="s1">'INDPRO'</span><span class="p">,</span> <span class="s1">'1959-01-01'</span><span class="p">,</span> <span class="s1">'2019-06-01'</span><span class="p">)</span>
<span class="n">ind_prod</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">INDPRO</span><span class="o">.</span><span class="n">pct_change</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">'MS'</span><span class="p">)</span>
<span class="n">_</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">9</span><span class="p">))</span>
<span class="n">ind_prod</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fec8d4cd5d0&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_notebooks_generated_autoregressions_33_1.png" src="../../../_images/examples_notebooks_generated_autoregressions_33_1.png"/>
</div>
</div>
<p>We will start by selecting a model using up to 12 lags. An AR(13) minimizes the BIC criteria even though many coefficients are insignificant.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sel</span> <span class="o">=</span> <span class="n">ar_select_order</span><span class="p">(</span><span class="n">ind_prod</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="s1">'bic'</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">sel</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">res</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table>
<caption>AutoReg Model Results</caption>
<tr>
<th>Dep. Variable:</th> <td>INDPRO</td> <th>  No. Observations:  </th> <td>714</td>
</tr>
<tr>
<th>Model:</th> <td>AutoReg(13)</td> <th>  Log Likelihood     </th> <td>2318.848</td>
</tr>
<tr>
<th>Method:</th> <td>Conditional MLE</td> <th>  S.D. of innovations</th> <td>0.009</td>
</tr>
<tr>
<th>Date:</th> <td>Fri, 21 Feb 2020</td> <th>  AIC                </th> <td>-9.411</td>
</tr>
<tr>
<th>Time:</th> <td>13:53:45</td> <th>  BIC                </th> <td>-9.313</td>
</tr>
<tr>
<th>Sample:</th> <td>02-01-1961</td> <th>  HQIC               </th> <td>-9.373</td>
</tr>
<tr>
<th></th> <td>- 06-01-2019</td> <th> </th> <td> </td>
</tr>
</table>
<table>
<tr>
<td></td> <th>coef</th> <th>std err</th> <th>z</th> <th>P&gt;|z|</th> <th>[0.025</th> <th>0.975]</th>
</tr>
<tr>
<th>intercept</th> <td>    0.0012</td> <td>    0.000</td> <td>    2.896</td> <td> 0.004</td> <td>    0.000</td> <td>    0.002</td>
</tr>
<tr>
<th>INDPRO.L1</th> <td>    1.1504</td> <td>    0.035</td> <td>   32.940</td> <td> 0.000</td> <td>    1.082</td> <td>    1.219</td>
</tr>
<tr>
<th>INDPRO.L2</th> <td>   -0.0747</td> <td>    0.053</td> <td>   -1.407</td> <td> 0.159</td> <td>   -0.179</td> <td>    0.029</td>
</tr>
<tr>
<th>INDPRO.L3</th> <td>    0.0043</td> <td>    0.053</td> <td>    0.081</td> <td> 0.935</td> <td>   -0.099</td> <td>    0.107</td>
</tr>
<tr>
<th>INDPRO.L4</th> <td>    0.0027</td> <td>    0.053</td> <td>    0.052</td> <td> 0.959</td> <td>   -0.100</td> <td>    0.106</td>
</tr>
<tr>
<th>INDPRO.L5</th> <td>   -0.1383</td> <td>    0.052</td> <td>   -2.642</td> <td> 0.008</td> <td>   -0.241</td> <td>   -0.036</td>
</tr>
<tr>
<th>INDPRO.L6</th> <td>    0.0085</td> <td>    0.052</td> <td>    0.163</td> <td> 0.871</td> <td>   -0.094</td> <td>    0.111</td>
</tr>
<tr>
<th>INDPRO.L7</th> <td>    0.0375</td> <td>    0.052</td> <td>    0.720</td> <td> 0.471</td> <td>   -0.065</td> <td>    0.139</td>
</tr>
<tr>
<th>INDPRO.L8</th> <td>   -0.0235</td> <td>    0.052</td> <td>   -0.453</td> <td> 0.651</td> <td>   -0.125</td> <td>    0.078</td>
</tr>
<tr>
<th>INDPRO.L9</th> <td>    0.0945</td> <td>    0.052</td> <td>    1.824</td> <td> 0.068</td> <td>   -0.007</td> <td>    0.196</td>
</tr>
<tr>
<th>INDPRO.L10</th> <td>   -0.0844</td> <td>    0.052</td> <td>   -1.627</td> <td> 0.104</td> <td>   -0.186</td> <td>    0.017</td>
</tr>
<tr>
<th>INDPRO.L11</th> <td>    0.0024</td> <td>    0.052</td> <td>    0.047</td> <td> 0.962</td> <td>   -0.099</td> <td>    0.104</td>
</tr>
<tr>
<th>INDPRO.L12</th> <td>   -0.3809</td> <td>    0.052</td> <td>   -7.367</td> <td> 0.000</td> <td>   -0.482</td> <td>   -0.280</td>
</tr>
<tr>
<th>INDPRO.L13</th> <td>    0.3589</td> <td>    0.033</td> <td>   10.916</td> <td> 0.000</td> <td>    0.294</td> <td>    0.423</td>
</tr>
</table>
<table>
<caption>Roots</caption>
<tr>
<td></td> <th>            Real</th> <th>         Imaginary</th> <th>         Modulus</th> <th>        Frequency</th>
</tr>
<tr>
<th>AR.1</th> <td>          -1.0411</td> <td>          -0.2889j</td> <td>           1.0804</td> <td>          -0.4569</td>
</tr>
<tr>
<th>AR.2</th> <td>          -1.0411</td> <td>          +0.2889j</td> <td>           1.0804</td> <td>           0.4569</td>
</tr>
<tr>
<th>AR.3</th> <td>          -0.7774</td> <td>          -0.8064j</td> <td>           1.1201</td> <td>          -0.3721</td>
</tr>
<tr>
<th>AR.4</th> <td>          -0.7774</td> <td>          +0.8064j</td> <td>           1.1201</td> <td>           0.3721</td>
</tr>
<tr>
<th>AR.5</th> <td>          -0.2760</td> <td>          -1.0530j</td> <td>           1.0886</td> <td>          -0.2908</td>
</tr>
<tr>
<th>AR.6</th> <td>          -0.2760</td> <td>          +1.0530j</td> <td>           1.0886</td> <td>           0.2908</td>
</tr>
<tr>
<th>AR.7</th> <td>           0.2719</td> <td>          -1.0515j</td> <td>           1.0861</td> <td>          -0.2097</td>
</tr>
<tr>
<th>AR.8</th> <td>           0.2719</td> <td>          +1.0515j</td> <td>           1.0861</td> <td>           0.2097</td>
</tr>
<tr>
<th>AR.9</th> <td>           0.8019</td> <td>          -0.7297j</td> <td>           1.0842</td> <td>          -0.1175</td>
</tr>
<tr>
<th>AR.10</th> <td>           0.8019</td> <td>          +0.7297j</td> <td>           1.0842</td> <td>           0.1175</td>
</tr>
<tr>
<th>AR.11</th> <td>           1.0224</td> <td>          -0.2214j</td> <td>           1.0461</td> <td>          -0.0339</td>
</tr>
<tr>
<th>AR.12</th> <td>           1.0224</td> <td>          +0.2214j</td> <td>           1.0461</td> <td>           0.0339</td>
</tr>
<tr>
<th>AR.13</th> <td>           1.0578</td> <td>          -0.0000j</td> <td>           1.0578</td> <td>          -0.0000</td>
</tr>
</table></div>
</div>
<p>We can also use a global search which allows longer lags to enter if needed without requiring the shorter lags. Here we see many lags dropped. The model indicates there may be some seasonality in the data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sel</span> <span class="o">=</span> <span class="n">ar_select_order</span><span class="p">(</span><span class="n">ind_prod</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="s1">'bic'</span><span class="p">,</span> <span class="n">glob</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">sel</span><span class="o">.</span><span class="n">ar_lags</span>
<span class="n">res_glob</span> <span class="o">=</span> <span class="n">sel</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">res_glob</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table>
<caption>AutoReg Model Results</caption>
<tr>
<th>Dep. Variable:</th> <td>INDPRO</td> <th>  No. Observations:  </th> <td>714</td>
</tr>
<tr>
<th>Model:</th> <td>Restr. AutoReg(13)</td> <th>  Log Likelihood     </th> <td>2313.420</td>
</tr>
<tr>
<th>Method:</th> <td>Conditional MLE</td> <th>  S.D. of innovations</th> <td>0.009</td>
</tr>
<tr>
<th>Date:</th> <td>Fri, 21 Feb 2020</td> <th>  AIC                </th> <td>-9.421</td>
</tr>
<tr>
<th>Time:</th> <td>13:53:53</td> <th>  BIC                </th> <td>-9.382</td>
</tr>
<tr>
<th>Sample:</th> <td>02-01-1961</td> <th>  HQIC               </th> <td>-9.406</td>
</tr>
<tr>
<th></th> <td>- 06-01-2019</td> <th> </th> <td> </td>
</tr>
</table>
<table>
<tr>
<td></td> <th>coef</th> <th>std err</th> <th>z</th> <th>P&gt;|z|</th> <th>[0.025</th> <th>0.975]</th>
</tr>
<tr>
<th>intercept</th> <td>    0.0013</td> <td>    0.000</td> <td>    2.986</td> <td> 0.003</td> <td>    0.000</td> <td>    0.002</td>
</tr>
<tr>
<th>INDPRO.L1</th> <td>    1.0882</td> <td>    0.013</td> <td>   80.869</td> <td> 0.000</td> <td>    1.062</td> <td>    1.115</td>
</tr>
<tr>
<th>INDPRO.L5</th> <td>   -0.1057</td> <td>    0.016</td> <td>   -6.649</td> <td> 0.000</td> <td>   -0.137</td> <td>   -0.075</td>
</tr>
<tr>
<th>INDPRO.L12</th> <td>   -0.3852</td> <td>    0.034</td> <td>  -11.404</td> <td> 0.000</td> <td>   -0.451</td> <td>   -0.319</td>
</tr>
<tr>
<th>INDPRO.L13</th> <td>    0.3587</td> <td>    0.032</td> <td>   11.315</td> <td> 0.000</td> <td>    0.297</td> <td>    0.421</td>
</tr>
</table>
<table>
<caption>Roots</caption>
<tr>
<td></td> <th>            Real</th> <th>         Imaginary</th> <th>         Modulus</th> <th>        Frequency</th>
</tr>
<tr>
<th>AR.1</th> <td>          -1.0518</td> <td>          -0.2762j</td> <td>           1.0875</td> <td>          -0.4591</td>
</tr>
<tr>
<th>AR.2</th> <td>          -1.0518</td> <td>          +0.2762j</td> <td>           1.0875</td> <td>           0.4591</td>
</tr>
<tr>
<th>AR.3</th> <td>          -0.7718</td> <td>          -0.7796j</td> <td>           1.0970</td> <td>          -0.3742</td>
</tr>
<tr>
<th>AR.4</th> <td>          -0.7718</td> <td>          +0.7796j</td> <td>           1.0970</td> <td>           0.3742</td>
</tr>
<tr>
<th>AR.5</th> <td>          -0.2714</td> <td>          -1.0479j</td> <td>           1.0825</td> <td>          -0.2903</td>
</tr>
<tr>
<th>AR.6</th> <td>          -0.2714</td> <td>          +1.0479j</td> <td>           1.0825</td> <td>           0.2903</td>
</tr>
<tr>
<th>AR.7</th> <td>           0.2820</td> <td>          -1.0573j</td> <td>           1.0943</td> <td>          -0.2085</td>
</tr>
<tr>
<th>AR.8</th> <td>           0.2820</td> <td>          +1.0573j</td> <td>           1.0943</td> <td>           0.2085</td>
</tr>
<tr>
<th>AR.9</th> <td>           0.8021</td> <td>          -0.7558j</td> <td>           1.1021</td> <td>          -0.1203</td>
</tr>
<tr>
<th>AR.10</th> <td>           0.8021</td> <td>          +0.7558j</td> <td>           1.1021</td> <td>           0.1203</td>
</tr>
<tr>
<th>AR.11</th> <td>           1.0189</td> <td>          -0.2198j</td> <td>           1.0423</td> <td>          -0.0338</td>
</tr>
<tr>
<th>AR.12</th> <td>           1.0189</td> <td>          +0.2198j</td> <td>           1.0423</td> <td>           0.0338</td>
</tr>
<tr>
<th>AR.13</th> <td>           1.0578</td> <td>          -0.0000j</td> <td>           1.0578</td> <td>          -0.0000</td>
</tr>
</table></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">plot_predict</span></code> can be used to produce forecast plots along with confidence intervals. Here we produce forecasts starting at the last observation and continuing for 18 months.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ind_prod</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(714,)
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">res_glob</span><span class="o">.</span><span class="n">plot_predict</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">714</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">732</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_notebooks_generated_autoregressions_40_0.png" src="../../../_images/examples_notebooks_generated_autoregressions_40_0.png"/>
</div>
</div>
<p>The forecasts from the full model and the restricted model are very similar. I also include an AR(5) which has very different dynamics</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">res_ar5</span> <span class="o">=</span> <span class="n">AutoReg</span><span class="p">(</span><span class="n">ind_prod</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">predictions</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"AR(5)"</span><span class="p">:</span> <span class="n">res_ar5</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">714</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">726</span><span class="p">),</span>
                            <span class="s2">"AR(13)"</span><span class="p">:</span> <span class="n">res</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">714</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">726</span><span class="p">),</span>
                            <span class="s2">"Restr. AR(13)"</span><span class="p">:</span> <span class="n">res_glob</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">714</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">726</span><span class="p">)})</span>
<span class="n">_</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">predictions</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_notebooks_generated_autoregressions_42_0.png" src="../../../_images/examples_notebooks_generated_autoregressions_42_0.png"/>
</div>
</div>
<p>The diagnostics indicate the model captures most of the the dynamics in the data. The ACF shows a patters at the seasonal frequency and so a more complete seasonal model (<code class="docutils literal notranslate"><span class="pre">SARIMAX</span></code>) may be needed.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">9</span><span class="p">))</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">res_glob</span><span class="o">.</span><span class="n">plot_diagnostics</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">lags</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_notebooks_generated_autoregressions_44_0.png" src="../../../_images/examples_notebooks_generated_autoregressions_44_0.png"/>
</div>
</div>



<h1 id="Forecasting">Forecasting<a class="headerlink" href="#Forecasting" title="Permalink to this headline">¶</a></h1>
<p>Forecasts are produced using the <code class="docutils literal notranslate"><span class="pre">predict</span></code> method from a results instance. The default produces static forecasts which are one-step forecasts. Producing multi-step forecasts requires using <code class="docutils literal notranslate"><span class="pre">dynamic=True</span></code>.</p>
<p>In this next cell, we produce 12-step-heard forecasts for the final 24 periods in the sample. This requires a loop.</p>
<p><strong>Note</strong>: These are technically in-sample since the data we are forecasting was used to estimate parameters. Producing OOS forecasts requires two models. The first must exclude the OOS period. The second uses the <code class="docutils literal notranslate"><span class="pre">predict</span></code> method from the full-sample model with the parameters from the shorter sample model that excluded the OOS period.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">start</span> <span class="o">=</span> <span class="n">ind_prod</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">24</span><span class="p">]</span>
<span class="n">forecast_index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">ind_prod</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">freq</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">36</span><span class="p">)</span>
<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'-'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="p">(</span><span class="n">idx</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">idx</span><span class="o">.</span><span class="n">month</span><span class="p">))</span> <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">forecast_index</span><span class="p">]</span>
<span class="n">forecasts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">forecast_index</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">24</span><span class="p">):</span>
    <span class="n">fcast</span> <span class="o">=</span> <span class="n">res_glob</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">forecast_index</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="n">forecast_index</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">12</span><span class="p">],</span> <span class="n">dynamic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">forecasts</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">fcast</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">fcast</span>
<span class="n">_</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">ind_prod</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">24</span><span class="p">:]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"black"</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">"--"</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">forecasts</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_notebooks_generated_autoregressions_46_0.png" src="../../../_images/examples_notebooks_generated_autoregressions_46_0.png"/>
</div>
</div>

<h2 id="Comparing-to-SARIMAX">Comparing to SARIMAX<a class="headerlink" href="#Comparing-to-SARIMAX" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">SARIMAX</span></code> is an implementation of a Seasonal Autoregressive Integrated Moving Average with eXogenous regressors model. It supports:</p>
<ul class="simple">
<li><p>Specification of seasonal and nonseasonal AR and MA components</p></li>
<li><p>Inclusion of Exogenous variables</p></li>
<li><p>Full maximum-likelihood estimation using the Kalman Filter</p></li>
</ul>
<p>This model is more feature rich than <code class="docutils literal notranslate"><span class="pre">AutoReg</span></code>. Unlike <code class="docutils literal notranslate"><span class="pre">SARIMAX</span></code>, <code class="docutils literal notranslate"><span class="pre">AutoReg</span></code> estimates parameters using OLS. This is faster and the problem is globally convex, and so there are no issues with local minima. The closed-form estimator and its performance are the key advantages of <code class="docutils literal notranslate"><span class="pre">AutoReg</span></code> over <code class="docutils literal notranslate"><span class="pre">SARIMAX</span></code> when comparing AR(P) models. <code class="docutils literal notranslate"><span class="pre">AutoReg</span></code> also support seasonal dummies, which can be used with <code class="docutils literal notranslate"><span class="pre">SARIMAX</span></code> if the user includes them as exogenous regressors.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">statsmodels.tsa.api</span> <span class="kn">import</span> <span class="n">SARIMAX</span>

<span class="n">sarimax_mod</span> <span class="o">=</span> <span class="n">SARIMAX</span><span class="p">(</span><span class="n">ind_prod</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">13</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">trend</span><span class="o">=</span><span class="s1">'c'</span><span class="p">)</span>
<span class="n">sarimax_res</span> <span class="o">=</span> <span class="n">sarimax_mod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">sarimax_res</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<table>
<caption>SARIMAX Results</caption>
<tr>
<th>Dep. Variable:</th> <td>INDPRO</td> <th>  No. Observations:  </th> <td>714</td>
</tr>
<tr>
<th>Model:</th> <td>SARIMAX([1, 5, 12, 13], 0, 0)</td> <th>  Log Likelihood     </th> <td>2302.146</td>
</tr>
<tr>
<th>Date:</th> <td>Fri, 21 Feb 2020</td> <th>  AIC                </th> <td>-4592.293</td>
</tr>
<tr>
<th>Time:</th> <td>13:54:00</td> <th>  BIC                </th> <td>-4564.867</td>
</tr>
<tr>
<th>Sample:</th> <td>01-01-1960</td> <th>  HQIC               </th> <td>-4581.701</td>
</tr>
<tr>
<th></th> <td>- 06-01-2019</td> <th> </th> <td> </td>
</tr>
<tr>
<th>Covariance Type:</th> <td>opg</td> <th> </th> <td> </td>
</tr>
</table>
<table>
<tr>
<td></td> <th>coef</th> <th>std err</th> <th>z</th> <th>P&gt;|z|</th> <th>[0.025</th> <th>0.975]</th>
</tr>
<tr>
<th>intercept</th> <td>    0.0011</td> <td>    0.000</td> <td>    2.627</td> <td> 0.009</td> <td>    0.000</td> <td>    0.002</td>
</tr>
<tr>
<th>ar.L1</th> <td>    1.0798</td> <td>    0.010</td> <td>  106.388</td> <td> 0.000</td> <td>    1.060</td> <td>    1.100</td>
</tr>
<tr>
<th>ar.L5</th> <td>   -0.0849</td> <td>    0.011</td> <td>   -7.467</td> <td> 0.000</td> <td>   -0.107</td> <td>   -0.063</td>
</tr>
<tr>
<th>ar.L12</th> <td>   -0.4392</td> <td>    0.026</td> <td>  -16.935</td> <td> 0.000</td> <td>   -0.490</td> <td>   -0.388</td>
</tr>
<tr>
<th>ar.L13</th> <td>    0.4032</td> <td>    0.025</td> <td>   15.831</td> <td> 0.000</td> <td>    0.353</td> <td>    0.453</td>
</tr>
<tr>
<th>sigma2</th> <td> 9.179e-05</td> <td> 3.13e-06</td> <td>   29.366</td> <td> 0.000</td> <td> 8.57e-05</td> <td> 9.79e-05</td>
</tr>
</table>
<table>
<tr>
<th>Ljung-Box (Q):</th> <td>177.22</td> <th>  Jarque-Bera (JB):  </th> <td>928.85</td>
</tr>
<tr>
<th>Prob(Q):</th> <td>0.00</td> <th>  Prob(JB):          </th> <td>0.00</td>
</tr>
<tr>
<th>Heteroskedasticity (H):</th> <td>0.38</td> <th>  Skew:              </th> <td>-0.63</td>
</tr>
<tr>
<th>Prob(H) (two-sided):</th> <td>0.00</td> <th>  Kurtosis:          </th> <td>8.44</td>
</tr>
</table><br/><br/>Warnings:<br/>[1] Covariance matrix calculated using the outer product of gradients (complex-step).</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sarimax_params</span> <span class="o">=</span> <span class="n">sarimax_res</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">sarimax_params</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">res_glob</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">index</span>
<span class="n">params</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">res_glob</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">sarimax_params</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">params</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"AutoReg"</span><span class="p">,</span> <span class="s2">"SARIMAX"</span><span class="p">]</span>
<span class="n">params</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>AutoReg</th>
<th>SARIMAX</th>
</tr>
</thead>
<tbody>
<tr>
<th>intercept</th>
<td>0.001292</td>
<td>0.001140</td>
</tr>
<tr>
<th>INDPRO.L1</th>
<td>1.088215</td>
<td>1.079829</td>
</tr>
<tr>
<th>INDPRO.L5</th>
<td>-0.105668</td>
<td>-0.084904</td>
</tr>
<tr>
<th>INDPRO.L12</th>
<td>-0.385171</td>
<td>-0.439175</td>
</tr>
<tr>
<th>INDPRO.L13</th>
<td>0.358738</td>
<td>0.403241</td>
</tr>
</tbody>
</table>
</div></div>
</div>




          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="interactions_anova.html" title="Material"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Interactions and ANOVA </span>
              </div>
            </a>
          
          
            <a href="tsa_arma_0.html" title="Admonition"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Autoregressive Moving Average (ARMA): Sunspots data </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2009-2019, Josef Perktold, Skipper Seabold, Jonathan Taylor, statsmodels-developers.
              
          </div>
            Last updated on
              Feb 21, 2020.
            <br/>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 2.4.2.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../../../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>