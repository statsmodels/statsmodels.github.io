
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>statsmodels.iolib.summary &mdash; statsmodels 0.6.1 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.6.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../../_static/statsmodels_hybi_favico.ico"/>
    <link rel="author" title="About these documents" href="../../../about.html" />
    <link rel="top" title="statsmodels 0.6.1 documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" />
<link rel="stylesheet" href="../../_static/facebox.css" type="text/css" />
<link rel="stylesheet" href="../_static/examples.css" type="text/css" />
<script type="text/javascript" src="../../../_static/scripts.js">
</script>
<script type="text/javascript" src="../../../_static/facebox.js">
</script>

  </head>
  <body role="document">
<div class="headerwrap">
    <div class = "header">
        
        <a href = "../../../index.html">
<img src="../../../_static/statsmodels_hybi_banner.png" alt="Logo"
    style="padding-left: 15px"/></a>
        
    </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
<li><a href ="../../../install.html">Install</a></li> &nbsp;|&nbsp;
<li><a href="https://groups.google.com/group/pystatsmodels?hl=en">Support</a></li> &nbsp;|&nbsp;
<li><a href="https://github.com/statsmodels/statsmodels/issues">Bugs</a></li> &nbsp;|&nbsp;
<li><a href="../../../dev/index.html">Develop</a></li> &nbsp;|&nbsp;
<li><a href="../../../examples/index.html">Examples</a></li> &nbsp;|&nbsp;
<li><a href="../../../faq.html">FAQ</a></li> &nbsp;|&nbsp;

          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> |</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            




  <h1>Source code for statsmodels.iolib.summary</h1><div class="highlight"><pre>
<span class="kn">from</span> <span class="nn">statsmodels.compat.python</span> <span class="kn">import</span> <span class="nb">range</span><span class="p">,</span> <span class="n">lrange</span><span class="p">,</span> <span class="n">lmap</span><span class="p">,</span> <span class="n">lzip</span><span class="p">,</span> <span class="n">zip_longest</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">statsmodels.iolib.table</span> <span class="kn">import</span> <span class="n">SimpleTable</span>
<span class="kn">from</span> <span class="nn">statsmodels.iolib.tableformatting</span> <span class="kn">import</span> <span class="p">(</span><span class="n">gen_fmt</span><span class="p">,</span> <span class="n">fmt_2</span><span class="p">,</span>
                                                <span class="n">fmt_params</span><span class="p">,</span> <span class="n">fmt_base</span><span class="p">,</span> <span class="n">fmt_2cols</span><span class="p">)</span>
<span class="c">#from statsmodels.iolib.summary2d import summary_params_2dflat</span>
<span class="c">#from summary2d import summary_params_2dflat</span>

<span class="k">def</span> <span class="nf">forg</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">prec</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">prec</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
    <span class="c">#for 3 decimals</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mf">1e4</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-4</span><span class="p">):</span>
            <span class="k">return</span> <span class="s">&#39;</span><span class="si">%9.3g</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">x</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&#39;</span><span class="si">%9.3f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">x</span>
    <span class="k">elif</span> <span class="n">prec</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mf">1e4</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-4</span><span class="p">):</span>
            <span class="k">return</span> <span class="s">&#39;</span><span class="si">%10.4g</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">x</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&#39;</span><span class="si">%10.4f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">x</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>


<span class="k">def</span> <span class="nf">summary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yname</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">xname</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=.</span><span class="mo">05</span><span class="p">,</span>
            <span class="n">returns</span><span class="o">=</span><span class="s">&#39;text&#39;</span><span class="p">,</span> <span class="n">model_info</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    yname : string</span>
<span class="sd">            optional, Default is `Y`</span>
<span class="sd">    xname : list of strings</span>
<span class="sd">            optional, Default is `X.#` for # in p the number of regressors</span>
<span class="sd">    Confidance interval : (0,1) not implimented</span>
<span class="sd">    title : string</span>
<span class="sd">            optional, Defualt is &#39;Generalized linear model&#39;</span>
<span class="sd">    returns : string</span>
<span class="sd">              &#39;text&#39;, &#39;table&#39;, &#39;csv&#39;, &#39;latex&#39;, &#39;html&#39;</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Defualt :</span>
<span class="sd">    returns=&#39;print&#39;</span>
<span class="sd">            Prints the summarirized results</span>

<span class="sd">    Option :</span>
<span class="sd">    returns=&#39;text&#39;</span>
<span class="sd">            Prints the summarirized results</span>

<span class="sd">    Option :</span>
<span class="sd">    returns=&#39;table&#39;</span>
<span class="sd">             SimpleTable instance : summarizing the fit of a linear model.</span>

<span class="sd">    Option :</span>
<span class="sd">    returns=&#39;csv&#39;</span>
<span class="sd">            returns a string of csv of the results, to import into a spreadsheet</span>

<span class="sd">    Option :</span>
<span class="sd">    returns=&#39;latex&#39;</span>
<span class="sd">    Not implimented yet</span>

<span class="sd">    Option :</span>
<span class="sd">    returns=&#39;HTML&#39;</span>
<span class="sd">    Not implimented yet</span>


<span class="sd">    Examples (needs updating)</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; import statsmodels as sm</span>
<span class="sd">    &gt;&gt;&gt; data = sm.datasets.longley.load()</span>
<span class="sd">    &gt;&gt;&gt; data.exog = sm.add_constant(data.exog)</span>
<span class="sd">    &gt;&gt;&gt; ols_results = sm.OLS(data.endog, data.exog).results</span>
<span class="sd">    &gt;&gt;&gt; print ols_results.summary()</span>
<span class="sd">    ...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    conf_int calculated from normal dist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">time</span> <span class="kn">as</span> <span class="nn">time</span>



    <span class="c">#TODO Make sure all self.model.__class__.__name__ are listed</span>
    <span class="n">model_types</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;OLS&#39;</span> <span class="p">:</span> <span class="s">&#39;Ordinary least squares&#39;</span><span class="p">,</span>
                   <span class="s">&#39;GLS&#39;</span> <span class="p">:</span> <span class="s">&#39;Generalized least squares&#39;</span><span class="p">,</span>
                   <span class="s">&#39;GLSAR&#39;</span> <span class="p">:</span> <span class="s">&#39;Generalized least squares with AR(p)&#39;</span><span class="p">,</span>
                   <span class="s">&#39;WLS&#39;</span> <span class="p">:</span> <span class="s">&#39;Weigthed least squares&#39;</span><span class="p">,</span>
                   <span class="s">&#39;RLM&#39;</span> <span class="p">:</span> <span class="s">&#39;Robust linear model&#39;</span><span class="p">,</span>
                   <span class="s">&#39;GLM&#39;</span> <span class="p">:</span> <span class="s">&#39;Generalized linear model&#39;</span>
                   <span class="p">}</span>
    <span class="n">model_methods</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;OLS&#39;</span> <span class="p">:</span> <span class="s">&#39;Least Squares&#39;</span><span class="p">,</span>
                   <span class="s">&#39;GLS&#39;</span> <span class="p">:</span> <span class="s">&#39;Least Squares&#39;</span><span class="p">,</span>
                   <span class="s">&#39;GLSAR&#39;</span> <span class="p">:</span> <span class="s">&#39;Least Squares&#39;</span><span class="p">,</span>
                   <span class="s">&#39;WLS&#39;</span> <span class="p">:</span> <span class="s">&#39;Least Squares&#39;</span><span class="p">,</span>
                   <span class="s">&#39;RLM&#39;</span> <span class="p">:</span> <span class="s">&#39;?&#39;</span><span class="p">,</span>
                   <span class="s">&#39;GLM&#39;</span> <span class="p">:</span> <span class="s">&#39;?&#39;</span>
                   <span class="p">}</span>
    <span class="k">if</span> <span class="n">title</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">model_types</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">yname</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">yname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">endog_names</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">yname</span> <span class="o">=</span> <span class="s">&#39;y&#39;</span>
    <span class="k">if</span> <span class="n">xname</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">xname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">exog_names</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">xname</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;var_</span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">))]</span>
    <span class="n">time_now</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">()</span>
    <span class="n">time_of_day</span> <span class="o">=</span> <span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%H:%M:%S&quot;</span><span class="p">,</span> <span class="n">time_now</span><span class="p">)]</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%a, </span><span class="si">%d</span><span class="s"> %b %Y&quot;</span><span class="p">,</span> <span class="n">time_now</span><span class="p">)</span>
    <span class="n">modeltype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span>
    <span class="c">#dist_family = self.model.family.__class__.__name__</span>
    <span class="n">nobs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nobs</span>
    <span class="n">df_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df_model</span>
    <span class="n">df_resid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df_resid</span>

    <span class="c">#General part of the summary table, Applicable to all? models</span>
    <span class="c">#------------------------------------------------------------</span>
    <span class="c">#TODO: define this generically, overwrite in model classes</span>
    <span class="c">#replace definition of stubs data by single list</span>
    <span class="c">#e.g.</span>
    <span class="n">gen_left</span> <span class="o">=</span>   <span class="p">[(</span><span class="s">&#39;Model type:&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">modeltype</span><span class="p">]),</span>
                  <span class="p">(</span><span class="s">&#39;Date:&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">date</span><span class="p">]),</span>
                  <span class="p">(</span><span class="s">&#39;Dependent Variable:&#39;</span><span class="p">,</span> <span class="n">yname</span><span class="p">),</span> <span class="c">#What happens with multiple names?</span>
                  <span class="p">(</span><span class="s">&#39;df model&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">df_model</span><span class="p">])</span>
                  <span class="p">]</span>
    <span class="n">gen_stubs_left</span><span class="p">,</span> <span class="n">gen_data_left</span> <span class="o">=</span> <span class="n">zip_longest</span><span class="p">(</span><span class="o">*</span><span class="n">gen_left</span><span class="p">)</span> <span class="c">#transpose row col</span>

    <span class="n">gen_title</span> <span class="o">=</span> <span class="n">title</span>
    <span class="n">gen_header</span> <span class="o">=</span> <span class="bp">None</span>
<span class="c">##    gen_stubs_left = (&#39;Model type:&#39;,</span>
<span class="c">##                      &#39;Date:&#39;,</span>
<span class="c">##                      &#39;Dependent Variable:&#39;,</span>
<span class="c">##                      &#39;df model&#39;</span>
<span class="c">##                  )</span>
<span class="c">##    gen_data_left = [[modeltype],</span>
<span class="c">##                     [date],</span>
<span class="c">##                     yname, #What happens with multiple names?</span>
<span class="c">##                     [df_model]</span>
<span class="c">##                     ]</span>
    <span class="n">gen_table_left</span> <span class="o">=</span> <span class="n">SimpleTable</span><span class="p">(</span><span class="n">gen_data_left</span><span class="p">,</span>
                                 <span class="n">gen_header</span><span class="p">,</span>
                                 <span class="n">gen_stubs_left</span><span class="p">,</span>
                                 <span class="n">title</span> <span class="o">=</span> <span class="n">gen_title</span><span class="p">,</span>
                                 <span class="n">txt_fmt</span> <span class="o">=</span> <span class="n">gen_fmt</span>
                                 <span class="p">)</span>

    <span class="n">gen_stubs_right</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Method:&#39;</span><span class="p">,</span>
                      <span class="s">&#39;Time:&#39;</span><span class="p">,</span>
                      <span class="s">&#39;Number of Obs:&#39;</span><span class="p">,</span>
                      <span class="s">&#39;df resid&#39;</span>
                      <span class="p">)</span>
    <span class="n">gen_data_right</span> <span class="o">=</span> <span class="p">([</span><span class="n">modeltype</span><span class="p">],</span> <span class="c">#was dist family need to look at more</span>
                      <span class="n">time_of_day</span><span class="p">,</span>
                      <span class="p">[</span><span class="n">nobs</span><span class="p">],</span>
                      <span class="p">[</span><span class="n">df_resid</span><span class="p">]</span>
                      <span class="p">)</span>
    <span class="n">gen_table_right</span> <span class="o">=</span> <span class="n">SimpleTable</span><span class="p">(</span><span class="n">gen_data_right</span><span class="p">,</span>
                                 <span class="n">gen_header</span><span class="p">,</span>
                                 <span class="n">gen_stubs_right</span><span class="p">,</span>
                                 <span class="n">title</span> <span class="o">=</span> <span class="n">gen_title</span><span class="p">,</span>
                                 <span class="n">txt_fmt</span> <span class="o">=</span> <span class="n">gen_fmt</span>
                                 <span class="p">)</span>
    <span class="n">gen_table_left</span><span class="o">.</span><span class="n">extend_right</span><span class="p">(</span><span class="n">gen_table_right</span><span class="p">)</span>
    <span class="n">general_table</span> <span class="o">=</span> <span class="n">gen_table_left</span>

    <span class="c">#Parameters part of the summary table</span>
    <span class="c">#------------------------------------</span>
    <span class="c">#Note: this is not necessary since we standardized names, only t versus normal</span>
    <span class="n">tstats</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;OLS&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span>
            <span class="s">&#39;GLS&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span>
            <span class="s">&#39;GLSAR&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span>
            <span class="s">&#39;WLS&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span>
            <span class="s">&#39;RLM&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span>
            <span class="s">&#39;GLM&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">()</span>
            <span class="p">}</span>
    <span class="n">prob_stats</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;OLS&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pvalues</span><span class="p">,</span>
                 <span class="s">&#39;GLS&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pvalues</span><span class="p">,</span>
                 <span class="s">&#39;GLSAR&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pvalues</span><span class="p">,</span>
                 <span class="s">&#39;WLS&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pvalues</span><span class="p">,</span>
                 <span class="s">&#39;RLM&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pvalues</span><span class="p">,</span>
                 <span class="s">&#39;GLM&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pvalues</span>
                <span class="p">}</span>
    <span class="c">#Dictionary to store the header names for the parameter part of the</span>
    <span class="c">#summary table. look up by modeltype</span>
    <span class="n">alp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">((</span><span class="mi">1</span><span class="o">-</span><span class="n">alpha</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;%&#39;</span>
    <span class="n">param_header</span> <span class="o">=</span> <span class="p">{</span>
         <span class="s">&#39;OLS&#39;</span>   <span class="p">:</span> <span class="p">[</span><span class="s">&#39;coef&#39;</span><span class="p">,</span> <span class="s">&#39;std err&#39;</span><span class="p">,</span> <span class="s">&#39;t&#39;</span><span class="p">,</span> <span class="s">&#39;P&gt;|t|&#39;</span><span class="p">,</span> <span class="n">alp</span> <span class="o">+</span> <span class="s">&#39; Conf. Interval&#39;</span><span class="p">],</span>
         <span class="s">&#39;GLS&#39;</span>   <span class="p">:</span> <span class="p">[</span><span class="s">&#39;coef&#39;</span><span class="p">,</span> <span class="s">&#39;std err&#39;</span><span class="p">,</span> <span class="s">&#39;t&#39;</span><span class="p">,</span> <span class="s">&#39;P&gt;|t|&#39;</span><span class="p">,</span> <span class="n">alp</span> <span class="o">+</span> <span class="s">&#39; Conf. Interval&#39;</span><span class="p">],</span>
         <span class="s">&#39;GLSAR&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s">&#39;coef&#39;</span><span class="p">,</span> <span class="s">&#39;std err&#39;</span><span class="p">,</span> <span class="s">&#39;t&#39;</span><span class="p">,</span> <span class="s">&#39;P&gt;|t|&#39;</span><span class="p">,</span> <span class="n">alp</span> <span class="o">+</span> <span class="s">&#39; Conf. Interval&#39;</span><span class="p">],</span>
         <span class="s">&#39;WLS&#39;</span>   <span class="p">:</span> <span class="p">[</span><span class="s">&#39;coef&#39;</span><span class="p">,</span> <span class="s">&#39;std err&#39;</span><span class="p">,</span> <span class="s">&#39;t&#39;</span><span class="p">,</span> <span class="s">&#39;P&gt;|t|&#39;</span><span class="p">,</span> <span class="n">alp</span> <span class="o">+</span> <span class="s">&#39; Conf. Interval&#39;</span><span class="p">],</span>
         <span class="s">&#39;GLM&#39;</span>   <span class="p">:</span> <span class="p">[</span><span class="s">&#39;coef&#39;</span><span class="p">,</span> <span class="s">&#39;std err&#39;</span><span class="p">,</span> <span class="s">&#39;t&#39;</span><span class="p">,</span> <span class="s">&#39;P&gt;|t|&#39;</span><span class="p">,</span> <span class="n">alp</span> <span class="o">+</span> <span class="s">&#39; Conf. Interval&#39;</span><span class="p">],</span> <span class="c">#glm uses t-distribution</span>
         <span class="s">&#39;RLM&#39;</span>   <span class="p">:</span> <span class="p">[</span><span class="s">&#39;coef&#39;</span><span class="p">,</span> <span class="s">&#39;std err&#39;</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">,</span> <span class="s">&#39;P&gt;|z|&#39;</span><span class="p">,</span> <span class="n">alp</span> <span class="o">+</span> <span class="s">&#39; Conf. Interval&#39;</span><span class="p">]</span>  <span class="c">#checke z</span>
                   <span class="p">}</span>
    <span class="n">params_stubs</span> <span class="o">=</span> <span class="n">xname</span>
    <span class="n">params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span>
    <span class="n">conf_int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf_int</span><span class="p">(</span><span class="n">alpha</span><span class="p">)</span>
    <span class="n">std_err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bse</span>
    <span class="n">exog_len</span> <span class="o">=</span> <span class="n">lrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">xname</span><span class="p">))</span>
    <span class="n">tstat</span> <span class="o">=</span> <span class="n">tstats</span><span class="p">[</span><span class="n">modeltype</span><span class="p">]</span>
    <span class="n">prob_stat</span> <span class="o">=</span> <span class="n">prob_stats</span><span class="p">[</span><span class="n">modeltype</span><span class="p">]</span>

    <span class="c"># Simpletable should be able to handle the formating</span>
    <span class="n">params_data</span> <span class="o">=</span> <span class="n">lzip</span><span class="p">([</span><span class="s">&quot;</span><span class="si">%#6.4g</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">exog_len</span><span class="p">],</span>
                       <span class="p">[</span><span class="s">&quot;</span><span class="si">%#6.4f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">std_err</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">exog_len</span><span class="p">],</span>
                       <span class="p">[</span><span class="s">&quot;</span><span class="si">%#6.4f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tstat</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">exog_len</span><span class="p">],</span>
                       <span class="p">[</span><span class="s">&quot;</span><span class="si">%#6.4f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">prob_stat</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">exog_len</span><span class="p">],</span>
                       <span class="p">[</span><span class="s">&quot;(</span><span class="si">%#5g</span><span class="s">, </span><span class="si">%#5g</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">conf_int</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> \
                                                             <span class="n">exog_len</span><span class="p">]</span>
                      <span class="p">)</span>
    <span class="n">parameter_table</span> <span class="o">=</span> <span class="n">SimpleTable</span><span class="p">(</span><span class="n">params_data</span><span class="p">,</span>
                                  <span class="n">param_header</span><span class="p">[</span><span class="n">modeltype</span><span class="p">],</span>
                                  <span class="n">params_stubs</span><span class="p">,</span>
                                  <span class="n">title</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                                  <span class="n">txt_fmt</span> <span class="o">=</span> <span class="n">fmt_2</span><span class="p">,</span> <span class="c">#gen_fmt,</span>
                                  <span class="p">)</span>

    <span class="c">#special table</span>
    <span class="c">#-------------</span>
    <span class="c">#TODO: exists in linear_model, what about other models</span>
    <span class="c">#residual diagnostics</span>


    <span class="c">#output options</span>
    <span class="c">#--------------</span>
    <span class="c">#TODO: JP the rest needs to be fixed, similar to summary in linear_model</span>

    <span class="k">def</span> <span class="nf">ols_printer</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        print summary table for ols models</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">table</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">general_table</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">parameter_table</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">table</span>

    <span class="k">def</span> <span class="nf">ols_to_csv</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        exports ols summary data to csv</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
    <span class="k">def</span> <span class="nf">glm_printer</span><span class="p">():</span>
        <span class="n">table</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">general_table</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">parameter_table</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">table</span>
        <span class="k">pass</span>

    <span class="n">printers</span>  <span class="o">=</span> <span class="p">{</span><span class="s">&#39;OLS&#39;</span><span class="p">:</span> <span class="n">ols_printer</span><span class="p">,</span>
                <span class="s">&#39;GLM&#39;</span> <span class="p">:</span> <span class="n">glm_printer</span>
                <span class="p">}</span>

    <span class="k">if</span> <span class="n">returns</span><span class="o">==</span><span class="s">&#39;print&#39;</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">printers</span><span class="p">[</span><span class="n">modeltype</span><span class="p">]()</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">printers</span><span class="p">[</span><span class="s">&#39;OLS&#39;</span><span class="p">]()</span>

<span class="k">def</span> <span class="nf">_getnames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yname</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">xname</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;extract names from model or construct names</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">yname</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="s">&#39;endog_names&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
               <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">endog_names</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
            <span class="n">yname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">endog_names</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">yname</span> <span class="o">=</span> <span class="s">&#39;y&#39;</span>

    <span class="k">if</span> <span class="n">xname</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="s">&#39;exog_names&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
               <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">exog_names</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
            <span class="n">xname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">exog_names</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xname</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;var_</span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">))]</span>

    <span class="k">return</span> <span class="n">yname</span><span class="p">,</span> <span class="n">xname</span>



<span class="k">def</span> <span class="nf">summary_top</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">gleft</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">gright</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">yname</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">xname</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;generate top table(s)</span>


<span class="sd">    TODO: this still uses predefined model_methods</span>
<span class="sd">    ? allow gleft, gright to be 1 element tuples instead of filling with None?</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c">#change of names ?</span>
    <span class="n">gen_left</span><span class="p">,</span> <span class="n">gen_right</span> <span class="o">=</span> <span class="n">gleft</span><span class="p">,</span> <span class="n">gright</span>

    <span class="c">#time and names are always included</span>
    <span class="kn">import</span> <span class="nn">time</span>
    <span class="n">time_now</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">()</span>
    <span class="n">time_of_day</span> <span class="o">=</span> <span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%H:%M:%S&quot;</span><span class="p">,</span> <span class="n">time_now</span><span class="p">)]</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%a, </span><span class="si">%d</span><span class="s"> %b %Y&quot;</span><span class="p">,</span> <span class="n">time_now</span><span class="p">)</span>

    <span class="n">yname</span><span class="p">,</span> <span class="n">xname</span> <span class="o">=</span> <span class="n">_getnames</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">yname</span><span class="o">=</span><span class="n">yname</span><span class="p">,</span> <span class="n">xname</span><span class="o">=</span><span class="n">xname</span><span class="p">)</span>

    <span class="c">#create dictionary with default</span>
    <span class="c">#use lambdas because some values raise exception if they are not available</span>
    <span class="c">#alternate spellings are commented out to force unique labels</span>
    <span class="n">default_items</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([</span>
          <span class="p">(</span><span class="s">&#39;Dependent Variable:&#39;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">yname</span><span class="p">]),</span>
          <span class="p">(</span><span class="s">&#39;Dep. Variable:&#39;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">yname</span><span class="p">]),</span>
          <span class="p">(</span><span class="s">&#39;Model:&#39;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">results</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">]),</span>
          <span class="c">#(&#39;Model type:&#39;, lambda: [results.model.__class__.__name__]),</span>
          <span class="p">(</span><span class="s">&#39;Date:&#39;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">date</span><span class="p">]),</span>
          <span class="p">(</span><span class="s">&#39;Time:&#39;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">time_of_day</span><span class="p">),</span>
          <span class="p">(</span><span class="s">&#39;Number of Obs:&#39;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">results</span><span class="o">.</span><span class="n">nobs</span><span class="p">]),</span>
          <span class="c">#(&#39;No. of Observations:&#39;, lambda: [&quot;%#6d&quot; % results.nobs]),</span>
          <span class="p">(</span><span class="s">&#39;No. Observations:&#39;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;</span><span class="si">%#6d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">results</span><span class="o">.</span><span class="n">nobs</span><span class="p">]),</span>
          <span class="c">#(&#39;Df model:&#39;, lambda: [results.df_model]),</span>
          <span class="p">(</span><span class="s">&#39;Df Model:&#39;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;</span><span class="si">%#6d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">results</span><span class="o">.</span><span class="n">df_model</span><span class="p">]),</span>
          <span class="c">#TODO: check when we have non-integer df</span>
          <span class="p">(</span><span class="s">&#39;Df Residuals:&#39;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;</span><span class="si">%#6d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">results</span><span class="o">.</span><span class="n">df_resid</span><span class="p">]),</span>
          <span class="c">#(&#39;Df resid:&#39;, lambda: [results.df_resid]),</span>
          <span class="c">#(&#39;df resid:&#39;, lambda: [results.df_resid]), #check capitalization</span>
          <span class="p">(</span><span class="s">&#39;Log-Likelihood:&#39;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;</span><span class="si">%#8.5g</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">results</span><span class="o">.</span><span class="n">llf</span><span class="p">])</span> <span class="c">#doesn&#39;t exist for RLM - exception</span>
          <span class="c">#(&#39;Method:&#39;, lambda: [???]), #no default for this</span>
          <span class="p">])</span>

    <span class="k">if</span> <span class="n">title</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span> <span class="o">+</span> <span class="s">&#39;Regression Results&#39;</span>

    <span class="k">if</span> <span class="n">gen_left</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c">#default: General part of the summary table, Applicable to all? models</span>
        <span class="n">gen_left</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;Dep. Variable:&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span>
                    <span class="p">(</span><span class="s">&#39;Model type:&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span>
                    <span class="p">(</span><span class="s">&#39;Date:&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span>
                    <span class="p">(</span><span class="s">&#39;No. Observations:&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span>
                    <span class="p">(</span><span class="s">&#39;Df model:&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span>
                    <span class="p">(</span><span class="s">&#39;Df resid:&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">llf</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">llf</span>
            <span class="n">gen_left</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">&#39;Log-Likelihood&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span> <span class="c">#AttributeError, NotImplementedError</span>
            <span class="k">pass</span>

        <span class="n">gen_right</span> <span class="o">=</span> <span class="p">[]</span>


    <span class="n">gen_title</span> <span class="o">=</span> <span class="n">title</span>
    <span class="n">gen_header</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="c">#needed_values = [k for k,v in gleft + gright if v is None] #not used anymore</span>
    <span class="c">#replace missing (None) values with default values</span>
    <span class="n">gen_left_</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">gen_left</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">default_items</span><span class="p">[</span><span class="n">item</span><span class="p">]()</span>  <span class="c">#let KeyErrors raise exception</span>
        <span class="n">gen_left_</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">item</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
    <span class="n">gen_left</span> <span class="o">=</span> <span class="n">gen_left_</span>

    <span class="k">if</span> <span class="n">gen_right</span><span class="p">:</span>
        <span class="n">gen_right_</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">gen_right</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">default_items</span><span class="p">[</span><span class="n">item</span><span class="p">]()</span>  <span class="c">#let KeyErrors raise exception</span>
            <span class="n">gen_right_</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">item</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
        <span class="n">gen_right</span> <span class="o">=</span> <span class="n">gen_right_</span>

    <span class="c">#check</span>
    <span class="n">missing_values</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">gen_left</span> <span class="o">+</span> <span class="n">gen_right</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">missing_values</span> <span class="o">==</span> <span class="p">[],</span> <span class="n">missing_values</span>

    <span class="c">#pad both tables to equal number of rows</span>
    <span class="k">if</span> <span class="n">gen_right</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gen_right</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">gen_left</span><span class="p">):</span>
            <span class="c">#fill up with blank lines to same length</span>
            <span class="n">gen_right</span> <span class="o">+=</span> <span class="p">[(</span><span class="s">&#39; &#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">)]</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">gen_left</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">gen_right</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">gen_right</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">gen_left</span><span class="p">):</span>
            <span class="c">#fill up with blank lines to same length, just to keep it symmetric</span>
            <span class="n">gen_left</span> <span class="o">+=</span> <span class="p">[(</span><span class="s">&#39; &#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">)]</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">gen_right</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">gen_left</span><span class="p">))</span>

        <span class="c">#padding in SimpleTable doesn&#39;t work like I want</span>
        <span class="c">#force extra spacing and exact string length in right table</span>
        <span class="n">gen_right</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;</span><span class="si">%-21s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s">&#39;  &#39;</span><span class="o">+</span><span class="n">k</span><span class="p">),</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">gen_right</span><span class="p">]</span>
        <span class="n">gen_stubs_right</span><span class="p">,</span> <span class="n">gen_data_right</span> <span class="o">=</span> <span class="n">zip_longest</span><span class="p">(</span><span class="o">*</span><span class="n">gen_right</span><span class="p">)</span> <span class="c">#transpose row col</span>
        <span class="n">gen_table_right</span> <span class="o">=</span> <span class="n">SimpleTable</span><span class="p">(</span><span class="n">gen_data_right</span><span class="p">,</span>
                                      <span class="n">gen_header</span><span class="p">,</span>
                                      <span class="n">gen_stubs_right</span><span class="p">,</span>
                                      <span class="n">title</span> <span class="o">=</span> <span class="n">gen_title</span><span class="p">,</span>
                                      <span class="n">txt_fmt</span> <span class="o">=</span> <span class="n">fmt_2cols</span> <span class="c">#gen_fmt</span>
                                      <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">gen_table_right</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c">#because .extend_right seems works with []</span>


    <span class="c">#moved below so that we can pad if needed to match length of gen_right</span>
    <span class="c">#transpose rows and columns, `unzip`</span>
    <span class="n">gen_stubs_left</span><span class="p">,</span> <span class="n">gen_data_left</span> <span class="o">=</span> <span class="n">zip_longest</span><span class="p">(</span><span class="o">*</span><span class="n">gen_left</span><span class="p">)</span> <span class="c">#transpose row col</span>

    <span class="n">gen_table_left</span> <span class="o">=</span> <span class="n">SimpleTable</span><span class="p">(</span><span class="n">gen_data_left</span><span class="p">,</span>
                                 <span class="n">gen_header</span><span class="p">,</span>
                                 <span class="n">gen_stubs_left</span><span class="p">,</span>
                                 <span class="n">title</span> <span class="o">=</span> <span class="n">gen_title</span><span class="p">,</span>
                                 <span class="n">txt_fmt</span> <span class="o">=</span> <span class="n">fmt_2cols</span>
                                 <span class="p">)</span>

    <span class="n">gen_table_left</span><span class="o">.</span><span class="n">extend_right</span><span class="p">(</span><span class="n">gen_table_right</span><span class="p">)</span>
    <span class="n">general_table</span> <span class="o">=</span> <span class="n">gen_table_left</span>

    <span class="k">return</span> <span class="n">general_table</span> <span class="c">#, gen_table_left, gen_table_right</span>



<span class="k">def</span> <span class="nf">summary_params</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">yname</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">xname</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=.</span><span class="mo">05</span><span class="p">,</span> <span class="n">use_t</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                   <span class="n">skip_header</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;create a summary table for the parameters</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    res : results instance</span>
<span class="sd">        some required information is directly taken from the result</span>
<span class="sd">        instance</span>
<span class="sd">    yname : string or None</span>
<span class="sd">        optional name for the endogenous variable, default is &quot;y&quot;</span>
<span class="sd">    xname : list of strings or None</span>
<span class="sd">        optional names for the exogenous variables, default is &quot;var_xx&quot;</span>
<span class="sd">    alpha : float</span>
<span class="sd">        significance level for the confidence intervals</span>
<span class="sd">    use_t : bool</span>
<span class="sd">        indicator whether the p-values are based on the Student-t</span>
<span class="sd">        distribution (if True) or on the normal distribution (if False)</span>
<span class="sd">    skip_headers : bool</span>
<span class="sd">        If false (default), then the header row is added. If true, then no</span>
<span class="sd">        header row is added.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    params_table : SimpleTable instance</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c">#Parameters part of the summary table</span>
    <span class="c">#------------------------------------</span>
    <span class="c">#Note: this is not necessary since we standardized names, only t versus normal</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="c">#for multivariate endog</span>
        <span class="c">#TODO: check whether I don&#39;t want to refactor this</span>
        <span class="c">#we need to give parameter alpha to conf_int</span>
        <span class="n">results</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">std_err</span><span class="p">,</span> <span class="n">tvalues</span><span class="p">,</span> <span class="n">pvalues</span><span class="p">,</span> <span class="n">conf_int</span> <span class="o">=</span> <span class="n">results</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">params</span>
        <span class="n">std_err</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">bse</span>
        <span class="n">tvalues</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">tvalues</span>  <span class="c">#is this sometimes called zvalues</span>
        <span class="n">pvalues</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">pvalues</span>
        <span class="n">conf_int</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">conf_int</span><span class="p">(</span><span class="n">alpha</span><span class="p">)</span>


    <span class="c">#Dictionary to store the header names for the parameter part of the</span>
    <span class="c">#summary table. look up by modeltype</span>
    <span class="n">alp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">((</span><span class="mi">1</span><span class="o">-</span><span class="n">alpha</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;%&#39;</span>
    <span class="k">if</span> <span class="n">use_t</span><span class="p">:</span>
        <span class="n">param_header</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;coef&#39;</span><span class="p">,</span> <span class="s">&#39;std err&#39;</span><span class="p">,</span> <span class="s">&#39;t&#39;</span><span class="p">,</span> <span class="s">&#39;P&gt;|t|&#39;</span><span class="p">,</span>
                        <span class="s">&#39;[&#39;</span> <span class="o">+</span> <span class="n">alp</span> <span class="o">+</span> <span class="s">&#39; Conf. Int.]&#39;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">param_header</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;coef&#39;</span><span class="p">,</span> <span class="s">&#39;std err&#39;</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">,</span> <span class="s">&#39;P&gt;|z|&#39;</span><span class="p">,</span>
                        <span class="s">&#39;[&#39;</span> <span class="o">+</span> <span class="n">alp</span> <span class="o">+</span> <span class="s">&#39; Conf. Int.]&#39;</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">skip_header</span><span class="p">:</span>
        <span class="n">param_header</span> <span class="o">=</span> <span class="bp">None</span>


    <span class="n">_</span><span class="p">,</span> <span class="n">xname</span> <span class="o">=</span> <span class="n">_getnames</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">yname</span><span class="o">=</span><span class="n">yname</span><span class="p">,</span> <span class="n">xname</span><span class="o">=</span><span class="n">xname</span><span class="p">)</span>

    <span class="n">params_stubs</span> <span class="o">=</span> <span class="n">xname</span>

    <span class="n">exog_idx</span> <span class="o">=</span> <span class="n">lrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">xname</span><span class="p">))</span>

    <span class="c">#center confidence intervals if they are unequal lengths</span>
<span class="c">#    confint = [&quot;(%#6.3g, %#6.3g)&quot; % tuple(conf_int[i]) for i in \</span>
<span class="c">#                                                             exog_idx]</span>
    <span class="n">confint</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">lmap</span><span class="p">(</span><span class="n">forg</span><span class="p">,</span> <span class="n">conf_int</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> \
                                                             <span class="n">exog_idx</span><span class="p">]</span>
    <span class="n">len_ci</span> <span class="o">=</span> <span class="n">lmap</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="n">confint</span><span class="p">)</span>
    <span class="n">max_ci</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">len_ci</span><span class="p">)</span>
    <span class="n">min_ci</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">len_ci</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">min_ci</span> <span class="o">&lt;</span> <span class="n">max_ci</span><span class="p">:</span>
        <span class="n">confint</span> <span class="o">=</span> <span class="p">[</span><span class="n">ci</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="n">max_ci</span><span class="p">)</span> <span class="k">for</span> <span class="n">ci</span> <span class="ow">in</span> <span class="n">confint</span><span class="p">]</span>

    <span class="c">#explicit f/g formatting, now uses forg, f or g depending on values</span>
<span class="c">#    params_data = lzip([&quot;%#6.4g&quot; % (params[i]) for i in exog_idx],</span>
<span class="c">#                       [&quot;%#6.4f&quot; % (std_err[i]) for i in exog_idx],</span>
<span class="c">#                       [&quot;%#6.3f&quot; % (tvalues[i]) for i in exog_idx],</span>
<span class="c">#                       [&quot;%#6.3f&quot; % (pvalues[i]) for i in exog_idx],</span>
<span class="c">#                       confint</span>
<span class="c">##                       [&quot;(%#6.3g, %#6.3g)&quot; % tuple(conf_int[i]) for i in \</span>
<span class="c">##                                                             exog_idx]</span>
<span class="c">#                      )</span>

    <span class="n">params_data</span> <span class="o">=</span> <span class="n">lzip</span><span class="p">([</span><span class="n">forg</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">prec</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">exog_idx</span><span class="p">],</span>
                       <span class="p">[</span><span class="n">forg</span><span class="p">(</span><span class="n">std_err</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">exog_idx</span><span class="p">],</span>
                       <span class="p">[</span><span class="n">forg</span><span class="p">(</span><span class="n">tvalues</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">exog_idx</span><span class="p">],</span>
                       <span class="p">[</span><span class="s">&quot;</span><span class="si">%#6.3f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pvalues</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">exog_idx</span><span class="p">],</span>
                       <span class="n">confint</span>
<span class="c">#                       [&quot;(%#6.3g, %#6.3g)&quot; % tuple(conf_int[i]) for i in \</span>
<span class="c">#                                                             exog_idx]</span>
                      <span class="p">)</span>
    <span class="n">parameter_table</span> <span class="o">=</span> <span class="n">SimpleTable</span><span class="p">(</span><span class="n">params_data</span><span class="p">,</span>
                                  <span class="n">param_header</span><span class="p">,</span>
                                  <span class="n">params_stubs</span><span class="p">,</span>
                                  <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">,</span>
                                  <span class="n">txt_fmt</span> <span class="o">=</span> <span class="n">fmt_params</span> <span class="c">#gen_fmt #fmt_2, #gen_fmt,</span>
                                  <span class="p">)</span>

    <span class="k">return</span> <span class="n">parameter_table</span>


<span class="k">def</span> <span class="nf">summary_params_frame</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">yname</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">xname</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=.</span><span class="mo">05</span><span class="p">,</span>
                         <span class="n">use_t</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;create a summary table for the parameters</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    res : results instance</span>
<span class="sd">        some required information is directly taken from the result</span>
<span class="sd">        instance</span>
<span class="sd">    yname : string or None</span>
<span class="sd">        optional name for the endogenous variable, default is &quot;y&quot;</span>
<span class="sd">    xname : list of strings or None</span>
<span class="sd">        optional names for the exogenous variables, default is &quot;var_xx&quot;</span>
<span class="sd">    alpha : float</span>
<span class="sd">        significance level for the confidence intervals</span>
<span class="sd">    use_t : bool</span>
<span class="sd">        indicator whether the p-values are based on the Student-t</span>
<span class="sd">        distribution (if True) or on the normal distribution (if False)</span>
<span class="sd">    skip_headers : bool</span>
<span class="sd">        If false (default), then the header row is added. If true, then no</span>
<span class="sd">        header row is added.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    params_table : SimpleTable instance</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c">#Parameters part of the summary table</span>
    <span class="c">#------------------------------------</span>
    <span class="c">#Note: this is not necessary since we standardized names, only t versus normal</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="c">#for multivariate endog</span>
        <span class="c">#TODO: check whether I don&#39;t want to refactor this</span>
        <span class="c">#we need to give parameter alpha to conf_int</span>
        <span class="n">results</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">std_err</span><span class="p">,</span> <span class="n">tvalues</span><span class="p">,</span> <span class="n">pvalues</span><span class="p">,</span> <span class="n">conf_int</span> <span class="o">=</span> <span class="n">results</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">params</span>
        <span class="n">std_err</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">bse</span>
        <span class="n">tvalues</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">tvalues</span>  <span class="c">#is this sometimes called zvalues</span>
        <span class="n">pvalues</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">pvalues</span>
        <span class="n">conf_int</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">conf_int</span><span class="p">(</span><span class="n">alpha</span><span class="p">)</span>


    <span class="c">#Dictionary to store the header names for the parameter part of the</span>
    <span class="c">#summary table. look up by modeltype</span>
    <span class="n">alp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">((</span><span class="mi">1</span><span class="o">-</span><span class="n">alpha</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;%&#39;</span>
    <span class="k">if</span> <span class="n">use_t</span><span class="p">:</span>
        <span class="n">param_header</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;coef&#39;</span><span class="p">,</span> <span class="s">&#39;std err&#39;</span><span class="p">,</span> <span class="s">&#39;t&#39;</span><span class="p">,</span> <span class="s">&#39;P&gt;|t|&#39;</span><span class="p">,</span>
                        <span class="s">&#39;Conf. Int. Low&#39;</span><span class="p">,</span> <span class="s">&#39;Conf. Int. Upp.&#39;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">param_header</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;coef&#39;</span><span class="p">,</span> <span class="s">&#39;std err&#39;</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">,</span> <span class="s">&#39;P&gt;|z|&#39;</span><span class="p">,</span>
                        <span class="s">&#39;Conf. Int. Low&#39;</span><span class="p">,</span> <span class="s">&#39;Conf. Int. Upp.&#39;</span><span class="p">]</span>

    <span class="n">_</span><span class="p">,</span> <span class="n">xname</span> <span class="o">=</span> <span class="n">_getnames</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">yname</span><span class="o">=</span><span class="n">yname</span><span class="p">,</span> <span class="n">xname</span><span class="o">=</span><span class="n">xname</span><span class="p">)</span>


    <span class="c">#------------------</span>

    <span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">DataFrame</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">params</span><span class="p">,</span> <span class="n">std_err</span><span class="p">,</span> <span class="n">tvalues</span><span class="p">,</span> <span class="n">pvalues</span><span class="p">,</span> <span class="n">conf_int</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">param_header</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">xname</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">summary_params_2d</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">extras</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">endog_names</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">exog_names</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                      <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;create summary table of regression parameters with several equations</span>

<span class="sd">    This allows interleaving of parameters with bse and/or tvalues</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    result : result instance</span>
<span class="sd">        the result instance with params and attributes in extras</span>
<span class="sd">    extras : list of strings</span>
<span class="sd">        additional attributes to add below a parameter row, e.g. bse or tvalues</span>
<span class="sd">    endog_names : None or list of strings</span>
<span class="sd">        names for rows of the parameter array (multivariate endog)</span>
<span class="sd">    exog_names : None or list of strings</span>
<span class="sd">        names for columns of the parameter array (exog)</span>
<span class="sd">    alpha : float</span>
<span class="sd">        level for confidence intervals, default 0.95</span>
<span class="sd">    title : None or string</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    tables : list of SimpleTable</span>
<span class="sd">        this contains a list of all seperate Subtables</span>
<span class="sd">    table_all : SimpleTable</span>
<span class="sd">        the merged table with results concatenated for each row of the parameter</span>
<span class="sd">        array</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">endog_names</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c">#TODO: note the [1:] is specific to current MNLogit</span>
        <span class="n">endog_names</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;endog_</span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span>
                            <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">endog</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]]</span>
    <span class="k">if</span> <span class="n">exog_names</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exog_names</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;var</span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">params</span><span class="p">))]</span>

    <span class="c">#TODO: check formatting options with different values</span>
    <span class="c">#res_params = [[&#39;%10.4f&#39;%item for item in row] for row in result.params]</span>
    <span class="n">res_params</span> <span class="o">=</span> <span class="p">[[</span><span class="n">forg</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">prec</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">params</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">extras</span><span class="p">:</span> <span class="c">#not None or non-empty</span>
        <span class="c">#maybe this should be a simple triple loop instead of list comprehension?</span>
        <span class="c">#below_list = [[[&#39;%10s&#39; % (&#39;(&#39;+(&#39;%10.3f&#39;%v).strip()+&#39;)&#39;)</span>
        <span class="n">extras_list</span> <span class="o">=</span> <span class="p">[[[</span><span class="s">&#39;</span><span class="si">%10s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s">&#39;(&#39;</span> <span class="o">+</span> <span class="n">forg</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">prec</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">+</span> <span class="s">&#39;)&#39;</span><span class="p">)</span>
                                <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">col</span><span class="p">]</span>
                                <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">what</span><span class="p">)]</span>
                                <span class="k">for</span> <span class="n">what</span> <span class="ow">in</span> <span class="n">extras</span>
                                <span class="p">]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">lzip</span><span class="p">(</span><span class="n">res_params</span><span class="p">,</span> <span class="o">*</span><span class="n">extras_list</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">j</span><span class="p">]</span>  <span class="c">#flatten</span>
        <span class="n">stubs</span> <span class="o">=</span> <span class="n">lzip</span><span class="p">(</span><span class="n">endog_names</span><span class="p">,</span> <span class="o">*</span><span class="p">[[</span><span class="s">&#39;&#39;</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">endog_names</span><span class="p">)]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">extras</span><span class="p">))</span>
        <span class="n">stubs</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">stubs</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">j</span><span class="p">]</span> <span class="c">#flatten</span>
        <span class="c">#return SimpleTable(data, headers=exog_names, stubs=stubs)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">res_params</span>
        <span class="n">stubs</span> <span class="o">=</span> <span class="n">endog_names</span>
<span class="c">#        return SimpleTable(data, headers=exog_names, stubs=stubs,</span>
<span class="c">#                       data_fmts=[&#39;%10.4f&#39;])</span>

    <span class="kn">import</span> <span class="nn">copy</span>
    <span class="n">txt_fmt</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">fmt_params</span><span class="p">)</span>
    <span class="n">txt_fmt</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">data_fmts</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span><span class="p">]</span><span class="o">*</span><span class="n">result</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
    <span class="k">return</span> <span class="n">SimpleTable</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">exog_names</span><span class="p">,</span>
                             <span class="n">stubs</span><span class="o">=</span><span class="n">stubs</span><span class="p">,</span>
                             <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
<span class="c">#                             data_fmts = [&quot;%s&quot;]),</span>
                             <span class="n">txt_fmt</span> <span class="o">=</span> <span class="n">txt_fmt</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">summary_params_2dflat</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">endog_names</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">exog_names</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span>
                          <span class="n">use_t</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">keep_headers</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">endog_cols</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
                          <span class="c">#skip_headers2=True):</span>
    <span class="sd">&#39;&#39;&#39;summary table for parameters that are 2d, e.g. multi-equation models</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    result : result instance</span>
<span class="sd">        the result instance with params, bse, tvalues and conf_int</span>
<span class="sd">    endog_names : None or list of strings</span>
<span class="sd">        names for rows of the parameter array (multivariate endog)</span>
<span class="sd">    exog_names : None or list of strings</span>
<span class="sd">        names for columns of the parameter array (exog)</span>
<span class="sd">    alpha : float</span>
<span class="sd">        level for confidence intervals, default 0.95</span>
<span class="sd">    use_t : bool</span>
<span class="sd">        indicator whether the p-values are based on the Student-t</span>
<span class="sd">        distribution (if True) or on the normal distribution (if False)</span>
<span class="sd">    keep_headers : bool</span>
<span class="sd">        If true (default), then sub-tables keep their headers. If false, then</span>
<span class="sd">        only the first headers are kept, the other headerse are blanked out</span>
<span class="sd">    endog_cols : bool</span>
<span class="sd">        If false (default) then params and other result statistics have</span>
<span class="sd">        equations by rows. If true, then equations are assumed to be in columns.</span>
<span class="sd">        Not implemented yet.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    tables : list of SimpleTable</span>
<span class="sd">        this contains a list of all seperate Subtables</span>
<span class="sd">    table_all : SimpleTable</span>
<span class="sd">        the merged table with results concatenated for each row of the parameter</span>
<span class="sd">        array</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">res</span> <span class="o">=</span> <span class="n">result</span>
    <span class="n">params</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">params</span>
    <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span> <span class="c"># we&#39;ve got multiple equations</span>
        <span class="n">n_equ</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">endog_names</span><span class="p">)</span> <span class="o">==</span> <span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;endog_names has wrong length&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">endog_names</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">params</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;endog_names has wrong length&#39;</span><span class="p">)</span>
        <span class="n">n_equ</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="c">#VAR doesn&#39;t have conf_int</span>
    <span class="c">#params = res.params.T # this is a convention for multi-eq models</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">endog_names</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="c">#this might be specific to multinomial logit type, move?</span>
        <span class="k">if</span> <span class="n">endog_names</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">endog_basename</span> <span class="o">=</span> <span class="s">&#39;endog&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">endog_basename</span> <span class="o">=</span> <span class="n">endog_names</span>
        <span class="c">#TODO: note, the [1:] is specific to current MNLogit</span>
        <span class="n">endog_names</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">endog_names</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

    <span class="c">#check if we have the right length of names</span>

    <span class="n">tables</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">eq</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_equ</span><span class="p">):</span>
        <span class="n">restup</span> <span class="o">=</span> <span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">params</span><span class="p">[:,</span><span class="n">eq</span><span class="p">],</span> <span class="n">res</span><span class="o">.</span><span class="n">bse</span><span class="p">[:,</span><span class="n">eq</span><span class="p">],</span> <span class="n">res</span><span class="o">.</span><span class="n">tvalues</span><span class="p">[:,</span><span class="n">eq</span><span class="p">],</span>
                  <span class="n">res</span><span class="o">.</span><span class="n">pvalues</span><span class="p">[:,</span><span class="n">eq</span><span class="p">],</span> <span class="n">res</span><span class="o">.</span><span class="n">conf_int</span><span class="p">(</span><span class="n">alpha</span><span class="p">)[</span><span class="n">eq</span><span class="p">])</span>

        <span class="c">#not used anymore in current version</span>
<span class="c">#        if skip_headers2:</span>
<span class="c">#            skiph = (row != 0)</span>
<span class="c">#        else:</span>
<span class="c">#            skiph = False</span>
        <span class="n">skiph</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">tble</span> <span class="o">=</span> <span class="n">summary_params</span><span class="p">(</span><span class="n">restup</span><span class="p">,</span> <span class="n">yname</span><span class="o">=</span><span class="n">endog_names</span><span class="p">[</span><span class="n">eq</span><span class="p">],</span>
                              <span class="n">xname</span><span class="o">=</span><span class="n">exog_names</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="n">use_t</span><span class="o">=</span><span class="n">use_t</span><span class="p">,</span>
                              <span class="n">skip_header</span><span class="o">=</span><span class="n">skiph</span><span class="p">)</span>

        <span class="n">tables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tble</span><span class="p">)</span>

    <span class="c">#add titles, they will be moved to header lines in table_extend</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">endog_names</span><span class="p">)):</span>
        <span class="n">tables</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">endog_names</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

    <span class="n">table_all</span> <span class="o">=</span> <span class="n">table_extend</span><span class="p">(</span><span class="n">tables</span><span class="p">,</span> <span class="n">keep_headers</span><span class="o">=</span><span class="n">keep_headers</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">tables</span><span class="p">,</span> <span class="n">table_all</span>


<span class="k">def</span> <span class="nf">table_extend</span><span class="p">(</span><span class="n">tables</span><span class="p">,</span> <span class="n">keep_headers</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;extend a list of SimpleTables, adding titles to header of subtables</span>

<span class="sd">    This function returns the merged table as a deepcopy, in contrast to the</span>
<span class="sd">    SimpleTable extend method.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    tables : list of SimpleTable instances</span>
<span class="sd">    keep_headers : bool</span>
<span class="sd">        If true, then all headers are kept. If falls, then the headers of</span>
<span class="sd">        subtables are blanked out.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    table_all : SimpleTable</span>
<span class="sd">        merged tables as a single SimpleTable instance</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
    <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tables</span><span class="p">[:]):</span> <span class="c">#[1:]:</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

        <span class="c">#move title to first cell of header</span>
        <span class="c">#TODO: check if we have multiline headers</span>
        <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">datatype</span> <span class="o">==</span> <span class="s">&#39;header&#39;</span><span class="p">:</span>
            <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">title</span>
            <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">_datatype</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">row</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">row</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">keep_headers</span> <span class="ow">and</span> <span class="p">(</span><span class="n">ii</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">:]:</span>
                    <span class="n">c</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

        <span class="c">#add separating line and extend tables</span>
        <span class="k">if</span> <span class="n">ii</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">table_all</span> <span class="o">=</span> <span class="n">t</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="n">table_all</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">r1</span><span class="o">.</span><span class="n">add_format</span><span class="p">(</span><span class="s">&#39;txt&#39;</span><span class="p">,</span> <span class="n">row_dec_below</span><span class="o">=</span><span class="s">&#39;-&#39;</span><span class="p">)</span>
            <span class="n">table_all</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

    <span class="n">table_all</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">return</span> <span class="n">table_all</span>


<span class="k">def</span> <span class="nf">summary_return</span><span class="p">(</span><span class="n">tables</span><span class="p">,</span> <span class="n">return_fmt</span><span class="o">=</span><span class="s">&#39;text&#39;</span><span class="p">):</span>
    <span class="c">########  Return Summary Tables ########</span>
        <span class="c"># join table parts then print</span>
    <span class="k">if</span> <span class="n">return_fmt</span> <span class="o">==</span> <span class="s">&#39;text&#39;</span><span class="p">:</span>
        <span class="n">strdrop</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c">#convert to string drop last line</span>
        <span class="k">return</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lmap</span><span class="p">(</span><span class="n">strdrop</span><span class="p">,</span> <span class="n">tables</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">tables</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])])</span>
    <span class="k">elif</span> <span class="n">return_fmt</span> <span class="o">==</span> <span class="s">&#39;tables&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">tables</span>
    <span class="k">elif</span> <span class="n">return_fmt</span> <span class="o">==</span> <span class="s">&#39;csv&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">as_csv</span><span class="p">(),</span> <span class="n">tables</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">return_fmt</span> <span class="o">==</span> <span class="s">&#39;latex&#39;</span><span class="p">:</span>
        <span class="c">#TODO: insert \hline after updating SimpleTable</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">tables</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">del</span> <span class="n">table</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">tables</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">table</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">table</span><span class="o">.</span><span class="n">as_latex_tabular</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">return_fmt</span> <span class="o">==</span> <span class="s">&#39;html&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">as_html</span><span class="p">()</span> <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tables</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;available output formats are text, csv, latex, html&#39;</span><span class="p">)</span>


<div class="viewcode-block" id="Summary"><a class="viewcode-back" href="../../../generated/statsmodels.iolib.summary.Summary.html#statsmodels.iolib.summary.Summary">[docs]</a><span class="k">class</span> <span class="nc">Summary</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;class to hold tables for result summary presentation</span>

<span class="sd">    Construction does not take any parameters. Tables and text can be added</span>
<span class="sd">    with the `add_` methods.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    tables : list of tables</span>
<span class="sd">        Contains the list of SimpleTable instances, horizontally concatenated tables are not saved separately.</span>
<span class="sd">    extra_txt : string</span>
<span class="sd">        extra lines that are added to the text output, used for warnings and explanations.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tables</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extra_txt</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">as_text</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">#return &#39;&lt;&#39; + str(type(self)) + &#39;&gt;\n&quot;&quot;&quot;\n&#39; + self.__str__() + &#39;\n&quot;&quot;&quot;&#39;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&quot;&quot;&quot;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__str__</span><span class="p">()</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&quot;&quot;&quot;&#39;</span>

    <span class="k">def</span> <span class="nf">_repr_html_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Display as HTML in IPython notebook.&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">as_html</span><span class="p">()</span>

<div class="viewcode-block" id="Summary.add_table_2cols"><a class="viewcode-back" href="../../../generated/statsmodels.iolib.summary.Summary.add_table_2cols.html#statsmodels.iolib.summary.Summary.add_table_2cols">[docs]</a>    <span class="k">def</span> <span class="nf">add_table_2cols</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">,</span>  <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">gleft</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">gright</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                            <span class="n">yname</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">xname</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;add a double table, 2 tables with one column merged horizontally</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        res : results instance</span>
<span class="sd">            some required information is directly taken from the result</span>
<span class="sd">            instance</span>
<span class="sd">        title : string or None</span>
<span class="sd">            if None, then a default title is used.</span>
<span class="sd">        gleft : list of tuples</span>
<span class="sd">            elements for the left table, tuples are (name, value) pairs</span>
<span class="sd">            If gleft is None, then a default table is created</span>
<span class="sd">        gright : list of tuples or None</span>
<span class="sd">            elements for the right table, tuples are (name, value) pairs</span>
<span class="sd">        yname : string or None</span>
<span class="sd">            optional name for the endogenous variable, default is &quot;y&quot;</span>
<span class="sd">        xname : list of strings or None</span>
<span class="sd">            optional names for the exogenous variables, default is &quot;var_xx&quot;</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None : tables are attached</span>

<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">summary_top</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">gleft</span><span class="o">=</span><span class="n">gleft</span><span class="p">,</span> <span class="n">gright</span><span class="o">=</span><span class="n">gright</span><span class="p">,</span>
                            <span class="n">yname</span><span class="o">=</span><span class="n">yname</span><span class="p">,</span> <span class="n">xname</span><span class="o">=</span><span class="n">xname</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Summary.add_table_params"><a class="viewcode-back" href="../../../generated/statsmodels.iolib.summary.Summary.add_table_params.html#statsmodels.iolib.summary.Summary.add_table_params">[docs]</a>    <span class="k">def</span> <span class="nf">add_table_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">,</span> <span class="n">yname</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">xname</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=.</span><span class="mo">05</span><span class="p">,</span>
                         <span class="n">use_t</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;create and add a table for the parameter estimates</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        res : results instance</span>
<span class="sd">            some required information is directly taken from the result</span>
<span class="sd">            instance</span>
<span class="sd">        yname : string or None</span>
<span class="sd">            optional name for the endogenous variable, default is &quot;y&quot;</span>
<span class="sd">        xname : list of strings or None</span>
<span class="sd">            optional names for the exogenous variables, default is &quot;var_xx&quot;</span>
<span class="sd">        alpha : float</span>
<span class="sd">            significance level for the confidence intervals</span>
<span class="sd">        use_t : bool</span>
<span class="sd">            indicator whether the p-values are based on the Student-t</span>
<span class="sd">            distribution (if True) or on the normal distribution (if False)</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None : table is attached</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">table</span> <span class="o">=</span> <span class="n">summary_params</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">yname</span><span class="o">=</span><span class="n">yname</span><span class="p">,</span> <span class="n">xname</span><span class="o">=</span><span class="n">xname</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span>
                                   <span class="n">use_t</span><span class="o">=</span><span class="n">use_t</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">res</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<span class="c">#            _, table = summary_params_2dflat(res, yname=yname, xname=xname,</span>
<span class="c">#                                             alpha=alpha, use_t=use_t)</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">table</span> <span class="o">=</span> <span class="n">summary_params_2dflat</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">endog_names</span><span class="o">=</span><span class="n">yname</span><span class="p">,</span>
                                             <span class="n">exog_names</span><span class="o">=</span><span class="n">xname</span><span class="p">,</span>
                                             <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="n">use_t</span><span class="o">=</span><span class="n">use_t</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;params has to be 1d or 2d&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Summary.add_extra_txt"><a class="viewcode-back" href="../../../generated/statsmodels.iolib.summary.Summary.add_extra_txt.html#statsmodels.iolib.summary.Summary.add_extra_txt">[docs]</a>    <span class="k">def</span> <span class="nf">add_extra_txt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">etext</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;add additional text that will be added at the end in text format</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        etext : string</span>
<span class="sd">            string with lines that are added to the text output.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extra_txt</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">etext</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Summary.as_text"><a class="viewcode-back" href="../../../generated/statsmodels.iolib.summary.Summary.as_text.html#statsmodels.iolib.summary.Summary.as_text">[docs]</a>    <span class="k">def</span> <span class="nf">as_text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;return tables as string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        txt : string</span>
<span class="sd">            summary tables and extra text as one string</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">txt</span> <span class="o">=</span> <span class="n">summary_return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">,</span> <span class="n">return_fmt</span><span class="o">=</span><span class="s">&#39;text&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra_txt</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">txt</span> <span class="o">=</span> <span class="n">txt</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n\n</span><span class="s">&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra_txt</span>
        <span class="k">return</span> <span class="n">txt</span>
</div>
<div class="viewcode-block" id="Summary.as_latex"><a class="viewcode-back" href="../../../generated/statsmodels.iolib.summary.Summary.as_latex.html#statsmodels.iolib.summary.Summary.as_latex">[docs]</a>    <span class="k">def</span> <span class="nf">as_latex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;return tables as string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        latex : string</span>
<span class="sd">            summary tables and extra text as string of Latex</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This currently merges tables with different number of columns.</span>
<span class="sd">        It is recommended to use `as_latex_tabular` directly on the individual</span>
<span class="sd">        tables.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">summary_return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">,</span> <span class="n">return_fmt</span><span class="o">=</span><span class="s">&#39;latex&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Summary.as_csv"><a class="viewcode-back" href="../../../generated/statsmodels.iolib.summary.Summary.as_csv.html#statsmodels.iolib.summary.Summary.as_csv">[docs]</a>    <span class="k">def</span> <span class="nf">as_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;return tables as string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        csv : string</span>
<span class="sd">            concatenated summary tables in comma delimited format</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">summary_return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">,</span> <span class="n">return_fmt</span><span class="o">=</span><span class="s">&#39;csv&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Summary.as_html"><a class="viewcode-back" href="../../../generated/statsmodels.iolib.summary.Summary.as_html.html#statsmodels.iolib.summary.Summary.as_html">[docs]</a>    <span class="k">def</span> <span class="nf">as_html</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;return tables as string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        html : string</span>
<span class="sd">            concatenated summary tables in HTML format</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">summary_return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">,</span> <span class="n">return_fmt</span><span class="o">=</span><span class="s">&#39;html&#39;</span><span class="p">)</span>

</div></div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="kn">as</span> <span class="nn">sm</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">longley</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
    <span class="n">data</span><span class="o">.</span><span class="n">exog</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">exog</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">endog</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">exog</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
    <span class="c">#summary(</span>
</pre></div>




          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2009-2013, Josef Perktold, Skipper Seabold, Jonathan Taylor, statsmodels-developers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>