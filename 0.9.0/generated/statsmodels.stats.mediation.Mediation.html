

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>statsmodels.stats.mediation.Mediation &#8212; statsmodels 0.9.0 documentation</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../_static/statsmodels_hybi_favico.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="statsmodels.stats.mediation.Mediation.fit" href="statsmodels.stats.mediation.Mediation.fit.html" />
    <link rel="prev" title="statsmodels.stats.moment_helpers.se_cov" href="statsmodels.stats.moment_helpers.se_cov.html" />
<link rel="stylesheet" href="../_static/examples.css" type="text/css" />
<link rel="stylesheet" href="../_static/facebox.css" type="text/css" />
<script type="text/javascript" src="../_static/scripts.js">
</script>
<script type="text/javascript" src="../_static/facebox.js">
</script>
<script type="text/javascript">
$.facebox.settings.closeImage = "../_static/closelabel.png"
$.facebox.settings.loadingImage = "../_static/loading.gif"
</script>

  </head><body>
<div class="headerwrap">
    <div class = "header">
        
        <a href = "../index.html">
<img src="../_static/statsmodels_hybi_banner.png" alt="Logo"
    style="padding-left: 15px"/></a>
        
    </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="statsmodels.stats.mediation.Mediation.fit.html" title="statsmodels.stats.mediation.Mediation.fit"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="statsmodels.stats.moment_helpers.se_cov.html" title="statsmodels.stats.moment_helpers.se_cov"
             accesskey="P">previous</a> |</li>
<li><a href ="../install.html">Install</a></li> &nbsp;|&nbsp;
<li><a href="https://groups.google.com/forum/?hl=en#!forum/pystatsmodels">Support</a></li> &nbsp;|&nbsp;
<li><a href="https://github.com/statsmodels/statsmodels/issues">Bugs</a></li> &nbsp;|&nbsp;
<li><a href="../dev/index.html">Develop</a></li> &nbsp;|&nbsp;
<li><a href="../examples/index.html">Examples</a></li> &nbsp;|&nbsp;
<li><a href="../faq.html">FAQ</a></li> &nbsp;|&nbsp;

          <li class="nav-item nav-item-1"><a href="../stats.html" accesskey="U">Statistics <code class="docutils literal notranslate"><span class="pre">stats</span></code></a> |</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            




  <div class="section" id="statsmodels-stats-mediation-mediation">
<h1>statsmodels.stats.mediation.Mediation<a class="headerlink" href="#statsmodels-stats-mediation-mediation" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="statsmodels.stats.mediation.Mediation">
<em class="property">class </em><code class="descclassname">statsmodels.stats.mediation.</code><code class="descname">Mediation</code><span class="sig-paren">(</span><em>outcome_model</em>, <em>mediator_model</em>, <em>exposure</em>, <em>mediator=None</em>, <em>moderators=None</em>, <em>outcome_fit_kwargs=None</em>, <em>mediator_fit_kwargs=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/statsmodels/stats/mediation.html#Mediation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#statsmodels.stats.mediation.Mediation" title="Permalink to this definition">¶</a></dt>
<dd><p>Conduct a mediation analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>outcome_model</strong> (<em>statsmodels model</em>) – Regression model for the outcome.  Predictor variables include
the treatment/exposure, the mediator, and any other variables
of interest.</li>
<li><strong>mediator_model</strong> (<em>statsmodels model</em>) – Regression model for the mediator variable.  Predictor
variables include the treatment/exposure and any other
variables of interest.</li>
<li><strong>exposure</strong> (<em>string</em><em> or </em><em>(</em><em>int</em><em>, </em><em>int</em><em>) </em><em>tuple</em>) – The name or column position of the treatment/exposure
variable.  If positions are given, the first integer is the
column position of the exposure variable in the outcome model
and the second integer is the position of the exposure variable
in the mediator model.  If a string is given, it must be the name
of the exposure variable in both regression models.</li>
<li><strong>mediator</strong> (<em>string</em><em> or </em><em>int</em>) – The name or column position of the mediator variable in the
outcome regression model.  If None, infer the name from the
mediator model formula (if present).</li>
<li><strong>moderators</strong> (<a class="reference external" href="https://docs.python.org/3.2/library/stdtypes.html#dict" title="(in Python v3.2)"><em>dict</em></a>) – Map from variable names or index positions to values of
moderator variables that are held fixed when calculating
mediation effects.  If the keys are index position they must
be tuples <cite>(i, j)</cite> where <cite>i</cite> is the index in the outcome model
and <cite>j</cite> is the index in the mediator model.  Otherwise the
keys must be variable names.</li>
<li><strong>outcome_fit_kwargs</strong> (<em>dict-like</em>) – Keyword arguments to use when fitting the outcome model.</li>
<li><strong>mediator_fit_kwargs</strong> (<em>dict-like</em>) – Keyword arguments to use when fitting the mediator model.</li>
<li><strong>a MediationResults object.</strong> (<em>Returns</em>) – </li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The mediator model class must implement <code class="docutils literal notranslate"><span class="pre">get_distribution</span></code>.</p>
<p class="rubric">Examples</p>
<p>A basic mediation analysis using formulas:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">statsmodels.genmod.families.links</span> <span class="k">as</span> <span class="nn">links</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">probit</span> <span class="o">=</span> <span class="n">links</span><span class="o">.</span><span class="n">probit</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outcome_model</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">GLM</span><span class="o">.</span><span class="n">from_formula</span><span class="p">(</span><span class="s2">&quot;cong_mesg ~ emo + treat + age + educ + gender + income&quot;</span><span class="p">,</span>
<span class="gp">... </span>                                    <span class="n">data</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="n">sm</span><span class="o">.</span><span class="n">families</span><span class="o">.</span><span class="n">Binomial</span><span class="p">(</span><span class="n">link</span><span class="o">=</span><span class="n">probit</span><span class="p">()))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mediator_model</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="o">.</span><span class="n">from_formula</span><span class="p">(</span><span class="s2">&quot;emo ~ treat + age + educ + gender + income&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">med</span> <span class="o">=</span> <span class="n">Mediation</span><span class="p">(</span><span class="n">outcome_model</span><span class="p">,</span> <span class="n">mediator_model</span><span class="p">,</span> <span class="s2">&quot;treat&quot;</span><span class="p">,</span> <span class="s2">&quot;emo&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">med</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
<p>A basic mediation analysis without formulas.  This may be slightly
faster than the approach using formulas.  If there are any
interactions involving the treatment or mediator variables this
approach will not work, you must use formulas.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">patsy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outcome</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;cong_mesg&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outcome_exog</span> <span class="o">=</span> <span class="n">patsy</span><span class="o">.</span><span class="n">dmatrix</span><span class="p">(</span><span class="s2">&quot;emo + treat + age + educ + gender + income&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span>
<span class="gp">... </span>                             <span class="n">return_type</span><span class="o">=</span><span class="s1">&#39;dataframe&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">probit</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">families</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">probit</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outcome_model</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">GLM</span><span class="p">(</span><span class="n">outcome</span><span class="p">,</span> <span class="n">outcome_exog</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="n">sm</span><span class="o">.</span><span class="n">families</span><span class="o">.</span><span class="n">Binomial</span><span class="p">(</span><span class="n">link</span><span class="o">=</span><span class="n">probit</span><span class="p">()))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mediator</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;emo&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mediator_exog</span> <span class="o">=</span> <span class="n">patsy</span><span class="o">.</span><span class="n">dmatrix</span><span class="p">(</span><span class="s2">&quot;treat + age + educ + gender + income&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span>
<span class="gp">... </span>                              <span class="n">return_type</span><span class="o">=</span><span class="s1">&#39;dataframe&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mediator_model</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">mediator</span><span class="p">,</span> <span class="n">mediator_exog</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_pos</span> <span class="o">=</span> <span class="p">[</span><span class="n">outcome_exog</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;treat&quot;</span><span class="p">),</span>
<span class="gp">... </span>          <span class="n">mediator_exog</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;treat&quot;</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">med_pos</span> <span class="o">=</span> <span class="n">outcome_exog</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;emo&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">med</span> <span class="o">=</span> <span class="n">Mediation</span><span class="p">(</span><span class="n">outcome_model</span><span class="p">,</span> <span class="n">mediator_model</span><span class="p">,</span> <span class="n">tx_pos</span><span class="p">,</span> <span class="n">med_pos</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">med</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
<p>A moderated mediation analysis.  The mediation effect is computed
for people of age 20.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fml</span> <span class="o">=</span> <span class="s2">&quot;cong_mesg ~ emo + treat*age + emo*age + educ + gender + income&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outcome_model</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">GLM</span><span class="o">.</span><span class="n">from_formula</span><span class="p">(</span><span class="n">fml</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span>
<span class="gp">... </span>                                     <span class="n">family</span><span class="o">=</span><span class="n">sm</span><span class="o">.</span><span class="n">families</span><span class="o">.</span><span class="n">Binomial</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mediator_model</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="o">.</span><span class="n">from_formula</span><span class="p">(</span><span class="s2">&quot;emo ~ treat*age + educ + gender + income&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">moderators</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;age&quot;</span> <span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">med</span> <span class="o">=</span> <span class="n">Mediation</span><span class="p">(</span><span class="n">outcome_model</span><span class="p">,</span> <span class="n">mediator_model</span><span class="p">,</span> <span class="s2">&quot;treat&quot;</span><span class="p">,</span> <span class="s2">&quot;emo&quot;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">moderators</span><span class="o">=</span><span class="n">moderators</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
</pre></div>
</div>
<p class="rubric">References</p>
<p>Imai, Keele, Tingley (2010).  A general approach to causal mediation
analysis. Psychological Methods 15:4, 309-334.
<a class="reference external" href="http://imai.princeton.edu/research/files/BaronKenny.pdf">http://imai.princeton.edu/research/files/BaronKenny.pdf</a></p>
<p>Tingley, Yamamoto, Hirose, Keele, Imai (2014).  mediation : R
package for causal mediation analysis.  Journal of Statistical
Software 59:5.  <a class="reference external" href="http://www.jstatsoft.org/v59/i05/paper">http://www.jstatsoft.org/v59/i05/paper</a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="statsmodels.stats.mediation.Mediation.fit.html#statsmodels.stats.mediation.Mediation.fit" title="statsmodels.stats.mediation.Mediation.fit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fit</span></code></a>([method,&nbsp;n_rep])</td>
<td>Fit a regression model to assess mediation.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>





          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="statsmodels.stats.moment_helpers.se_cov.html"
                        title="previous chapter">statsmodels.stats.moment_helpers.se_cov</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="statsmodels.stats.mediation.Mediation.fit.html"
                        title="next chapter">statsmodels.stats.mediation.Mediation.fit</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/generated/statsmodels.stats.mediation.Mediation.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2009-2017, Josef Perktold, Skipper Seabold, Jonathan Taylor, statsmodels-developers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4.
    </div>
  </body>
</html>