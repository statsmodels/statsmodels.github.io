

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>Testing &#8212; statsmodels</title>
  <link rel="icon" type="image/png" sizes="32x32" href="../_static/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../_static/icons/favicon-16x16.png">
  <link rel="manifest" href="../_static/icons/site.webmanifest">
  <link rel="mask-icon" href="../_static/icons/safari-pinned-tab.svg" color="#919191">
  <meta name="msapplication-TileColor" content="#2b5797">
  <meta name="msapplication-config" content="../_static/icons/browserconfig.xml">
  <link rel="stylesheet" href="../_static/stylesheets/examples.css">
  <link rel="stylesheet" href="../_static/stylesheets/deprecation.css">
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="statsmodels.__init__.test" href="generated/statsmodels.__init__.test.html" />
    <link rel="prev" title="Maintainer Notes" href="maintainer_notes.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=indigo data-md-color-accent=blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#dev/test_notes" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="statsmodels"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/statsmodels-logo-v2-bw.svg" height="26"
                   alt="statsmodels logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">statsmodels 0.13.5</span>
          <span class="md-header-nav__topic"> Testing </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/statsmodels/statsmodels" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    statsmodels
  </div>
</a>
          </div>
        </div>
      
      
  
  <script src="../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../../versions-v2.json",
        target_loc = "../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">Developer Page</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="statsmodels" class="md-nav__button md-logo">
      
        <img src="../_static/statsmodels-logo-v2-bw.svg" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="statsmodels">statsmodels 0.13.5</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/statsmodels/statsmodels" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    statsmodels
  </div>
</a>
    </div>
  
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../install.html" class="md-nav__link">Installing statsmodels</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../gettingstarted.html" class="md-nav__link">Getting started</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../user-guide.html" class="md-nav__link">User Guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../examples/index.html" class="md-nav__link">Examples</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../api.html" class="md-nav__link">API Reference</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../about.html" class="md-nav__link">About statsmodels</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html" class="md-nav__link">Developer Page</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="index.html#submitting-a-bug-report" class="md-nav__link">Submitting a Bug Report</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html#making-changes-to-the-code" class="md-nav__link">Making Changes to the Code</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html#how-to-submit-a-pull-request" class="md-nav__link">How to Submit a Pull Request</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html#mailing-list" class="md-nav__link">Mailing List</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html#license" class="md-nav__link">License</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html#contents" class="md-nav__link">Contents</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="git_notes.html" class="md-nav__link">Working with the statsmodels Code</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="maintainer_notes.html" class="md-nav__link">Maintainer Notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Testing </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Testing</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#dev-test-notes--page-root" class="md-nav__link">Testing</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#setting-up-development-environment-locally" class="md-nav__link">Setting up development environment locally</a>
        </li>
        <li class="md-nav__item"><a href="#test-driven-development" class="md-nav__link">Test Driven Development</a>
        </li>
        <li class="md-nav__item"><a href="#introduction-to-pytest" class="md-nav__link">Introduction to pytest</a>
        </li>
        <li class="md-nav__item"><a href="#running-tests" class="md-nav__link">Running Tests</a>
        </li>
        <li class="md-nav__item"><a href="#how-to-write-a-test" class="md-nav__link">How To Write A Test</a>
        </li>
        <li class="md-nav__item"><a href="#test-results" class="md-nav__link">Test Results</a>
        </li>
        <li class="md-nav__item"><a href="#speeding-up-full-runs" class="md-nav__link">Speeding up full runs</a>
        </li>
        <li class="md-nav__item"><a href="#the-test-method" class="md-nav__link">The <code class="docutils literal notranslate"><span class="pre">test()</span></code> method</a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="../_sources/dev/test_notes.rst.txt">Show Source</a> </li>

  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="naming_conventions.html" class="md-nav__link">Naming Conventions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="warnings-and-exceptions.html" class="md-nav__link">Exceptions and Warnings</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="dataset_notes.html" class="md-nav__link">Datasets</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="examples.html" class="md-nav__link">Examples</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="get_involved.html" class="md-nav__link">Get Involved</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internal.html" class="md-nav__link">Internal Classes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="testing.html" class="md-nav__link">Testing on Build Machines</a>
      
    
    </li></ul>
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release/index.html" class="md-nav__link">Release Notes</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#dev-test-notes--page-root" class="md-nav__link">Testing</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#setting-up-development-environment-locally" class="md-nav__link">Setting up development environment locally</a>
        </li>
        <li class="md-nav__item"><a href="#test-driven-development" class="md-nav__link">Test Driven Development</a>
        </li>
        <li class="md-nav__item"><a href="#introduction-to-pytest" class="md-nav__link">Introduction to pytest</a>
        </li>
        <li class="md-nav__item"><a href="#running-tests" class="md-nav__link">Running Tests</a>
        </li>
        <li class="md-nav__item"><a href="#how-to-write-a-test" class="md-nav__link">How To Write A Test</a>
        </li>
        <li class="md-nav__item"><a href="#test-results" class="md-nav__link">Test Results</a>
        </li>
        <li class="md-nav__item"><a href="#speeding-up-full-runs" class="md-nav__link">Speeding up full runs</a>
        </li>
        <li class="md-nav__item"><a href="#the-test-method" class="md-nav__link">The <code class="docutils literal notranslate"><span class="pre">test()</span></code> method</a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="../_sources/dev/test_notes.rst.txt">Show Source</a> </li>

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="testing">
<span id="id1"></span><h1 id="dev-test-notes--page-root">Testing<a class="headerlink" href="#dev-test-notes--page-root" title="Permalink to this heading">¶</a></h1>
<section id="setting-up-development-environment-locally">
<h2 id="setting-up-development-environment-locally">Setting up development environment locally<a class="headerlink" href="#setting-up-development-environment-locally" title="Permalink to this heading">¶</a></h2>
<p>Follow our <a class="reference internal" href="../install.html#install"><span class="std std-ref">installation instructions</span></a> and set up a suitable
environment to build statsmodels from source. We recommend that you develop
using a development install of statsmodels in a <cite>venv</cite> by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m venv .venv
python -m pip install -e <span class="s2">".[develop]"</span>
</pre></div>
</div>
<p>from the root directory of the git repository. The flag <code class="docutils literal notranslate"><span class="pre">-e</span></code> is for editable.</p>
<p>This command compiles the C code and add statsmodels to your activate python
environment by creating links from your python environment’s libraries
to the statsmodels source code. Therefore, changes to pure python code will
be immediately available to the user without a re-install. Changes to C code or
Cython code require rerunning <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">".[develop]"</span></code> before these changes are
available.</p>
</section>
<section id="test-driven-development">
<h2 id="test-driven-development">Test Driven Development<a class="headerlink" href="#test-driven-development" title="Permalink to this heading">¶</a></h2>
<p>We strive to follow a <a class="reference external" href="https://en.wikipedia.org/wiki/Test-driven_development">Test Driven Development (TDD)</a> pattern.
All models or statistical functions that are added to the main code base are to have
tests versus an existing statistical package, if possible.</p>
</section>
<section id="introduction-to-pytest">
<h2 id="introduction-to-pytest">Introduction to pytest<a class="headerlink" href="#introduction-to-pytest" title="Permalink to this heading">¶</a></h2>
<p>Like many packages, statsmodels uses the <a class="reference external" href="https://docs.pytest.org/en/latest/contents.html">pytest testing system</a> and the convenient extensions in <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/routines.testing.html">numpy.testing</a>.  Pytest will find any file, directory, function, or class name that starts with <code class="docutils literal notranslate"><span class="pre">test</span></code> or <code class="docutils literal notranslate"><span class="pre">Test</span></code> (classes only). Test function should start with <code class="docutils literal notranslate"><span class="pre">test</span></code>, test classes should start with <code class="docutils literal notranslate"><span class="pre">Test</span></code>. These functions and classes should be placed in files with names beginning with <code class="docutils literal notranslate"><span class="pre">test</span></code> in a directory called <code class="docutils literal notranslate"><span class="pre">tests</span></code>.</p>
</section>
<section id="running-tests">
<span id="run-tests"></span><h2 id="running-tests">Running Tests<a class="headerlink" href="#running-tests" title="Permalink to this heading">¶</a></h2>
<p>Test are run from the command line by calling <code class="docutils literal notranslate"><span class="pre">pytest</span></code>. Directly running tests using
pytest requires that statsmodels is installed using <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">".[develop]"</span></code> as described
above.</p>
<p>Tests can be run at different levels of granularity:</p>
<ul class="simple">
<li><p>Project level, which runs all tests.  Running the entire test suite is slow
and normally this would only be needed if making deep changes to statsmodels.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest statsmodels
</pre></div>
</div>
<ul class="simple">
<li><p>Folder level, which runs all tests below a folder</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest statsmodels/regression/tests
</pre></div>
</div>
<ul class="simple">
<li><p>File level, which runs all tests in a file</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest statsmodels/regression/tests/test_regression.py
</pre></div>
</div>
<ul class="simple">
<li><p>Class level, which runs all tests in a class</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest statsmodels/regression/tests/test_regression.py::TestOLS
</pre></div>
</div>
<ul class="simple">
<li><p>Test level, which runs a single test.  The first example runs a test in a
class.  The second runs a stand alone test.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest statsmodels/regression/tests/test_regression.py::TestOLS::test_missing
pytest statsmodels/regression/tests/test_regression.py::test_ridge
</pre></div>
</div>
</section>
<section id="how-to-write-a-test">
<h2 id="how-to-write-a-test">How To Write A Test<a class="headerlink" href="#how-to-write-a-test" title="Permalink to this heading">¶</a></h2>
<p>NumPy provides a good introduction to unit testing with pytest and NumPy extensions <a class="reference external" href="https://github.com/numpy/numpy/blob/main/doc/TESTS.rst.txt">here</a>. It is worth a read for some more details.
Here, we will document a few conventions we follow that are worth mentioning. Often we want to test
a whole model at once rather than just one function, for example. The following is a pared down
version test_discrete.py. In this case, several different models with different options need to be
tested. The tests look something like</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numpy.testing</span> <span class="kn">import</span> <span class="n">assert_almost_equal</span>
<span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>
<span class="kn">from</span> <span class="nn">results.results_discrete</span> <span class="kn">import</span> <span class="n">Spector</span>

<span class="k">class</span> <span class="nc">CheckDiscreteResults</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    res2 are the results. res1 are the values from statsmodels</span>
<span class="sd">    """</span>

    <span class="k">def</span> <span class="nf">test_params</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">assert_almost_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">res1</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">res2</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

    <span class="n">decimal_tvalues</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="k">def</span> <span class="nf">test_tvalues</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">assert_almost_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">res1</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">res2</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">decimal_tvalues</span><span class="p">)</span>

    <span class="c1"># ... as many more tests as there are common results</span>

<span class="k">class</span> <span class="nc">TestProbitNewton</span><span class="p">(</span><span class="n">CheckDiscreteResults</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Tests the Probit model using Newton's method for fitting.</span>
<span class="sd">    """</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">setup_class</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="c1"># set up model</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">spector</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
        <span class="n">data</span><span class="o">.</span><span class="n">exog</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">exog</span><span class="p">)</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">res1</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">Probit</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">endog</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">exog</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">'newton'</span><span class="p">,</span> <span class="n">disp</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="c1"># set up results</span>
        <span class="n">res2</span> <span class="o">=</span> <span class="n">Spector</span><span class="o">.</span><span class="n">probit</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">res2</span> <span class="o">=</span> <span class="n">res2</span>

        <span class="c1"># set up precision</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">decimal_tvalues</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="k">def</span> <span class="nf">test_model_specifc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">assert_almost_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">res1</span><span class="o">.</span><span class="n">foo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">res2</span><span class="o">.</span><span class="n">foo</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>The main workhorse is the <cite>CheckDiscreteResults</cite> class. Notice that we can set the level of precision
for <cite>tvalues</cite> to be different than the default in the subclass  <cite>TestProbitNewton</cite>. All of the test
classes have a <code class="docutils literal notranslate"><span class="pre">@classmethod</span></code> called <code class="docutils literal notranslate"><span class="pre">setup_class</span></code>. Otherwise, pytest would reinstantiate the class
before every single test method. If the fitting of the model is time consuming, then this is clearly
undesirable. Finally, we have a script at the bottom so that we can run the tests should be running
the Python file.</p>
</section>
<section id="test-results">
<h2 id="test-results">Test Results<a class="headerlink" href="#test-results" title="Permalink to this heading">¶</a></h2>
<p>The test results are the final piece of the above example. For many tests, especially those for the
models, there are many results against which you would like to test. It makes sense then to separate
the hard-coded results from the actual tests to make the tests more readable. If there are only a few
results it’s not necessary to separate the results. We often take results from some other statistical
package. It is important to document where you got the results from and why they might differ from
the results that we get. Each tests folder has a results subdirectory. Consider the folder structure
for the discrete models:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tests</span><span class="o">/</span>
    <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
    <span class="n">test_discrete</span><span class="o">.</span><span class="n">py</span>
    <span class="n">results</span><span class="o">/</span>
        <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
        <span class="n">results_discrete</span><span class="o">.</span><span class="n">py</span>
        <span class="n">nbinom_resids</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
<p>It is up to you how best to structure the results. In the discrete model example, you will notice
that there are result classes based around particular datasets with a method for loading different
model results for that dataset. You can also include text files that hold results to be loaded by
results classes if it is easier than putting them in the class itself.</p>
</section>
<section id="speeding-up-full-runs">
<h2 id="speeding-up-full-runs">Speeding up full runs<a class="headerlink" href="#speeding-up-full-runs" title="Permalink to this heading">¶</a></h2>
<p>Running the full test suite is slow. Fortunately it is only necessary to run the full suite when
making low-level changes (e.g., to <code class="docutils literal notranslate"><span class="pre">statsmodels.base</span></code>) There are two methods available to
speed up runs of the full test suite when needed.</p>
<ul class="simple">
<li><p>Use the pytest-xdist package</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install pytest-xdist
<span class="nb">export</span> <span class="nv">MKL_NUM_THREADS</span><span class="o">=</span><span class="m">1</span>
<span class="nb">export</span> <span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="m">1</span>
pytest -n auto statsmodels
</pre></div>
</div>
<ul class="simple">
<li><p>Skip slow tests using <code class="docutils literal notranslate"><span class="pre">--skip-slow</span></code></p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --skip-slow statsmodels
</pre></div>
</div>
<p>You can combine these two approaches for faster runs.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">MKL_NUM_THREADS</span><span class="o">=</span><span class="m">1</span> <span class="o">&amp;&amp;</span> <span class="nb">export</span> <span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="m">1</span>
pytest -n auto --skip-slow statsmodels
</pre></div>
</div>
</section>
<section id="the-test-method">
<h2 id="the-test-method">The <code class="docutils literal notranslate"><span class="pre">test()</span></code> method<a class="headerlink" href="#the-test-method" title="Permalink to this heading">¶</a></h2>
<p>The root of statsmodels and all submodules expose a <code class="docutils literal notranslate"><span class="pre">test()</span></code> method which can
be used to run all tests either in the package (<code class="docutils literal notranslate"><span class="pre">statsmodels.test()</span></code>) or in
a module (<code class="docutils literal notranslate"><span class="pre">statsmodels.regression.test()</span></code>).  This method allows tests to be
run from an install copy of statsmodels even it is was not installed using the
<em>editable</em> flag as described above. This method is required for testing wheels in
release builds and is <strong>not</strong> recommended for development.</p>
<p>Using this method, all tests are run using:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>
<span class="n">sm</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>
</pre></div>
</div>
<p>Submodules tests are run using:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sm</span><span class="o">.</span><span class="n">discrete</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>
</pre></div>
</div>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/statsmodels.__init__.test.html#statsmodels.__init__.test" title="statsmodels.__init__.test"><code class="xref py py-obj docutils literal notranslate"><span class="pre">test</span></code></a>([extra_args, exit])</p></td>
<td><p>Run the test suite</p></td>
</tr>
</tbody>
</table>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="maintainer_notes.html" title="Maintainer Notes"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Maintainer Notes </span>
              </div>
            </a>
          
          
            <a href="generated/statsmodels.__init__.test.html" title="statsmodels.__init__.test"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> statsmodels.__init__.test </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2009-2019, Josef Perktold, Skipper Seabold, Jonathan Taylor, statsmodels-developers.
              
          </div>
            Last updated on
              Nov 02, 2022.
            <br/>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>