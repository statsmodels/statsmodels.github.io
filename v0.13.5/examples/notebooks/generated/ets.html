

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../../../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../../../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../../../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../../../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../../../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>ETS models &#8212; statsmodels</title>
  <link rel="icon" type="image/png" sizes="32x32" href="../../../_static/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../../../_static/icons/favicon-16x16.png">
  <link rel="manifest" href="../../../_static/icons/site.webmanifest">
  <link rel="mask-icon" href="../../../_static/icons/safari-pinned-tab.svg" color="#919191">
  <meta name="msapplication-TileColor" content="#2b5797">
  <meta name="msapplication-config" content="../../../_static/icons/browserconfig.xml">
  <link rel="stylesheet" href="../../../_static/stylesheets/examples.css">
  <link rel="stylesheet" href="../../../_static/stylesheets/deprecation.css">
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/plot_directive.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../../../about.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="State space models - concentrating the scale out of the likelihood function" href="statespace_concentrated_scale.html" />
    <link rel="prev" title="Custom statespace models" href="statespace_custom_models.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=indigo data-md-color-accent=blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#examples/notebooks/generated/ets" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../../index.html" title="statsmodels"
           class="md-header-nav__button md-logo">
          
              <img src="../../../_static/statsmodels-logo-v2-bw.svg" height="26"
                   alt="statsmodels logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">statsmodels 0.13.5</span>
          <span class="md-header-nav__topic"> ETS models </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../../../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/statsmodels/statsmodels" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    statsmodels
  </div>
</a>
          </div>
        </div>
      
      
  
  <script src="../../../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../../../../versions-v2.json",
        target_loc = "../../../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../../index.html" class="md-tabs__link">Examples</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../index.html" title="statsmodels" class="md-nav__button md-logo">
      
        <img src="../../../_static/statsmodels-logo-v2-bw.svg" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../../../index.html"
       title="statsmodels">statsmodels 0.13.5</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/statsmodels/statsmodels" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    statsmodels
  </div>
</a>
    </div>
  
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../../../install.html" class="md-nav__link">Installing statsmodels</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../gettingstarted.html" class="md-nav__link">Getting started</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../user-guide.html" class="md-nav__link">User Guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../index.html" class="md-nav__link">Examples</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="../../index.html#linear-regression-models" class="md-nav__link">Linear Regression Models</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../index.html#plotting" class="md-nav__link">Plotting</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../index.html#discrete-choice-models" class="md-nav__link">Discrete Choice Models</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../index.html#nonparametric-statistics" class="md-nav__link">Nonparametric Statistics</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../index.html#generalized-linear-models" class="md-nav__link">Generalized Linear Models</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../index.html#robust-regression" class="md-nav__link">Robust Regression</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../index.html#generalized-estimating-equations" class="md-nav__link">Generalized Estimating Equations</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../index.html#statistics" class="md-nav__link">Statistics</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../index.html#time-series-analysis" class="md-nav__link">Time Series Analysis</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../index.html#state-space-models" class="md-nav__link">State space models</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="statespace_sarimax_faq.html" class="md-nav__link">SARIMAX and ARIMA: Frequently Asked Questions (FAQ)</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="statespace_varmax.html" class="md-nav__link">VARMAX models</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="statespace_dfm_coincident.html" class="md-nav__link">Dynamic factors and coincident indices</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="statespace_structural_harvey_jaeger.html" class="md-nav__link">Detrending, Stylized Facts and the Business Cycle</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="statespace_cycles.html" class="md-nav__link">Trends and cycles in unemployment</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="statespace_local_linear_trend.html" class="md-nav__link">State space modeling: Local Linear Trends</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="statespace_arma_0.html" class="md-nav__link">Autoregressive Moving Average (ARMA): Sunspots data</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="statespace_seasonal.html" class="md-nav__link">Seasonality in time series data</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="statespace_fixed_params.html" class="md-nav__link">Estimating or specifying parameters in state space models</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="statespace_tvpvar_mcmc_cfa.html" class="md-nav__link">TVP-VAR, MCMC, and sparse simulation smoothing</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="statespace_sarimax_pymc3.html" class="md-nav__link">Fast Bayesian estimation of SARIMAX models</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="statespace_news.html" class="md-nav__link">Forecasting, updating datasets, and the “news”</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="statespace_custom_models.html" class="md-nav__link">Custom statespace models</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> ETS models </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">ETS models</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#examples-notebooks-generated-ets--page-root" class="md-nav__link">ETS models</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#Simple-exponential-smoothing" class="md-nav__link">Simple exponential smoothing</a>
        </li>
        <li class="md-nav__item"><a href="#Holt-Winters’-seasonal-method" class="md-nav__link">Holt-Winters’ seasonal method</a>
        </li>
        <li class="md-nav__item"><a href="#Predictions" class="md-nav__link">Predictions</a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="../../../_sources/examples/notebooks/generated/ets.ipynb.txt">Show Source</a> </li>

  </ul>
</nav>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../index.html#state-space-models-technical-notes" class="md-nav__link">State space models - Technical notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../index.html#forecasting" class="md-nav__link">Forecasting</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../index.html#multivariate-methods" class="md-nav__link">Multivariate Methods</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../index.html#user-notes" class="md-nav__link">User Notes</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../api.html" class="md-nav__link">API Reference</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../about.html" class="md-nav__link">About statsmodels</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../dev/index.html" class="md-nav__link">Developer Page</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../release/index.html" class="md-nav__link">Release Notes</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#examples-notebooks-generated-ets--page-root" class="md-nav__link">ETS models</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#Simple-exponential-smoothing" class="md-nav__link">Simple exponential smoothing</a>
        </li>
        <li class="md-nav__item"><a href="#Holt-Winters’-seasonal-method" class="md-nav__link">Holt-Winters’ seasonal method</a>
        </li>
        <li class="md-nav__item"><a href="#Predictions" class="md-nav__link">Predictions</a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="../../../_sources/examples/notebooks/generated/ets.ipynb.txt">Show Source</a> </li>

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<section id="ETS-models">
<h1 id="examples-notebooks-generated-ets--page-root">ETS models<a class="headerlink" href="#examples-notebooks-generated-ets--page-root" title="Permalink to this heading">¶</a></h1>
<p>The ETS models are a family of time series models with an underlying state space model consisting of a level component, a trend component (T), a seasonal component (S), and an error term (E).</p>
<p>This notebook shows how they can be used with <code class="docutils literal notranslate"><span class="pre">statsmodels</span></code>. For a more thorough treatment we refer to [1], chapter 8 (free online resource), on which the implementation in statsmodels and the examples used in this notebook are based.</p>
<p><code class="docutils literal notranslate"><span class="pre">statsmodels</span></code> implements all combinations of: - additive and multiplicative error model - additive and multiplicative trend, possibly dampened - additive and multiplicative seasonality</p>
<p>However, not all of these methods are stable. Refer to [1] and references therein for more info about model stability.</p>
<p>[1] Hyndman, Rob J., and George Athanasopoulos. <em>Forecasting: principles and practice</em>, 3rd edition, OTexts, 2019. <a class="reference external" href="https://www.otexts.org/fpp3/7">https://www.otexts.org/fpp3/7</a></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">from</span> <span class="nn">statsmodels.tsa.exponential_smoothing.ets</span> <span class="kn">import</span> <span class="n">ETSModel</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">"figure.figsize"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</pre></div>
</div>
</div>
<section id="Simple-exponential-smoothing">
<h2 id="Simple-exponential-smoothing">Simple exponential smoothing<a class="headerlink" href="#Simple-exponential-smoothing" title="Permalink to this heading">¶</a></h2>
<p>The simplest of the ETS models is also known as <em>simple exponential smoothing</em>. In ETS terms, it corresponds to the (A, N, N) model, that is, a model with additive errors, no trend, and no seasonality. The state space formulation of Holt’s method is:</p>
<p><span class="math">\begin{align}
y_{t} &amp;= y_{t-1} + e_t\\
l_{t} &amp;= l_{t-1} + \alpha e_t\\
\end{align}</span></p>
<p>This state space formulation can be turned into a different formulation, a forecast and a smoothing equation (as can be done with all ETS models):</p>
<p><span class="math">\begin{align}
\hat{y}_{t|t-1} &amp;= l_{t-1}\\
l_{t} &amp;= \alpha y_{t-1} + (1 - \alpha) l_{t-1}
\end{align}</span></p>
<p>Here, <span class="math notranslate nohighlight">\(\hat{y}_{t|t-1}\)</span> is the forecast/expectation of <span class="math notranslate nohighlight">\(y_t\)</span> given the information of the previous step. In the simple exponential smoothing model, the forecast corresponds to the previous level. The second equation (smoothing equation) calculates the next level as weighted average of the previous level and the previous observation.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">oildata</span> <span class="o">=</span> <span class="p">[</span>
    <span class="mf">111.0091</span><span class="p">,</span>
    <span class="mf">130.8284</span><span class="p">,</span>
    <span class="mf">141.2871</span><span class="p">,</span>
    <span class="mf">154.2278</span><span class="p">,</span>
    <span class="mf">162.7409</span><span class="p">,</span>
    <span class="mf">192.1665</span><span class="p">,</span>
    <span class="mf">240.7997</span><span class="p">,</span>
    <span class="mf">304.2174</span><span class="p">,</span>
    <span class="mf">384.0046</span><span class="p">,</span>
    <span class="mf">429.6622</span><span class="p">,</span>
    <span class="mf">359.3169</span><span class="p">,</span>
    <span class="mf">437.2519</span><span class="p">,</span>
    <span class="mf">468.4008</span><span class="p">,</span>
    <span class="mf">424.4353</span><span class="p">,</span>
    <span class="mf">487.9794</span><span class="p">,</span>
    <span class="mf">509.8284</span><span class="p">,</span>
    <span class="mf">506.3473</span><span class="p">,</span>
    <span class="mf">340.1842</span><span class="p">,</span>
    <span class="mf">240.2589</span><span class="p">,</span>
    <span class="mf">219.0328</span><span class="p">,</span>
    <span class="mf">172.0747</span><span class="p">,</span>
    <span class="mf">252.5901</span><span class="p">,</span>
    <span class="mf">221.0711</span><span class="p">,</span>
    <span class="mf">276.5188</span><span class="p">,</span>
    <span class="mf">271.1480</span><span class="p">,</span>
    <span class="mf">342.6186</span><span class="p">,</span>
    <span class="mf">428.3558</span><span class="p">,</span>
    <span class="mf">442.3946</span><span class="p">,</span>
    <span class="mf">432.7851</span><span class="p">,</span>
    <span class="mf">437.2497</span><span class="p">,</span>
    <span class="mf">437.2092</span><span class="p">,</span>
    <span class="mf">445.3641</span><span class="p">,</span>
    <span class="mf">453.1950</span><span class="p">,</span>
    <span class="mf">454.4096</span><span class="p">,</span>
    <span class="mf">422.3789</span><span class="p">,</span>
    <span class="mf">456.0371</span><span class="p">,</span>
    <span class="mf">440.3866</span><span class="p">,</span>
    <span class="mf">425.1944</span><span class="p">,</span>
    <span class="mf">486.2052</span><span class="p">,</span>
    <span class="mf">500.4291</span><span class="p">,</span>
    <span class="mf">521.2759</span><span class="p">,</span>
    <span class="mf">508.9476</span><span class="p">,</span>
    <span class="mf">488.8889</span><span class="p">,</span>
    <span class="mf">509.8706</span><span class="p">,</span>
    <span class="mf">456.7229</span><span class="p">,</span>
    <span class="mf">473.8166</span><span class="p">,</span>
    <span class="mf">525.9509</span><span class="p">,</span>
    <span class="mf">549.8338</span><span class="p">,</span>
    <span class="mf">542.3405</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">oil</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">oildata</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">"1965"</span><span class="p">,</span> <span class="s2">"2013"</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">"AS"</span><span class="p">))</span>
<span class="n">oil</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Annual oil production in Saudi Arabia (Mt)"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0, 0.5, 'Annual oil production in Saudi Arabia (Mt)')
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_notebooks_generated_ets_4_1.png" src="../../../_images/examples_notebooks_generated_ets_4_1.png"/>
</div>
</div>
<p>The plot above shows annual oil production in Saudi Arabia in million tonnes. The data are taken from the R package <code class="docutils literal notranslate"><span class="pre">fpp2</span></code> (companion package to prior version [1]). Below you can see how to fit a simple exponential smoothing model using statsmodels’s ETS implementation to this data. Additionally, the fit using <code class="docutils literal notranslate"><span class="pre">forecast</span></code> in R is shown as comparison.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">ETSModel</span><span class="p">(</span><span class="n">oil</span><span class="p">)</span>
<span class="n">fit</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">maxiter</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
<span class="n">oil</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"data"</span><span class="p">)</span>
<span class="n">fit</span><span class="o">.</span><span class="n">fittedvalues</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"statsmodels fit"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Annual oil production in Saudi Arabia (Mt)"</span><span class="p">)</span>

<span class="c1"># obtained from R</span>
<span class="n">params_R</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.99989969</span><span class="p">,</span> <span class="mf">0.11888177503085334</span><span class="p">,</span> <span class="mf">0.80000197</span><span class="p">,</span> <span class="mf">36.46466837</span><span class="p">,</span> <span class="mf">34.72584983</span><span class="p">]</span>
<span class="n">yhat</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">smooth</span><span class="p">(</span><span class="n">params_R</span><span class="p">)</span><span class="o">.</span><span class="n">fittedvalues</span>
<span class="n">yhat</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"R fit"</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">"--"</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
RUNNING THE L-BFGS-B CODE

           * * *

Machine precision = 2.220D-16
 N =            2     M =           10

At X0         0 variables are exactly at the bounds

At iterate    0    f=  6.27365D+00    |proj g|=  8.99900D-01

At iterate    1    f=  5.31675D+00    |proj g|=  6.49880D-04

At iterate    2    f=  5.30939D+00    |proj g|=  5.55467D-04

At iterate    3    f=  5.29115D+00    |proj g|=  5.87086D-05

At iterate    4    f=  5.29096D+00    |proj g|=  1.86518D-06

           * * *

Tit   = total number of iterations
Tnf   = total number of function evaluations
Tnint = total number of segments explored during Cauchy searches
Skip  = number of BFGS updates skipped
Nact  = number of active bounds at final generalized Cauchy point
Projg = norm of the final projected gradient
F     = final function value

           * * *

   N    Tit     Tnf  Tnint  Skip  Nact     Projg        F
    2      4     13      5     0     1   1.865D-06   5.291D+00
  F =   5.2909564503744404

CONVERGENCE: NORM_OF_PROJECTED_GRADIENT_&lt;=_PGTOL
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.legend.Legend at 0x7f19b560d990&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_notebooks_generated_ets_6_2.png" src="../../../_images/examples_notebooks_generated_ets_6_2.png"/>
</div>
</div>
<p>By default the initial states are considered to be fitting parameters and are estimated by maximizing log-likelihood. It is possible to only use a heuristic for the initial values:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model_heuristic</span> <span class="o">=</span> <span class="n">ETSModel</span><span class="p">(</span><span class="n">oil</span><span class="p">,</span> <span class="n">initialization_method</span><span class="o">=</span><span class="s2">"heuristic"</span><span class="p">)</span>
<span class="n">fit_heuristic</span> <span class="o">=</span> <span class="n">model_heuristic</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">oil</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"data"</span><span class="p">)</span>
<span class="n">fit</span><span class="o">.</span><span class="n">fittedvalues</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"estimated"</span><span class="p">)</span>
<span class="n">fit_heuristic</span><span class="o">.</span><span class="n">fittedvalues</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"heuristic"</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">"--"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Annual oil production in Saudi Arabia (Mt)"</span><span class="p">)</span>

<span class="c1"># obtained from R</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.99989969</span><span class="p">,</span> <span class="mf">0.11888177503085334</span><span class="p">,</span> <span class="mf">0.80000197</span><span class="p">,</span> <span class="mf">36.46466837</span><span class="p">,</span> <span class="mf">34.72584983</span><span class="p">]</span>
<span class="n">yhat</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">smooth</span><span class="p">(</span><span class="n">params</span><span class="p">)</span><span class="o">.</span><span class="n">fittedvalues</span>
<span class="n">yhat</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"with R params"</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">":"</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
RUNNING THE L-BFGS-B CODE

           * * *

Machine precision = 2.220D-16
 N =            1     M =           10

At X0         0 variables are exactly at the bounds

At iterate    0    f=  6.27365D+00    |proj g|=  8.99900D-01

At iterate    1    f=  5.31675D+00    |proj g|=  0.00000D+00

           * * *

Tit   = total number of iterations
Tnf   = total number of function evaluations
Tnint = total number of segments explored during Cauchy searches
Skip  = number of BFGS updates skipped
Nact  = number of active bounds at final generalized Cauchy point
Projg = norm of the final projected gradient
F     = final function value

           * * *

   N    Tit     Tnf  Tnint  Skip  Nact     Projg        F
    1      1      2      1     0     1   0.000D+00   5.317D+00
  F =   5.3167544390512402

CONVERGENCE: NORM_OF_PROJECTED_GRADIENT_&lt;=_PGTOL
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.legend.Legend at 0x7f19b5491ab0&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_notebooks_generated_ets_8_2.png" src="../../../_images/examples_notebooks_generated_ets_8_2.png"/>
</div>
</div>
<p>The fitted parameters and some other measures are shown using <code class="docutils literal notranslate"><span class="pre">fit.summary()</span></code>. Here we can see that the log-likelihood of the model using fitted initial states is fractionally lower than the one using a heuristic for the initial states.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">fit</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                                 ETS Results
==============================================================================
Dep. Variable:                      y   No. Observations:                   49
Model:                       ETS(ANN)   Log Likelihood                -259.257
Date:                Wed, 02 Nov 2022   AIC                            524.514
Time:                        17:06:12   BIC                            530.189
Sample:                    01-01-1965   HQIC                           526.667
                         - 01-01-2013   Scale                         2307.767
Covariance Type:               approx
===================================================================================
                      coef    std err          z      P&gt;|z|      [0.025      0.975]
-----------------------------------------------------------------------------------
smoothing_level     0.9999      0.132      7.551      0.000       0.740       1.259
initial_level     110.7930     48.110      2.303      0.021      16.499     205.087
===================================================================================
Ljung-Box (Q):                        1.87   Jarque-Bera (JB):                20.78
Prob(Q):                              0.39   Prob(JB):                         0.00
Heteroskedasticity (H):               0.49   Skew:                            -1.04
Prob(H) (two-sided):                  0.16   Kurtosis:                         5.42
===================================================================================

Warnings:
[1] Covariance matrix calculated using numerical (complex-step) differentiation.
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">fit_heuristic</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                                 ETS Results
==============================================================================
Dep. Variable:                      y   No. Observations:                   49
Model:                       ETS(ANN)   Log Likelihood                -260.521
Date:                Wed, 02 Nov 2022   AIC                            525.042
Time:                        17:06:12   BIC                            528.826
Sample:                    01-01-1965   HQIC                           526.477
                         - 01-01-2013   Scale                         2429.964
Covariance Type:               approx
===================================================================================
                      coef    std err          z      P&gt;|z|      [0.025      0.975]
-----------------------------------------------------------------------------------
smoothing_level     0.9999      0.132      7.559      0.000       0.741       1.259
==============================================
              initialization method: heuristic
----------------------------------------------
initial_level                          33.6309
===================================================================================
Ljung-Box (Q):                        1.85   Jarque-Bera (JB):                18.42
Prob(Q):                              0.40   Prob(JB):                         0.00
Heteroskedasticity (H):               0.44   Skew:                            -1.02
Prob(H) (two-sided):                  0.11   Kurtosis:                         5.21
===================================================================================

Warnings:
[1] Covariance matrix calculated using numerical (complex-step) differentiation.
</pre></div></div>
</div>
</section>
<section id="Holt-Winters’-seasonal-method">
<h2 id="Holt-Winters’-seasonal-method">Holt-Winters’ seasonal method<a class="headerlink" href="#Holt-Winters’-seasonal-method" title="Permalink to this heading">¶</a></h2>
<p>The exponential smoothing method can be modified to incorporate a trend and a seasonal component. In the additive Holt-Winters’ method, the seasonal component is added to the rest. This model corresponds to the ETS(A, A, A) model, and has the following state space formulation:</p>
<p><span class="math">\begin{align}
y_t &amp;= l_{t-1} + b_{t-1} + s_{t-m} + e_t\\
l_{t} &amp;= l_{t-1} + b_{t-1} + \alpha e_t\\
b_{t} &amp;= b_{t-1} + \beta e_t\\
s_{t} &amp;= s_{t-m} + \gamma e_t
\end{align}</span></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">austourists_data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="mf">30.05251300</span><span class="p">,</span>
    <span class="mf">19.14849600</span><span class="p">,</span>
    <span class="mf">25.31769200</span><span class="p">,</span>
    <span class="mf">27.59143700</span><span class="p">,</span>
    <span class="mf">32.07645600</span><span class="p">,</span>
    <span class="mf">23.48796100</span><span class="p">,</span>
    <span class="mf">28.47594000</span><span class="p">,</span>
    <span class="mf">35.12375300</span><span class="p">,</span>
    <span class="mf">36.83848500</span><span class="p">,</span>
    <span class="mf">25.00701700</span><span class="p">,</span>
    <span class="mf">30.72223000</span><span class="p">,</span>
    <span class="mf">28.69375900</span><span class="p">,</span>
    <span class="mf">36.64098600</span><span class="p">,</span>
    <span class="mf">23.82460900</span><span class="p">,</span>
    <span class="mf">29.31168300</span><span class="p">,</span>
    <span class="mf">31.77030900</span><span class="p">,</span>
    <span class="mf">35.17787700</span><span class="p">,</span>
    <span class="mf">19.77524400</span><span class="p">,</span>
    <span class="mf">29.60175000</span><span class="p">,</span>
    <span class="mf">34.53884200</span><span class="p">,</span>
    <span class="mf">41.27359900</span><span class="p">,</span>
    <span class="mf">26.65586200</span><span class="p">,</span>
    <span class="mf">28.27985900</span><span class="p">,</span>
    <span class="mf">35.19115300</span><span class="p">,</span>
    <span class="mf">42.20566386</span><span class="p">,</span>
    <span class="mf">24.64917133</span><span class="p">,</span>
    <span class="mf">32.66733514</span><span class="p">,</span>
    <span class="mf">37.25735401</span><span class="p">,</span>
    <span class="mf">45.24246027</span><span class="p">,</span>
    <span class="mf">29.35048127</span><span class="p">,</span>
    <span class="mf">36.34420728</span><span class="p">,</span>
    <span class="mf">41.78208136</span><span class="p">,</span>
    <span class="mf">49.27659843</span><span class="p">,</span>
    <span class="mf">31.27540139</span><span class="p">,</span>
    <span class="mf">37.85062549</span><span class="p">,</span>
    <span class="mf">38.83704413</span><span class="p">,</span>
    <span class="mf">51.23690034</span><span class="p">,</span>
    <span class="mf">31.83855162</span><span class="p">,</span>
    <span class="mf">41.32342126</span><span class="p">,</span>
    <span class="mf">42.79900337</span><span class="p">,</span>
    <span class="mf">55.70835836</span><span class="p">,</span>
    <span class="mf">33.40714492</span><span class="p">,</span>
    <span class="mf">42.31663797</span><span class="p">,</span>
    <span class="mf">45.15712257</span><span class="p">,</span>
    <span class="mf">59.57607996</span><span class="p">,</span>
    <span class="mf">34.83733016</span><span class="p">,</span>
    <span class="mf">44.84168072</span><span class="p">,</span>
    <span class="mf">46.97124960</span><span class="p">,</span>
    <span class="mf">60.01903094</span><span class="p">,</span>
    <span class="mf">38.37117851</span><span class="p">,</span>
    <span class="mf">46.97586413</span><span class="p">,</span>
    <span class="mf">50.73379646</span><span class="p">,</span>
    <span class="mf">61.64687319</span><span class="p">,</span>
    <span class="mf">39.29956937</span><span class="p">,</span>
    <span class="mf">52.67120908</span><span class="p">,</span>
    <span class="mf">54.33231689</span><span class="p">,</span>
    <span class="mf">66.83435838</span><span class="p">,</span>
    <span class="mf">40.87118847</span><span class="p">,</span>
    <span class="mf">51.82853579</span><span class="p">,</span>
    <span class="mf">57.49190993</span><span class="p">,</span>
    <span class="mf">65.25146985</span><span class="p">,</span>
    <span class="mf">43.06120822</span><span class="p">,</span>
    <span class="mf">54.76075713</span><span class="p">,</span>
    <span class="mf">59.83447494</span><span class="p">,</span>
    <span class="mf">73.25702747</span><span class="p">,</span>
    <span class="mf">47.69662373</span><span class="p">,</span>
    <span class="mf">61.09776802</span><span class="p">,</span>
    <span class="mf">66.05576122</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">"1999-03-01"</span><span class="p">,</span> <span class="s2">"2015-12-01"</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">"3MS"</span><span class="p">)</span>
<span class="n">austourists</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">austourists_data</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>
<span class="n">austourists</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Australian Tourists"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0, 0.5, 'Australian Tourists')
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_notebooks_generated_ets_13_1.png" src="../../../_images/examples_notebooks_generated_ets_13_1.png"/>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># fit in statsmodels</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">ETSModel</span><span class="p">(</span>
    <span class="n">austourists</span><span class="p">,</span>
    <span class="n">error</span><span class="o">=</span><span class="s2">"add"</span><span class="p">,</span>
    <span class="n">trend</span><span class="o">=</span><span class="s2">"add"</span><span class="p">,</span>
    <span class="n">seasonal</span><span class="o">=</span><span class="s2">"add"</span><span class="p">,</span>
    <span class="n">damped_trend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">seasonal_periods</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">fit</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>

<span class="c1"># fit with R params</span>
<span class="n">params_R</span> <span class="o">=</span> <span class="p">[</span>
    <span class="mf">0.35445427</span><span class="p">,</span>
    <span class="mf">0.03200749</span><span class="p">,</span>
    <span class="mf">0.39993387</span><span class="p">,</span>
    <span class="mf">0.97999997</span><span class="p">,</span>
    <span class="mf">24.01278357</span><span class="p">,</span>
    <span class="mf">0.97770147</span><span class="p">,</span>
    <span class="mf">1.76951063</span><span class="p">,</span>
    <span class="o">-</span><span class="mf">0.50735902</span><span class="p">,</span>
    <span class="o">-</span><span class="mf">6.61171798</span><span class="p">,</span>
    <span class="mf">5.34956637</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">fit_R</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">smooth</span><span class="p">(</span><span class="n">params_R</span><span class="p">)</span>

<span class="n">austourists</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"data"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">"Australian Tourists"</span><span class="p">)</span>

<span class="n">fit</span><span class="o">.</span><span class="n">fittedvalues</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"statsmodels fit"</span><span class="p">)</span>
<span class="n">fit_R</span><span class="o">.</span><span class="n">fittedvalues</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"R fit"</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">"--"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
RUNNING THE L-BFGS-B CODE

           * * *

Machine precision = 2.220D-16
 N =            9     M =           10

At X0         1 variables are exactly at the bounds

At iterate    0    f=  3.40132D+00    |proj g|=  9.88789D-01

At iterate    1    f=  2.58255D+00    |proj g|=  9.99244D-01

At iterate    2    f=  2.49918D+00    |proj g|=  2.90033D-01

At iterate    3    f=  2.48198D+00    |proj g|=  2.44942D-01

At iterate    4    f=  2.43118D+00    |proj g|=  7.29715D-02

At iterate    5    f=  2.42924D+00    |proj g|=  7.03572D-02

At iterate    6    f=  2.42851D+00    |proj g|=  4.66401D-02

At iterate    7    f=  2.42794D+00    |proj g|=  2.92420D-02

At iterate    8    f=  2.42784D+00    |proj g|=  2.53311D-02

At iterate    9    f=  2.42721D+00    |proj g|=  1.89532D-02

At iterate   10    f=  2.42622D+00    |proj g|=  3.18651D-02

At iterate   11    f=  2.42512D+00    |proj g|=  3.53011D-02

At iterate   12    f=  2.42383D+00    |proj g|=  3.65638D-02

At iterate   13    f=  2.42196D+00    |proj g|=  4.83560D-02

At iterate   14    f=  2.41828D+00    |proj g|=  5.99631D-02

At iterate   15    f=  2.41131D+00    |proj g|=  6.89763D-02

At iterate   16    f=  2.40200D+00    |proj g|=  7.65493D-02

At iterate   17    f=  2.39385D+00    |proj g|=  8.77260D-02

At iterate   18    f=  2.37917D+00    |proj g|=  1.52245D-01

At iterate   19    f=  2.35438D+00    |proj g|=  2.40363D-01

At iterate   20    f=  2.33832D+00    |proj g|=  2.53143D-01

At iterate   21    f=  2.33774D+00    |proj g|=  2.54902D-01

At iterate   22    f=  2.33766D+00    |proj g|=  2.49994D-01

At iterate   23    f=  2.33766D+00    |proj g|=  2.50104D-01
  Positive dir derivative in projection
  Using the backtracking step

At iterate   24    f=  2.32726D+00    |proj g|=  2.22975D-01

At iterate   25    f=  2.29784D+00    |proj g|=  1.16941D-01

At iterate   26    f=  2.29783D+00    |proj g|=  1.19878D-01

At iterate   27    f=  2.29783D+00    |proj g|=  1.21984D-01

At iterate   28    f=  2.29781D+00    |proj g|=  1.25790D-01

At iterate   29    f=  2.29113D+00    |proj g|=  8.44534D-02

At iterate   30    f=  2.27689D+00    |proj g|=  2.30209D-01

At iterate   31    f=  2.27528D+00    |proj g|=  1.25984D-01

At iterate   32    f=  2.27316D+00    |proj g|=  6.97733D-02

At iterate   33    f=  2.27205D+00    |proj g|=  2.60402D-02

At iterate   34    f=  2.27180D+00    |proj g|=  1.96301D-02

At iterate   35    f=  2.27153D+00    |proj g|=  4.38765D-03

At iterate   36    f=  2.27146D+00    |proj g|=  4.78666D-03

At iterate   37    f=  2.27062D+00    |proj g|=  2.37355D-02

At iterate   38    f=  2.26946D+00    |proj g|=  3.82704D-02

At iterate   39    f=  2.26699D+00    |proj g|=  4.70319D-02

At iterate   40    f=  2.26462D+00    |proj g|=  3.43058D-02

At iterate   41    f=  2.26203D+00    |proj g|=  2.18685D-02

At iterate   42    f=  2.26006D+00    |proj g|=  2.83495D-02

At iterate   43    f=  2.25881D+00    |proj g|=  4.32037D-02

At iterate   44    f=  2.25609D+00    |proj g|=  4.94953D-02

At iterate   45    f=  2.25369D+00    |proj g|=  1.20176D-01

At iterate   46    f=  2.25097D+00    |proj g|=  2.60216D-02

At iterate   47    f=  2.24903D+00    |proj g|=  3.29519D-02

At iterate   48    f=  2.24813D+00    |proj g|=  4.94365D-02

At iterate   49    f=  2.24642D+00    |proj g|=  4.11819D-02

At iterate   50    f=  2.24591D+00    |proj g|=  3.68314D-02

At iterate   51    f=  2.24526D+00    |proj g|=  1.04519D-02

At iterate   52    f=  2.24519D+00    |proj g|=  2.51985D-03

At iterate   53    f=  2.24519D+00    |proj g|=  2.27445D-03

At iterate   54    f=  2.24517D+00    |proj g|=  5.45697D-03

At iterate   55    f=  2.24516D+00    |proj g|=  1.00389D-02

At iterate   56    f=  2.24512D+00    |proj g|=  1.65810D-02

At iterate   57    f=  2.24506D+00    |proj g|=  1.84056D-02

At iterate   58    f=  2.24493D+00    |proj g|=  1.66877D-02

At iterate   59    f=  2.24475D+00    |proj g|=  1.22406D-02

At iterate   60    f=  2.24455D+00    |proj g|=  3.20739D-03

At iterate   61    f=  2.24452D+00    |proj g|=  1.36433D-03

At iterate   62    f=  2.24452D+00    |proj g|=  1.45146D-03

At iterate   63    f=  2.24452D+00    |proj g|=  9.39737D-04

At iterate   64    f=  2.24452D+00    |proj g|=  9.74687D-04

At iterate   65    f=  2.24452D+00    |proj g|=  6.42419D-04

At iterate   66    f=  2.24452D+00    |proj g|=  3.26539D-04

At iterate   67    f=  2.24452D+00    |proj g|=  3.99325D-04

At iterate   68    f=  2.24452D+00    |proj g|=  7.01572D-04

At iterate   69    f=  2.24452D+00    |proj g|=  1.01759D-03

At iterate   70    f=  2.24452D+00    |proj g|=  1.39750D-03

At iterate   71    f=  2.24451D+00    |proj g|=  1.67200D-03

At iterate   72    f=  2.24451D+00    |proj g|=  1.42490D-03

At iterate   73    f=  2.24451D+00    |proj g|=  1.05196D-03

At iterate   74    f=  2.24451D+00    |proj g|=  4.36984D-04

At iterate   75    f=  2.24451D+00    |proj g|=  1.07470D-04

At iterate   76    f=  2.24451D+00    |proj g|=  1.10312D-04

At iterate   77    f=  2.24451D+00    |proj g|=  1.12932D-04

At iterate   78    f=  2.24451D+00    |proj g|=  7.29194D-05

At iterate   79    f=  2.24451D+00    |proj g|=  5.37348D-05

At iterate   80    f=  2.24451D+00    |proj g|=  9.29035D-05

At iterate   81    f=  2.24451D+00    |proj g|=  1.07736D-04

At iterate   82    f=  2.24451D+00    |proj g|=  2.11209D-04

At iterate   83    f=  2.24451D+00    |proj g|=  2.05702D-04

At iterate   84    f=  2.24451D+00    |proj g|=  9.85434D-05

At iterate   85    f=  2.24451D+00    |proj g|=  6.38600D-05

At iterate   86    f=  2.24451D+00    |proj g|=  1.66445D-04

At iterate   87    f=  2.24451D+00    |proj g|=  1.44196D-04

At iterate   88    f=  2.24451D+00    |proj g|=  2.32481D-04

At iterate   89    f=  2.24451D+00    |proj g|=  2.30749D-04

At iterate   90    f=  2.24451D+00    |proj g|=  1.80833D-04

At iterate   91    f=  2.24451D+00    |proj g|=  9.96536D-05

At iterate   92    f=  2.24451D+00    |proj g|=  4.37872D-05

           * * *

Tit   = total number of iterations
Tnf   = total number of function evaluations
Tnint = total number of segments explored during Cauchy searches
Skip  = number of BFGS updates skipped
Nact  = number of active bounds at final generalized Cauchy point
Projg = norm of the final projected gradient
F     = final function value

           * * *

   N    Tit     Tnf  Tnint  Skip  Nact     Projg        F
    9     92    113    100     0     1   4.379D-05   2.245D+00
  F =   2.2445125684008076

CONVERGENCE: REL_REDUCTION_OF_F_&lt;=_FACTR*EPSMCH
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.legend.Legend at 0x7f19b0f4add0&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_notebooks_generated_ets_14_2.png" src="../../../_images/examples_notebooks_generated_ets_14_2.png"/>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">fit</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                                 ETS Results
==============================================================================
Dep. Variable:                      y   No. Observations:                   68
Model:                      ETS(AAdA)   Log Likelihood                -152.627
Date:                Wed, 02 Nov 2022   AIC                            327.254
Time:                        17:06:13   BIC                            351.668
Sample:                    03-01-1999   HQIC                           336.928
                         - 12-01-2015   Scale                            5.213
Covariance Type:               approx
======================================================================================
                         coef    std err          z      P&gt;|z|      [0.025      0.975]
--------------------------------------------------------------------------------------
smoothing_level        0.3398      0.111      3.070      0.002       0.123       0.557
smoothing_trend        0.0259      0.008      3.158      0.002       0.010       0.042
smoothing_seasonal     0.4011      0.080      5.041      0.000       0.245       0.557
damping_trend          0.9800        nan        nan        nan         nan         nan
initial_level         29.4435   2.82e+04      0.001      0.999   -5.52e+04    5.52e+04
initial_trend          0.6142      0.392      1.565      0.118      -0.155       1.383
initial_seasonal.0    -3.4340   2.82e+04     -0.000      1.000   -5.52e+04    5.52e+04
initial_seasonal.1    -5.9537   2.82e+04     -0.000      1.000   -5.52e+04    5.52e+04
initial_seasonal.2   -11.4807   2.82e+04     -0.000      1.000   -5.52e+04    5.52e+04
initial_seasonal.3          0   2.82e+04          0      1.000   -5.52e+04    5.52e+04
===================================================================================
Ljung-Box (Q):                        5.76   Jarque-Bera (JB):                 7.70
Prob(Q):                              0.67   Prob(JB):                         0.02
Heteroskedasticity (H):               0.46   Skew:                            -0.63
Prob(H) (two-sided):                  0.07   Kurtosis:                         4.05
===================================================================================

Warnings:
[1] Covariance matrix calculated using numerical (complex-step) differentiation.
</pre></div></div>
</div>
</section>
<section id="Predictions">
<h2 id="Predictions">Predictions<a class="headerlink" href="#Predictions" title="Permalink to this heading">¶</a></h2>
<p>The ETS model can also be used for predicting. There are several different methods available: - <code class="docutils literal notranslate"><span class="pre">forecast</span></code>: makes out of sample predictions - <code class="docutils literal notranslate"><span class="pre">predict</span></code>: in sample and out of sample predictions - <code class="docutils literal notranslate"><span class="pre">simulate</span></code>: runs simulations of the statespace model - <code class="docutils literal notranslate"><span class="pre">get_prediction</span></code>: in sample and out of sample predictions, as well as prediction intervals</p>
<p>We can use them on our previously fitted model to predict from 2014 to 2020.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pred</span> <span class="o">=</span> <span class="n">fit</span><span class="o">.</span><span class="n">get_prediction</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s2">"2014"</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">"2020"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pred</span><span class="o">.</span><span class="n">summary_frame</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>mean</th>
<th>pi_lower</th>
<th>pi_upper</th>
</tr>
</thead>
<tbody>
<tr>
<th>2014-03-01</th>
<td>67.611079</td>
<td>63.136107</td>
<td>72.086051</td>
</tr>
<tr>
<th>2014-06-01</th>
<td>42.814677</td>
<td>38.339705</td>
<td>47.289649</td>
</tr>
<tr>
<th>2014-09-01</th>
<td>54.106487</td>
<td>49.631515</td>
<td>58.581459</td>
</tr>
<tr>
<th>2014-12-01</th>
<td>57.928408</td>
<td>53.453435</td>
<td>62.403380</td>
</tr>
<tr>
<th>2015-03-01</th>
<td>68.422018</td>
<td>63.947046</td>
<td>72.896990</td>
</tr>
<tr>
<th>2015-06-01</th>
<td>47.277788</td>
<td>42.802816</td>
<td>51.752760</td>
</tr>
<tr>
<th>2015-09-01</th>
<td>58.954778</td>
<td>54.479806</td>
<td>63.429750</td>
</tr>
<tr>
<th>2015-12-01</th>
<td>63.982304</td>
<td>59.507332</td>
<td>68.457277</td>
</tr>
<tr>
<th>2016-03-01</th>
<td>75.905406</td>
<td>71.430433</td>
<td>80.380378</td>
</tr>
<tr>
<th>2016-06-01</th>
<td>51.418127</td>
<td>46.654024</td>
<td>56.182229</td>
</tr>
<tr>
<th>2016-09-01</th>
<td>63.703395</td>
<td>58.629499</td>
<td>68.777291</td>
</tr>
<tr>
<th>2016-12-01</th>
<td>67.978296</td>
<td>62.575966</td>
<td>73.380625</td>
</tr>
<tr>
<th>2017-03-01</th>
<td>78.315993</td>
<td>71.735938</td>
<td>84.896048</td>
</tr>
<tr>
<th>2017-06-01</th>
<td>53.780502</td>
<td>46.883518</td>
<td>60.677487</td>
</tr>
<tr>
<th>2017-09-01</th>
<td>66.018523</td>
<td>58.788390</td>
<td>73.248656</td>
</tr>
<tr>
<th>2017-12-01</th>
<td>70.247121</td>
<td>62.668984</td>
<td>77.825259</td>
</tr>
<tr>
<th>2018-03-01</th>
<td>80.539442</td>
<td>71.892906</td>
<td>89.185979</td>
</tr>
<tr>
<th>2018-06-01</th>
<td>55.959483</td>
<td>46.968321</td>
<td>64.950644</td>
</tr>
<tr>
<th>2018-09-01</th>
<td>68.153924</td>
<td>58.805365</td>
<td>77.502483</td>
</tr>
<tr>
<th>2018-12-01</th>
<td>72.339814</td>
<td>62.622088</td>
<td>82.057540</td>
</tr>
<tr>
<th>2019-03-01</th>
<td>82.590281</td>
<td>71.864871</td>
<td>93.315692</td>
</tr>
<tr>
<th>2019-06-01</th>
<td>57.969305</td>
<td>46.875993</td>
<td>69.062616</td>
</tr>
<tr>
<th>2019-09-01</th>
<td>70.123549</td>
<td>58.652213</td>
<td>81.594886</td>
</tr>
<tr>
<th>2019-12-01</th>
<td>74.270047</td>
<td>62.411331</td>
<td>86.128764</td>
</tr>
<tr>
<th>2020-03-01</th>
<td>84.481910</td>
<td>71.656489</td>
<td>97.307330</td>
</tr>
</tbody>
</table>
</div></div>
</div>
<p>In this case the prediction intervals were calculated using an analytical formula. This is not available for all models. For these other models, prediction intervals are calculated by performing multiple simulations (1000 by default) and using the percentiles of the simulation results. This is done internally by the <code class="docutils literal notranslate"><span class="pre">get_prediction</span></code> method.</p>
<p>We can also manually run simulations, e.g. to plot them. Since the data ranges until end of 2015, we have to simulate from the first quarter of 2016 to the first quarter of 2020, which means 17 steps.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simulated</span> <span class="o">=</span> <span class="n">fit</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">anchor</span><span class="o">=</span><span class="s2">"end"</span><span class="p">,</span> <span class="n">nsimulations</span><span class="o">=</span><span class="mi">17</span><span class="p">,</span> <span class="n">repetitions</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">simulated</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
    <span class="n">simulated</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"_"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"gray"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s2">"mean"</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"mean prediction"</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s2">"pi_lower"</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">linestyle</span><span class="o">=</span><span class="s2">"--"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"tab:blue"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"95</span><span class="si">% i</span><span class="s2">nterval"</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s2">"pi_upper"</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">linestyle</span><span class="o">=</span><span class="s2">"--"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"tab:blue"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"_"</span><span class="p">)</span>
<span class="n">pred</span><span class="o">.</span><span class="n">endog</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">"data"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.legend.Legend at 0x7f19b0b13d60&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/examples_notebooks_generated_ets_21_1.png" src="../../../_images/examples_notebooks_generated_ets_21_1.png"/>
</div>
</div>
<p>In this case, we chose “end” as simulation anchor, which means that the first simulated value will be the first out of sample value. It is also possible to choose other anchor inside the sample.</p>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="statespace_custom_models.html" title="Custom statespace models"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Custom statespace models </span>
              </div>
            </a>
          
          
            <a href="statespace_concentrated_scale.html" title="State space models - concentrating the scale out of the likelihood function"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> State space models - concentrating the scale out of the likelihood function </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2009-2019, Josef Perktold, Skipper Seabold, Jonathan Taylor, statsmodels-developers.
              
          </div>
            Last updated on
              Nov 02, 2022.
            <br/>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../../../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>