

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../../../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../../../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../../../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../../../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../../../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>statsmodels.graphics.gofplots &#8212; statsmodels</title>
  <link rel="icon" type="image/png" sizes="32x32" href="../../../_static/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../../../_static/icons/favicon-16x16.png">
  <link rel="manifest" href="../../../_static/icons/site.webmanifest">
  <link rel="mask-icon" href="../../../_static/icons/safari-pinned-tab.svg" color="#919191">
  <meta name="msapplication-TileColor" content="#2b5797">
  <meta name="msapplication-config" content="../../../_static/icons/browserconfig.xml">
  <link rel="stylesheet" href="../../../_static/stylesheets/examples.css">
  <link rel="stylesheet" href="../../../_static/stylesheets/deprecation.css">
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/plot_directive.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../../../about.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=indigo data-md-color-accent=blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#_modules/statsmodels/graphics/gofplots" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../../index.html" title="statsmodels"
           class="md-header-nav__button md-logo">
          
              <img src="../../../_static/statsmodels-logo-v2-bw.svg" height="26"
                   alt="statsmodels logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">statsmodels 0.13.5</span>
          <span class="md-header-nav__topic"> statsmodels.graphics.gofplots </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../../../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/statsmodels/statsmodels" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    statsmodels
  </div>
</a>
          </div>
        </div>
      
      
  
  <script src="../../../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../../../../versions-v2.json",
        target_loc = "../../../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../../index.html" class="md-tabs__link">Module code</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../index.html" title="statsmodels" class="md-nav__button md-logo">
      
        <img src="../../../_static/statsmodels-logo-v2-bw.svg" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../../../index.html"
       title="statsmodels">statsmodels 0.13.5</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/statsmodels/statsmodels" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    statsmodels
  </div>
</a>
    </div>
  
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../../../install.html" class="md-nav__link">Installing statsmodels</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../gettingstarted.html" class="md-nav__link">Getting started</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../user-guide.html" class="md-nav__link">User Guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../examples/index.html" class="md-nav__link">Examples</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../api.html" class="md-nav__link">API Reference</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../about.html" class="md-nav__link">About statsmodels</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../dev/index.html" class="md-nav__link">Developer Page</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../release/index.html" class="md-nav__link">Release Notes</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
  <ul class="md-nav__list" data-md-scrollfix="">
    

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <h1 id="modules-statsmodels-graphics-gofplots--page-root">Source code for statsmodels.graphics.gofplots</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">statsmodels.compat.python</span> <span class="kn">import</span> <span class="n">lzip</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>

<span class="kn">from</span> <span class="nn">statsmodels.distributions</span> <span class="kn">import</span> <span class="n">ECDF</span>
<span class="kn">from</span> <span class="nn">statsmodels.regression.linear_model</span> <span class="kn">import</span> <span class="n">OLS</span>
<span class="kn">from</span> <span class="nn">statsmodels.tools.decorators</span> <span class="kn">import</span> <span class="n">cache_readonly</span>
<span class="kn">from</span> <span class="nn">statsmodels.tools.tools</span> <span class="kn">import</span> <span class="n">add_constant</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">utils</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"qqplot"</span><span class="p">,</span> <span class="s2">"qqplot_2samples"</span><span class="p">,</span> <span class="s2">"qqline"</span><span class="p">,</span> <span class="s2">"ProbPlot"</span><span class="p">]</span>


<div class="viewcode-block" id="ProbPlot"><a class="viewcode-back" href="../../../generated/statsmodels.graphics.gofplots.ProbPlot.html#statsmodels.graphics.gofplots.ProbPlot">[docs]</a><span class="k">class</span> <span class="nc">ProbPlot</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Q-Q and P-P Probability Plots</span>

<span class="sd">    Can take arguments specifying the parameters for dist or fit them</span>
<span class="sd">    automatically. (See fit under kwargs.)</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : array_like</span>
<span class="sd">        A 1d data array</span>
<span class="sd">    dist : callable</span>
<span class="sd">        Compare x against dist. A scipy.stats or statsmodels distribution. The</span>
<span class="sd">        default is scipy.stats.distributions.norm (a standard normal). Can be</span>
<span class="sd">        a SciPy frozen distribution.</span>
<span class="sd">    fit : bool</span>
<span class="sd">        If fit is false, loc, scale, and distargs are passed to the</span>
<span class="sd">        distribution. If fit is True then the parameters for dist are fit</span>
<span class="sd">        automatically using dist.fit. The quantiles are formed from the</span>
<span class="sd">        standardized data, after subtracting the fitted loc and dividing by</span>
<span class="sd">        the fitted scale. fit cannot be used if dist is a SciPy frozen</span>
<span class="sd">        distribution.</span>
<span class="sd">    distargs : tuple</span>
<span class="sd">        A tuple of arguments passed to dist to specify it fully so dist.ppf</span>
<span class="sd">        may be called. distargs must not contain loc or scale. These values</span>
<span class="sd">        must be passed using the loc or scale inputs. distargs cannot be used</span>
<span class="sd">        if dist is a SciPy frozen distribution.</span>
<span class="sd">    a : float</span>
<span class="sd">        Offset for the plotting position of an expected order statistic, for</span>
<span class="sd">        example. The plotting positions are given by</span>
<span class="sd">        (i - a)/(nobs - 2*a + 1) for i in range(0,nobs+1)</span>
<span class="sd">    loc : float</span>
<span class="sd">        Location parameter for dist. Cannot be used if dist is a SciPy frozen</span>
<span class="sd">        distribution.</span>
<span class="sd">    scale : float</span>
<span class="sd">        Scale parameter for dist. Cannot be used if dist is a SciPy frozen</span>
<span class="sd">        distribution.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    scipy.stats.probplot</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    1) Depends on matplotlib.</span>
<span class="sd">    2) If `fit` is True then the parameters are fit using the</span>
<span class="sd">        distribution's `fit()` method.</span>
<span class="sd">    3) The call signatures for the `qqplot`, `ppplot`, and `probplot`</span>
<span class="sd">        methods are similar, so examples 1 through 4 apply to all</span>
<span class="sd">        three methods.</span>
<span class="sd">    4) The three plotting methods are summarized below:</span>
<span class="sd">        ppplot : Probability-Probability plot</span>
<span class="sd">            Compares the sample and theoretical probabilities (percentiles).</span>
<span class="sd">        qqplot : Quantile-Quantile plot</span>
<span class="sd">            Compares the sample and theoretical quantiles</span>
<span class="sd">        probplot : Probability plot</span>
<span class="sd">            Same as a Q-Q plot, however probabilities are shown in the scale of</span>
<span class="sd">            the theoretical distribution (x-axis) and the y-axis contains</span>
<span class="sd">            unscaled quantiles of the sample data.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    The first example shows a Q-Q plot for regression residuals</span>

<span class="sd">    &gt;&gt;&gt; # example 1</span>
<span class="sd">    &gt;&gt;&gt; import statsmodels.api as sm</span>
<span class="sd">    &gt;&gt;&gt; from matplotlib import pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; data = sm.datasets.longley.load()</span>
<span class="sd">    &gt;&gt;&gt; data.exog = sm.add_constant(data.exog)</span>
<span class="sd">    &gt;&gt;&gt; model = sm.OLS(data.endog, data.exog)</span>
<span class="sd">    &gt;&gt;&gt; mod_fit = model.fit()</span>
<span class="sd">    &gt;&gt;&gt; res = mod_fit.resid # residuals</span>
<span class="sd">    &gt;&gt;&gt; pplot = sm.ProbPlot(res)</span>
<span class="sd">    &gt;&gt;&gt; fig = pplot.qqplot()</span>
<span class="sd">    &gt;&gt;&gt; h = plt.title("Ex. 1 - qqplot - residuals of OLS fit")</span>
<span class="sd">    &gt;&gt;&gt; plt.show()</span>

<span class="sd">    qqplot of the residuals against quantiles of t-distribution with 4</span>
<span class="sd">    degrees of freedom:</span>

<span class="sd">    &gt;&gt;&gt; # example 2</span>
<span class="sd">    &gt;&gt;&gt; import scipy.stats as stats</span>
<span class="sd">    &gt;&gt;&gt; pplot = sm.ProbPlot(res, stats.t, distargs=(4,))</span>
<span class="sd">    &gt;&gt;&gt; fig = pplot.qqplot()</span>
<span class="sd">    &gt;&gt;&gt; h = plt.title("Ex. 2 - qqplot - residuals against quantiles of t-dist")</span>
<span class="sd">    &gt;&gt;&gt; plt.show()</span>

<span class="sd">    qqplot against same as above, but with mean 3 and std 10:</span>

<span class="sd">    &gt;&gt;&gt; # example 3</span>
<span class="sd">    &gt;&gt;&gt; pplot = sm.ProbPlot(res, stats.t, distargs=(4,), loc=3, scale=10)</span>
<span class="sd">    &gt;&gt;&gt; fig = pplot.qqplot()</span>
<span class="sd">    &gt;&gt;&gt; h = plt.title("Ex. 3 - qqplot - resids vs quantiles of t-dist")</span>
<span class="sd">    &gt;&gt;&gt; plt.show()</span>

<span class="sd">    Automatically determine parameters for t distribution including the</span>
<span class="sd">    loc and scale:</span>

<span class="sd">    &gt;&gt;&gt; # example 4</span>
<span class="sd">    &gt;&gt;&gt; pplot = sm.ProbPlot(res, stats.t, fit=True)</span>
<span class="sd">    &gt;&gt;&gt; fig = pplot.qqplot(line="45")</span>
<span class="sd">    &gt;&gt;&gt; h = plt.title("Ex. 4 - qqplot - resids vs. quantiles of fitted t-dist")</span>
<span class="sd">    &gt;&gt;&gt; plt.show()</span>

<span class="sd">    A second `ProbPlot` object can be used to compare two separate sample</span>
<span class="sd">    sets by using the `other` kwarg in the `qqplot` and `ppplot` methods.</span>

<span class="sd">    &gt;&gt;&gt; # example 5</span>
<span class="sd">    &gt;&gt;&gt; import numpy as np</span>
<span class="sd">    &gt;&gt;&gt; x = np.random.normal(loc=8.25, scale=2.75, size=37)</span>
<span class="sd">    &gt;&gt;&gt; y = np.random.normal(loc=8.75, scale=3.25, size=37)</span>
<span class="sd">    &gt;&gt;&gt; pp_x = sm.ProbPlot(x, fit=True)</span>
<span class="sd">    &gt;&gt;&gt; pp_y = sm.ProbPlot(y, fit=True)</span>
<span class="sd">    &gt;&gt;&gt; fig = pp_x.qqplot(line="45", other=pp_y)</span>
<span class="sd">    &gt;&gt;&gt; h = plt.title("Ex. 5 - qqplot - compare two sample sets")</span>
<span class="sd">    &gt;&gt;&gt; plt.show()</span>

<span class="sd">    In qqplot, sample size of `other` can be equal or larger than the first.</span>
<span class="sd">    In case of larger, size of `other` samples will be reduced to match the</span>
<span class="sd">    size of the first by interpolation</span>

<span class="sd">    &gt;&gt;&gt; # example 6</span>
<span class="sd">    &gt;&gt;&gt; x = np.random.normal(loc=8.25, scale=2.75, size=37)</span>
<span class="sd">    &gt;&gt;&gt; y = np.random.normal(loc=8.75, scale=3.25, size=57)</span>
<span class="sd">    &gt;&gt;&gt; pp_x = sm.ProbPlot(x, fit=True)</span>
<span class="sd">    &gt;&gt;&gt; pp_y = sm.ProbPlot(y, fit=True)</span>
<span class="sd">    &gt;&gt;&gt; fig = pp_x.qqplot(line="45", other=pp_y)</span>
<span class="sd">    &gt;&gt;&gt; title = "Ex. 6 - qqplot - compare different sample sizes"</span>
<span class="sd">    &gt;&gt;&gt; h = plt.title(title)</span>
<span class="sd">    &gt;&gt;&gt; plt.show()</span>

<span class="sd">    In ppplot, sample size of `other` and the first can be different. `other`</span>
<span class="sd">    will be used to estimate an empirical cumulative distribution function</span>
<span class="sd">    (ECDF). ECDF(x) will be plotted against p(x)=0.5/n, 1.5/n, ..., (n-0.5)/n</span>
<span class="sd">    where x are sorted samples from the first.</span>

<span class="sd">    &gt;&gt;&gt; # example 7</span>
<span class="sd">    &gt;&gt;&gt; x = np.random.normal(loc=8.25, scale=2.75, size=37)</span>
<span class="sd">    &gt;&gt;&gt; y = np.random.normal(loc=8.75, scale=3.25, size=57)</span>
<span class="sd">    &gt;&gt;&gt; pp_x = sm.ProbPlot(x, fit=True)</span>
<span class="sd">    &gt;&gt;&gt; pp_y = sm.ProbPlot(y, fit=True)</span>
<span class="sd">    &gt;&gt;&gt; pp_y.ppplot(line="45", other=pp_x)</span>
<span class="sd">    &gt;&gt;&gt; plt.title("Ex. 7A- ppplot - compare two sample sets, other=pp_x")</span>
<span class="sd">    &gt;&gt;&gt; pp_x.ppplot(line="45", other=pp_y)</span>
<span class="sd">    &gt;&gt;&gt; plt.title("Ex. 7B- ppplot - compare two sample sets, other=pp_y")</span>
<span class="sd">    &gt;&gt;&gt; plt.show()</span>

<span class="sd">    The following plot displays some options, follow the link to see the</span>
<span class="sd">    code.</span>

<span class="sd">    .. plot:: plots/graphics_gofplots_qqplot.py</span>
<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">dist</span><span class="o">=</span><span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="p">,</span>
        <span class="n">fit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">distargs</span><span class="o">=</span><span class="p">(),</span>
        <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">loc</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nobs</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">distargs</span> <span class="o">=</span> <span class="n">distargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit</span> <span class="o">=</span> <span class="n">fit</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_is_frozen</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="n">stats</span><span class="o">.</span><span class="n">distributions</span><span class="o">.</span><span class="n">rv_frozen</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_frozen</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="n">fit</span> <span class="ow">or</span> <span class="n">loc</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">scale</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">distargs</span> <span class="o">!=</span> <span class="p">()</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">"Frozen distributions cannot be combined with fit, loc, scale"</span>
                <span class="s2">" or distargs."</span>
            <span class="p">)</span>
        <span class="c1"># propertes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_frozen</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span>
            <span class="n">dist_gen</span> <span class="o">=</span> <span class="n">dist</span><span class="o">.</span><span class="n">dist</span>
            <span class="n">shapes</span> <span class="o">=</span> <span class="n">dist_gen</span><span class="o">.</span><span class="n">shapes</span>
            <span class="k">if</span> <span class="n">shapes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">shape_args</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">strip</span><span class="p">,</span> <span class="n">shapes</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">shape_args</span> <span class="o">=</span> <span class="p">()</span>
            <span class="n">numargs</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape_args</span><span class="p">)</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">dist</span><span class="o">.</span><span class="n">args</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">numargs</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">loc</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">numargs</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">loc</span> <span class="o">=</span> <span class="n">dist</span><span class="o">.</span><span class="n">kwds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"loc"</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">numargs</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">numargs</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">dist</span><span class="o">.</span><span class="n">kwds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"scale"</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
            <span class="n">fit_params</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">arg</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">shape_args</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">dist</span><span class="o">.</span><span class="n">kwds</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">dist</span><span class="o">.</span><span class="n">kwds</span><span class="p">[</span><span class="n">arg</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">dist</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">fit_params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="n">fit_params</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">loc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">fit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span> <span class="o">=</span> <span class="n">dist</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">distargs</span> <span class="ow">or</span> <span class="n">loc</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">scale</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span><span class="p">(</span><span class="o">*</span><span class="n">distargs</span><span class="p">,</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="n">loc</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">distargs</span> <span class="o">=</span> <span class="s2">", "</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">da</span><span class="p">)</span> <span class="k">for</span> <span class="n">da</span> <span class="ow">in</span> <span class="n">distargs</span><span class="p">])</span>
                <span class="n">cmd</span> <span class="o">=</span> <span class="s2">"dist(</span><span class="si">{distargs}</span><span class="s2">, loc=</span><span class="si">{loc}</span><span class="s2">, scale=</span><span class="si">{scale}</span><span class="s2">)"</span>
                <span class="n">cmd</span> <span class="o">=</span> <span class="n">cmd</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">distargs</span><span class="o">=</span><span class="n">distargs</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="n">loc</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="s2">"Initializing the distribution failed.  This "</span>
                    <span class="s2">"can occur if distargs contains loc or scale. "</span>
                    <span class="s2">"The distribution initialization command "</span>
                    <span class="s2">"is:</span><span class="se">\n</span><span class="si">{cmd}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cmd</span><span class="o">=</span><span class="n">cmd</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loc</span> <span class="o">=</span> <span class="n">loc</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">scale</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="n">distargs</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">scale</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loc</span> <span class="o">=</span> <span class="n">loc</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">scale</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="n">loc</span><span class="p">,</span> <span class="n">scale</span><span class="p">]</span>

    <span class="nd">@cache_readonly</span>
    <span class="k">def</span> <span class="nf">theoretical_percentiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Theoretical percentiles"""</span>
        <span class="k">return</span> <span class="n">plotting_pos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nobs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>

    <span class="nd">@cache_readonly</span>
    <span class="k">def</span> <span class="nf">theoretical_quantiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Theoretical quantiles"""</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="o">.</span><span class="n">ppf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theoretical_percentiles</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"</span><span class="si">%s</span><span class="s2"> requires more parameters to compute ppf"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"failed to compute the ppf of </span><span class="si">{0}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">raise</span> <span class="nb">type</span><span class="p">(</span><span class="n">exc</span><span class="p">)(</span><span class="n">msg</span><span class="p">)</span>

    <span class="nd">@cache_readonly</span>
    <span class="k">def</span> <span class="nf">sorted_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""sorted data"""</span>
        <span class="n">sorted_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">sorted_data</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">sorted_data</span>

    <span class="nd">@cache_readonly</span>
    <span class="k">def</span> <span class="nf">sample_quantiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""sample quantiles"""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">loc</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sorted_data</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">loc</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sorted_data</span>

    <span class="nd">@cache_readonly</span>
    <span class="k">def</span> <span class="nf">sample_percentiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Sample percentiles"""</span>
        <span class="n">_check_for</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="p">,</span> <span class="s2">"cdf"</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_frozen</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sorted_data</span><span class="p">)</span>
        <span class="n">quantiles</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sorted_data</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_params</span><span class="p">[</span>
            <span class="o">-</span><span class="mi">1</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="n">quantiles</span><span class="p">)</span>

<div class="viewcode-block" id="ProbPlot.ppplot"><a class="viewcode-back" href="../../../generated/statsmodels.graphics.gofplots.ProbPlot.ppplot.html#statsmodels.graphics.gofplots.ProbPlot.ppplot">[docs]</a>    <span class="k">def</span> <span class="nf">ppplot</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">xlabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">ylabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">line</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">other</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">plotkwargs</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Plot of the percentiles of x versus the percentiles of a distribution.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        xlabel : str or None, optional</span>
<span class="sd">            User-provided labels for the x-axis. If None (default),</span>
<span class="sd">            other values are used depending on the status of the kwarg `other`.</span>
<span class="sd">        ylabel : str or None, optional</span>
<span class="sd">            User-provided labels for the y-axis. If None (default),</span>
<span class="sd">            other values are used depending on the status of the kwarg `other`.</span>
<span class="sd">        line : {None, "45", "s", "r", q"}, optional</span>
<span class="sd">            Options for the reference line to which the data is compared:</span>

<span class="sd">            - "45": 45-degree line</span>
<span class="sd">            - "s": standardized line, the expected order statistics are</span>
<span class="sd">              scaled by the standard deviation of the given sample and have</span>
<span class="sd">              the mean added to them</span>
<span class="sd">            - "r": A regression line is fit</span>
<span class="sd">            - "q": A line is fit through the quartiles.</span>
<span class="sd">            - None: by default no reference line is added to the plot.</span>

<span class="sd">        other : ProbPlot, array_like, or None, optional</span>
<span class="sd">            If provided, ECDF(x) will be plotted against p(x) where x are</span>
<span class="sd">            sorted samples from `self`. ECDF is an empirical cumulative</span>
<span class="sd">            distribution function estimated from `other` and</span>
<span class="sd">            p(x) = 0.5/n, 1.5/n, ..., (n-0.5)/n where n is the number of</span>
<span class="sd">            samples in `self`. If an array-object is provided, it will be</span>
<span class="sd">            turned into a `ProbPlot` instance default parameters. If not</span>
<span class="sd">            provided (default), `self.dist(x)` is be plotted against p(x).</span>

<span class="sd">        ax : AxesSubplot, optional</span>
<span class="sd">            If given, this subplot is used to plot in instead of a new figure</span>
<span class="sd">            being created.</span>
<span class="sd">        **plotkwargs</span>
<span class="sd">            Additional arguments to be passed to the `plot` command.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Figure</span>
<span class="sd">            If `ax` is None, the created figure.  Otherwise the figure to which</span>
<span class="sd">            `ax` is connected.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">check_other</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">ProbPlot</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">check_other</span><span class="p">:</span>
                <span class="n">other</span> <span class="o">=</span> <span class="n">ProbPlot</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

            <span class="n">p_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theoretical_percentiles</span>
            <span class="n">ecdf_x</span> <span class="o">=</span> <span class="n">ECDF</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">sample_quantiles</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">sample_quantiles</span><span class="p">)</span>

            <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">_do_plot</span><span class="p">(</span>
                <span class="n">p_x</span><span class="p">,</span> <span class="n">ecdf_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line</span><span class="p">,</span> <span class="o">**</span><span class="n">plotkwargs</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">xlabel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">xlabel</span> <span class="o">=</span> <span class="s2">"Probabilities of 2nd Sample"</span>
            <span class="k">if</span> <span class="n">ylabel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">ylabel</span> <span class="o">=</span> <span class="s2">"Probabilities of 1st Sample"</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">_do_plot</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">theoretical_percentiles</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sample_percentiles</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="p">,</span>
                <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                <span class="n">line</span><span class="o">=</span><span class="n">line</span><span class="p">,</span>
                <span class="o">**</span><span class="n">plotkwargs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">xlabel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">xlabel</span> <span class="o">=</span> <span class="s2">"Theoretical Probabilities"</span>
            <span class="k">if</span> <span class="n">ylabel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">ylabel</span> <span class="o">=</span> <span class="s2">"Sample Probabilities"</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">fig</span></div>

<div class="viewcode-block" id="ProbPlot.qqplot"><a class="viewcode-back" href="../../../generated/statsmodels.graphics.gofplots.ProbPlot.qqplot.html#statsmodels.graphics.gofplots.ProbPlot.qqplot">[docs]</a>    <span class="k">def</span> <span class="nf">qqplot</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">xlabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">ylabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">line</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">other</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">swap</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">plotkwargs</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Plot of the quantiles of x versus the quantiles/ppf of a distribution.</span>

<span class="sd">        Can also be used to plot against the quantiles of another `ProbPlot`</span>
<span class="sd">        instance.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        xlabel : {None, str}</span>
<span class="sd">            User-provided labels for the x-axis. If None (default),</span>
<span class="sd">            other values are used depending on the status of the kwarg `other`.</span>
<span class="sd">        ylabel : {None, str}</span>
<span class="sd">            User-provided labels for the y-axis. If None (default),</span>
<span class="sd">            other values are used depending on the status of the kwarg `other`.</span>
<span class="sd">        line : {None, "45", "s", "r", q"}, optional</span>
<span class="sd">            Options for the reference line to which the data is compared:</span>

<span class="sd">            - "45" - 45-degree line</span>
<span class="sd">            - "s" - standardized line, the expected order statistics are scaled</span>
<span class="sd">              by the standard deviation of the given sample and have the mean</span>
<span class="sd">              added to them</span>
<span class="sd">            - "r" - A regression line is fit</span>
<span class="sd">            - "q" - A line is fit through the quartiles.</span>
<span class="sd">            - None - by default no reference line is added to the plot.</span>

<span class="sd">        other : {ProbPlot, array_like, None}, optional</span>
<span class="sd">            If provided, the sample quantiles of this `ProbPlot` instance are</span>
<span class="sd">            plotted against the sample quantiles of the `other` `ProbPlot`</span>
<span class="sd">            instance. Sample size of `other` must be equal or larger than</span>
<span class="sd">            this `ProbPlot` instance. If the sample size is larger, sample</span>
<span class="sd">            quantiles of `other` will be interpolated to match the sample size</span>
<span class="sd">            of this `ProbPlot` instance. If an array-like object is provided,</span>
<span class="sd">            it will be turned into a `ProbPlot` instance using default</span>
<span class="sd">            parameters. If not provided (default), the theoretical quantiles</span>
<span class="sd">            are used.</span>
<span class="sd">        ax : AxesSubplot, optional</span>
<span class="sd">            If given, this subplot is used to plot in instead of a new figure</span>
<span class="sd">            being created.</span>
<span class="sd">        swap : bool, optional</span>
<span class="sd">            Flag indicating to swap the x and y labels.</span>
<span class="sd">        **plotkwargs</span>
<span class="sd">            Additional arguments to be passed to the `plot` command.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Figure</span>
<span class="sd">            If `ax` is None, the created figure.  Otherwise the figure to which</span>
<span class="sd">            `ax` is connected.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">check_other</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">ProbPlot</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">check_other</span><span class="p">:</span>
                <span class="n">other</span> <span class="o">=</span> <span class="n">ProbPlot</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

            <span class="n">s_self</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample_quantiles</span>
            <span class="n">s_other</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">sample_quantiles</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">s_self</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">s_other</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">"Sample size of `other` must be equal or "</span>
                    <span class="o">+</span> <span class="s2">"larger than this `ProbPlot` instance"</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">s_self</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">s_other</span><span class="p">):</span>
                <span class="c1"># Use quantiles of the smaller set and interpolate quantiles of</span>
                <span class="c1"># the larger data set</span>
                <span class="n">p</span> <span class="o">=</span> <span class="n">plotting_pos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nobs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
                <span class="n">s_other</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">mstats</span><span class="o">.</span><span class="n">mquantiles</span><span class="p">(</span><span class="n">s_other</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
            <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">_do_plot</span><span class="p">(</span>
                <span class="n">s_other</span><span class="p">,</span> <span class="n">s_self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line</span><span class="p">,</span> <span class="o">**</span><span class="n">plotkwargs</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">xlabel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">xlabel</span> <span class="o">=</span> <span class="s2">"Quantiles of 2nd Sample"</span>
            <span class="k">if</span> <span class="n">ylabel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">ylabel</span> <span class="o">=</span> <span class="s2">"Quantiles of 1st Sample"</span>
            <span class="k">if</span> <span class="n">swap</span><span class="p">:</span>
                <span class="n">xlabel</span><span class="p">,</span> <span class="n">ylabel</span> <span class="o">=</span> <span class="n">ylabel</span><span class="p">,</span> <span class="n">xlabel</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">_do_plot</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">theoretical_quantiles</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sample_quantiles</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="p">,</span>
                <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                <span class="n">line</span><span class="o">=</span><span class="n">line</span><span class="p">,</span>
                <span class="o">**</span><span class="n">plotkwargs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">xlabel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">xlabel</span> <span class="o">=</span> <span class="s2">"Theoretical Quantiles"</span>
            <span class="k">if</span> <span class="n">ylabel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">ylabel</span> <span class="o">=</span> <span class="s2">"Sample Quantiles"</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">fig</span></div>

<div class="viewcode-block" id="ProbPlot.probplot"><a class="viewcode-back" href="../../../generated/statsmodels.graphics.gofplots.ProbPlot.probplot.html#statsmodels.graphics.gofplots.ProbPlot.probplot">[docs]</a>    <span class="k">def</span> <span class="nf">probplot</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">xlabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">ylabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">line</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">exceed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">plotkwargs</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Plot of unscaled quantiles of x against the prob of a distribution.</span>

<span class="sd">        The x-axis is scaled linearly with the quantiles, but the probabilities</span>
<span class="sd">        are used to label the axis.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        xlabel : {None, str}, optional</span>
<span class="sd">            User-provided labels for the x-axis. If None (default),</span>
<span class="sd">            other values are used depending on the status of the kwarg `other`.</span>
<span class="sd">        ylabel : {None, str}, optional</span>
<span class="sd">            User-provided labels for the y-axis. If None (default),</span>
<span class="sd">            other values are used depending on the status of the kwarg `other`.</span>
<span class="sd">        line : {None, "45", "s", "r", q"}, optional</span>
<span class="sd">            Options for the reference line to which the data is compared:</span>

<span class="sd">            - "45" - 45-degree line</span>
<span class="sd">            - "s" - standardized line, the expected order statistics are scaled</span>
<span class="sd">              by the standard deviation of the given sample and have the mean</span>
<span class="sd">              added to them</span>
<span class="sd">            - "r" - A regression line is fit</span>
<span class="sd">            - "q" - A line is fit through the quartiles.</span>
<span class="sd">            - None - by default no reference line is added to the plot.</span>

<span class="sd">        exceed : bool, optional</span>
<span class="sd">            If False (default) the raw sample quantiles are plotted against</span>
<span class="sd">            the theoretical quantiles, show the probability that a sample will</span>
<span class="sd">            not exceed a given value. If True, the theoretical quantiles are</span>
<span class="sd">            flipped such that the figure displays the probability that a</span>
<span class="sd">            sample will exceed a given value.</span>
<span class="sd">        ax : AxesSubplot, optional</span>
<span class="sd">            If given, this subplot is used to plot in instead of a new figure</span>
<span class="sd">            being created.</span>
<span class="sd">        **plotkwargs</span>
<span class="sd">            Additional arguments to be passed to the `plot` command.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Figure</span>
<span class="sd">            If `ax` is None, the created figure.  Otherwise the figure to which</span>
<span class="sd">            `ax` is connected.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">exceed</span><span class="p">:</span>
            <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">_do_plot</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">theoretical_quantiles</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sorted_data</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="p">,</span>
                <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                <span class="n">line</span><span class="o">=</span><span class="n">line</span><span class="p">,</span>
                <span class="o">**</span><span class="n">plotkwargs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">xlabel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">xlabel</span> <span class="o">=</span> <span class="s2">"Probability of Exceedance (%)"</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">_do_plot</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">theoretical_quantiles</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sorted_data</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="p">,</span>
                <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                <span class="n">line</span><span class="o">=</span><span class="n">line</span><span class="p">,</span>
                <span class="o">**</span><span class="n">plotkwargs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">xlabel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">xlabel</span> <span class="o">=</span> <span class="s2">"Non-exceedance Probability (%)"</span>

        <span class="k">if</span> <span class="n">ylabel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ylabel</span> <span class="o">=</span> <span class="s2">"Sample Quantiles"</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">)</span>
        <span class="n">_fmt_probplot_axis</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nobs</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">fig</span></div></div>


<div class="viewcode-block" id="qqplot"><a class="viewcode-back" href="../../../generated/statsmodels.graphics.gofplots.qqplot.html#statsmodels.graphics.gofplots.qqplot">[docs]</a><span class="k">def</span> <span class="nf">qqplot</span><span class="p">(</span>
    <span class="n">data</span><span class="p">,</span>
    <span class="n">dist</span><span class="o">=</span><span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="p">,</span>
    <span class="n">distargs</span><span class="o">=</span><span class="p">(),</span>
    <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">loc</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">fit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">line</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">plotkwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Q-Q plot of the quantiles of x versus the quantiles/ppf of a distribution.</span>

<span class="sd">    Can take arguments specifying the parameters for dist or fit them</span>
<span class="sd">    automatically. (See fit under Parameters.)</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : array_like</span>
<span class="sd">        A 1d data array.</span>
<span class="sd">    dist : callable</span>
<span class="sd">        Comparison distribution. The default is</span>
<span class="sd">        scipy.stats.distributions.norm (a standard normal).</span>
<span class="sd">    distargs : tuple</span>
<span class="sd">        A tuple of arguments passed to dist to specify it fully</span>
<span class="sd">        so dist.ppf may be called.</span>
<span class="sd">    a : float</span>
<span class="sd">        Offset for the plotting position of an expected order statistic, for</span>
<span class="sd">        example. The plotting positions are given by (i - a)/(nobs - 2*a + 1)</span>
<span class="sd">        for i in range(0,nobs+1)</span>
<span class="sd">    loc : float</span>
<span class="sd">        Location parameter for dist</span>
<span class="sd">    scale : float</span>
<span class="sd">        Scale parameter for dist</span>
<span class="sd">    fit : bool</span>
<span class="sd">        If fit is false, loc, scale, and distargs are passed to the</span>
<span class="sd">        distribution. If fit is True then the parameters for dist</span>
<span class="sd">        are fit automatically using dist.fit. The quantiles are formed</span>
<span class="sd">        from the standardized data, after subtracting the fitted loc</span>
<span class="sd">        and dividing by the fitted scale.</span>
<span class="sd">    line : {None, "45", "s", "r", "q"}</span>
<span class="sd">        Options for the reference line to which the data is compared:</span>

<span class="sd">        - "45" - 45-degree line</span>
<span class="sd">        - "s" - standardized line, the expected order statistics are scaled</span>
<span class="sd">          by the standard deviation of the given sample and have the mean</span>
<span class="sd">          added to them</span>
<span class="sd">        - "r" - A regression line is fit</span>
<span class="sd">        - "q" - A line is fit through the quartiles.</span>
<span class="sd">        - None - by default no reference line is added to the plot.</span>

<span class="sd">    ax : AxesSubplot, optional</span>
<span class="sd">        If given, this subplot is used to plot in instead of a new figure being</span>
<span class="sd">        created.</span>
<span class="sd">    **plotkwargs</span>
<span class="sd">        Additional matplotlib arguments to be passed to the `plot` command.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Figure</span>
<span class="sd">        If `ax` is None, the created figure.  Otherwise the figure to which</span>
<span class="sd">        `ax` is connected.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    scipy.stats.probplot</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Depends on matplotlib. If `fit` is True then the parameters are fit using</span>
<span class="sd">    the distribution's fit() method.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; import statsmodels.api as sm</span>
<span class="sd">    &gt;&gt;&gt; from matplotlib import pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; data = sm.datasets.longley.load()</span>
<span class="sd">    &gt;&gt;&gt; exog = sm.add_constant(data.exog)</span>
<span class="sd">    &gt;&gt;&gt; mod_fit = sm.OLS(data.endog, exog).fit()</span>
<span class="sd">    &gt;&gt;&gt; res = mod_fit.resid # residuals</span>
<span class="sd">    &gt;&gt;&gt; fig = sm.qqplot(res)</span>
<span class="sd">    &gt;&gt;&gt; plt.show()</span>

<span class="sd">    qqplot of the residuals against quantiles of t-distribution with 4 degrees</span>
<span class="sd">    of freedom:</span>

<span class="sd">    &gt;&gt;&gt; import scipy.stats as stats</span>
<span class="sd">    &gt;&gt;&gt; fig = sm.qqplot(res, stats.t, distargs=(4,))</span>
<span class="sd">    &gt;&gt;&gt; plt.show()</span>

<span class="sd">    qqplot against same as above, but with mean 3 and std 10:</span>

<span class="sd">    &gt;&gt;&gt; fig = sm.qqplot(res, stats.t, distargs=(4,), loc=3, scale=10)</span>
<span class="sd">    &gt;&gt;&gt; plt.show()</span>

<span class="sd">    Automatically determine parameters for t distribution including the</span>
<span class="sd">    loc and scale:</span>

<span class="sd">    &gt;&gt;&gt; fig = sm.qqplot(res, stats.t, fit=True, line="45")</span>
<span class="sd">    &gt;&gt;&gt; plt.show()</span>

<span class="sd">    The following plot displays some options, follow the link to see the code.</span>

<span class="sd">    .. plot:: plots/graphics_gofplots_qqplot.py</span>
<span class="sd">    """</span>
    <span class="n">probplot</span> <span class="o">=</span> <span class="n">ProbPlot</span><span class="p">(</span>
        <span class="n">data</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="n">dist</span><span class="p">,</span> <span class="n">distargs</span><span class="o">=</span><span class="n">distargs</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="n">fit</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="n">loc</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">scale</span>
    <span class="p">)</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">probplot</span><span class="o">.</span><span class="n">qqplot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line</span><span class="p">,</span> <span class="o">**</span><span class="n">plotkwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span></div>


<div class="viewcode-block" id="qqplot_2samples"><a class="viewcode-back" href="../../../generated/statsmodels.graphics.gofplots.qqplot_2samples.html#statsmodels.graphics.gofplots.qqplot_2samples">[docs]</a><span class="k">def</span> <span class="nf">qqplot_2samples</span><span class="p">(</span>
    <span class="n">data1</span><span class="p">,</span> <span class="n">data2</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="kc">None</span>
<span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Q-Q Plot of two samples' quantiles.</span>

<span class="sd">    Can take either two `ProbPlot` instances or two array-like objects. In the</span>
<span class="sd">    case of the latter, both inputs will be converted to `ProbPlot` instances</span>
<span class="sd">    using only the default values - so use `ProbPlot` instances if</span>
<span class="sd">    finer-grained control of the quantile computations is required.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data1 : {array_like, ProbPlot}</span>
<span class="sd">        Data to plot along x axis. If the sample sizes are unequal, the longer</span>
<span class="sd">        series is always plotted along the x-axis.</span>
<span class="sd">    data2 : {array_like, ProbPlot}</span>
<span class="sd">        Data to plot along y axis. Does not need to have the same number of</span>
<span class="sd">        observations as data 1. If the sample sizes are unequal, the longer</span>
<span class="sd">        series is always plotted along the x-axis.</span>
<span class="sd">    xlabel : {None, str}</span>
<span class="sd">        User-provided labels for the x-axis. If None (default),</span>
<span class="sd">        other values are used.</span>
<span class="sd">    ylabel : {None, str}</span>
<span class="sd">        User-provided labels for the y-axis. If None (default),</span>
<span class="sd">        other values are used.</span>
<span class="sd">    line : {None, "45", "s", "r", q"}</span>
<span class="sd">        Options for the reference line to which the data is compared:</span>

<span class="sd">        - "45" - 45-degree line</span>
<span class="sd">        - "s" - standardized line, the expected order statistics are scaled</span>
<span class="sd">          by the standard deviation of the given sample and have the mean</span>
<span class="sd">          added to them</span>
<span class="sd">        - "r" - A regression line is fit</span>
<span class="sd">        - "q" - A line is fit through the quartiles.</span>
<span class="sd">        - None - by default no reference line is added to the plot.</span>

<span class="sd">    ax : AxesSubplot, optional</span>
<span class="sd">        If given, this subplot is used to plot in instead of a new figure being</span>
<span class="sd">        created.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Figure</span>
<span class="sd">        If `ax` is None, the created figure.  Otherwise the figure to which</span>
<span class="sd">        `ax` is connected.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    scipy.stats.probplot</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    1) Depends on matplotlib.</span>
<span class="sd">    2) If `data1` and `data2` are not `ProbPlot` instances, instances will be</span>
<span class="sd">       created using the default parameters. Therefore, it is recommended to use</span>
<span class="sd">       `ProbPlot` instance if fine-grained control is needed in the computation</span>
<span class="sd">       of the quantiles.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; import statsmodels.api as sm</span>
<span class="sd">    &gt;&gt;&gt; import numpy as np</span>
<span class="sd">    &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; from statsmodels.graphics.gofplots import qqplot_2samples</span>
<span class="sd">    &gt;&gt;&gt; x = np.random.normal(loc=8.5, scale=2.5, size=37)</span>
<span class="sd">    &gt;&gt;&gt; y = np.random.normal(loc=8.0, scale=3.0, size=37)</span>
<span class="sd">    &gt;&gt;&gt; pp_x = sm.ProbPlot(x)</span>
<span class="sd">    &gt;&gt;&gt; pp_y = sm.ProbPlot(y)</span>
<span class="sd">    &gt;&gt;&gt; qqplot_2samples(pp_x, pp_y)</span>
<span class="sd">    &gt;&gt;&gt; plt.show()</span>

<span class="sd">    .. plot:: plots/graphics_gofplots_qqplot_2samples.py</span>

<span class="sd">    &gt;&gt;&gt; fig = qqplot_2samples(pp_x, pp_y, xlabel=None, ylabel=None,</span>
<span class="sd">    ...                       line=None, ax=None)</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data1</span><span class="p">,</span> <span class="n">ProbPlot</span><span class="p">):</span>
        <span class="n">data1</span> <span class="o">=</span> <span class="n">ProbPlot</span><span class="p">(</span><span class="n">data1</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data2</span><span class="p">,</span> <span class="n">ProbPlot</span><span class="p">):</span>
        <span class="n">data2</span> <span class="o">=</span> <span class="n">ProbPlot</span><span class="p">(</span><span class="n">data2</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">data2</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">data1</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">data1</span><span class="o">.</span><span class="n">qqplot</span><span class="p">(</span>
            <span class="n">xlabel</span><span class="o">=</span><span class="n">ylabel</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="n">xlabel</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line</span><span class="p">,</span> <span class="n">other</span><span class="o">=</span><span class="n">data2</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">data2</span><span class="o">.</span><span class="n">qqplot</span><span class="p">(</span>
            <span class="n">xlabel</span><span class="o">=</span><span class="n">ylabel</span><span class="p">,</span>
            <span class="n">ylabel</span><span class="o">=</span><span class="n">xlabel</span><span class="p">,</span>
            <span class="n">line</span><span class="o">=</span><span class="n">line</span><span class="p">,</span>
            <span class="n">other</span><span class="o">=</span><span class="n">data1</span><span class="p">,</span>
            <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
            <span class="n">swap</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span></div>


<div class="viewcode-block" id="qqline"><a class="viewcode-back" href="../../../generated/statsmodels.graphics.gofplots.qqline.html#statsmodels.graphics.gofplots.qqline">[docs]</a><span class="k">def</span> <span class="nf">qqline</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">"r-"</span><span class="p">,</span> <span class="o">**</span><span class="n">lineoptions</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Plot a reference line for a qqplot.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax : matplotlib axes instance</span>
<span class="sd">        The axes on which to plot the line</span>
<span class="sd">    line : str {"45","r","s","q"}</span>
<span class="sd">        Options for the reference line to which the data is compared.:</span>

<span class="sd">        - "45" - 45-degree line</span>
<span class="sd">        - "s"  - standardized line, the expected order statistics are scaled by</span>
<span class="sd">                 the standard deviation of the given sample and have the mean</span>
<span class="sd">                 added to them</span>
<span class="sd">        - "r"  - A regression line is fit</span>
<span class="sd">        - "q"  - A line is fit through the quartiles.</span>
<span class="sd">        - None - By default no reference line is added to the plot.</span>

<span class="sd">    x : ndarray</span>
<span class="sd">        X data for plot. Not needed if line is "45".</span>
<span class="sd">    y : ndarray</span>
<span class="sd">        Y data for plot. Not needed if line is "45".</span>
<span class="sd">    dist : scipy.stats.distribution</span>
<span class="sd">        A scipy.stats distribution, needed if line is "q".</span>
<span class="sd">    fmt : str, optional</span>
<span class="sd">        Line format string passed to `plot`.</span>
<span class="sd">    **lineoptions</span>
<span class="sd">        Additional arguments to be passed to the `plot` command.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    There is no return value. The line is plotted on the given `ax`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Import the food expenditure dataset.  Plot annual food expenditure on x-axis</span>
<span class="sd">    and household income on y-axis.  Use qqline to add regression line into the</span>
<span class="sd">    plot.</span>

<span class="sd">    &gt;&gt;&gt; import statsmodels.api as sm</span>
<span class="sd">    &gt;&gt;&gt; import numpy as np</span>
<span class="sd">    &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; from statsmodels.graphics.gofplots import qqline</span>

<span class="sd">    &gt;&gt;&gt; foodexp = sm.datasets.engel.load()</span>
<span class="sd">    &gt;&gt;&gt; x = foodexp.exog</span>
<span class="sd">    &gt;&gt;&gt; y = foodexp.endog</span>
<span class="sd">    &gt;&gt;&gt; ax = plt.subplot(111)</span>
<span class="sd">    &gt;&gt;&gt; plt.scatter(x, y)</span>
<span class="sd">    &gt;&gt;&gt; ax.set_xlabel(foodexp.exog_name[0])</span>
<span class="sd">    &gt;&gt;&gt; ax.set_ylabel(foodexp.endog_name)</span>
<span class="sd">    &gt;&gt;&gt; qqline(ax, "r", x, y)</span>
<span class="sd">    &gt;&gt;&gt; plt.show()</span>

<span class="sd">    .. plot:: plots/graphics_gofplots_qqplot_qqline.py</span>
<span class="sd">    """</span>
    <span class="n">lineoptions</span> <span class="o">=</span> <span class="n">lineoptions</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">ls</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"-"</span><span class="p">,</span> <span class="s2">"--"</span><span class="p">,</span> <span class="s2">"-."</span><span class="p">,</span> <span class="s2">":"</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ls</span> <span class="ow">in</span> <span class="n">fmt</span><span class="p">:</span>
            <span class="n">lineoptions</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">"linestyle"</span><span class="p">,</span> <span class="n">ls</span><span class="p">)</span>
            <span class="n">fmt</span> <span class="o">=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">ls</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
            <span class="k">break</span>
    <span class="k">for</span> <span class="n">marker</span> <span class="ow">in</span> <span class="p">(</span>
        <span class="s2">"."</span><span class="p">,</span>
        <span class="s2">","</span><span class="p">,</span>
        <span class="s2">"o"</span><span class="p">,</span>
        <span class="s2">"v"</span><span class="p">,</span>
        <span class="s2">"^"</span><span class="p">,</span>
        <span class="s2">"&lt;"</span><span class="p">,</span>
        <span class="s2">"&gt;"</span><span class="p">,</span>
        <span class="s2">"1"</span><span class="p">,</span>
        <span class="s2">"2"</span><span class="p">,</span>
        <span class="s2">"3"</span><span class="p">,</span>
        <span class="s2">"4"</span><span class="p">,</span>
        <span class="s2">"8"</span><span class="p">,</span>
        <span class="s2">"s"</span><span class="p">,</span>
        <span class="s2">"p"</span><span class="p">,</span>
        <span class="s2">"P"</span><span class="p">,</span>
        <span class="s2">"*"</span><span class="p">,</span>
        <span class="s2">"h"</span><span class="p">,</span>
        <span class="s2">"H"</span><span class="p">,</span>
        <span class="s2">"+"</span><span class="p">,</span>
        <span class="s2">"x"</span><span class="p">,</span>
        <span class="s2">"X"</span><span class="p">,</span>
        <span class="s2">"D"</span><span class="p">,</span>
        <span class="s2">"d"</span><span class="p">,</span>
        <span class="s2">"|"</span><span class="p">,</span>
        <span class="s2">"_"</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="n">marker</span> <span class="ow">in</span> <span class="n">fmt</span><span class="p">:</span>
            <span class="n">lineoptions</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">"marker"</span><span class="p">,</span> <span class="n">marker</span><span class="p">)</span>
            <span class="n">fmt</span> <span class="o">=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">marker</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
            <span class="k">break</span>
    <span class="k">if</span> <span class="n">fmt</span><span class="p">:</span>
        <span class="n">lineoptions</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">"color"</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="s2">"45"</span><span class="p">:</span>
        <span class="n">end_pts</span> <span class="o">=</span> <span class="n">lzip</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">(),</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">())</span>
        <span class="n">end_pts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">end_pts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">end_pts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">end_pts</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">end_pts</span><span class="p">,</span> <span class="n">end_pts</span><span class="p">,</span> <span class="o">**</span><span class="n">lineoptions</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">end_pts</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">end_pts</span><span class="p">)</span>
        <span class="k">return</span>  <span class="c1"># does this have any side effects?</span>
    <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"If line is not 45, x and y cannot be None."</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="s2">"r"</span><span class="p">:</span>
        <span class="c1"># could use ax.lines[0].get_xdata(), get_ydata(),</span>
        <span class="c1"># but don't know axes are "clean"</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">OLS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">add_constant</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span><span class="o">.</span><span class="n">fittedvalues</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">lineoptions</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">line</span> <span class="o">==</span> <span class="s2">"s"</span><span class="p">:</span>
        <span class="n">m</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="n">ref_line</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">m</span> <span class="o">+</span> <span class="n">b</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">ref_line</span><span class="p">,</span> <span class="o">**</span><span class="n">lineoptions</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">line</span> <span class="o">==</span> <span class="s2">"q"</span><span class="p">:</span>
        <span class="n">_check_for</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="s2">"ppf"</span><span class="p">)</span>
        <span class="n">q25</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">scoreatpercentile</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="n">q75</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">scoreatpercentile</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="mi">75</span><span class="p">)</span>
        <span class="n">theoretical_quartiles</span> <span class="o">=</span> <span class="n">dist</span><span class="o">.</span><span class="n">ppf</span><span class="p">([</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">])</span>
        <span class="n">m</span> <span class="o">=</span> <span class="p">(</span><span class="n">q75</span> <span class="o">-</span> <span class="n">q25</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">theoretical_quartiles</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">q25</span> <span class="o">-</span> <span class="n">m</span> <span class="o">*</span> <span class="n">theoretical_quartiles</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">m</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">b</span><span class="p">,</span> <span class="o">**</span><span class="n">lineoptions</span><span class="p">)</span></div>


<span class="c1"># about 10x faster than plotting_position in sandbox and mstats</span>
<span class="k">def</span> <span class="nf">plotting_pos</span><span class="p">(</span><span class="n">nobs</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Generates sequence of plotting positions</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    nobs : int</span>
<span class="sd">        Number of probability points to plot</span>
<span class="sd">    a : float, default 0.0</span>
<span class="sd">        alpha parameter for the plotting position of an expected order</span>
<span class="sd">        statistic</span>
<span class="sd">    b : float, default None</span>
<span class="sd">        beta parameter for the plotting position of an expected order</span>
<span class="sd">        statistic. If None, then b is set to a.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    ndarray</span>
<span class="sd">        The plotting positions</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The plotting positions are given by (i - a)/(nobs + 1 - a - b) for i in</span>
<span class="sd">    range(1, nobs+1)</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    scipy.stats.mstats.plotting_positions</span>
<span class="sd">        Additional information on alpha and beta</span>
<span class="sd">    """</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="k">if</span> <span class="n">b</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">b</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">nobs</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">a</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">nobs</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_fmt_probplot_axis</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">nobs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Formats a theoretical quantile axis to display the corresponding</span>
<span class="sd">    probabilities on the quantiles' scale.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax : AxesSubplot, optional</span>
<span class="sd">        The axis to be formatted</span>
<span class="sd">    nobs : scalar</span>
<span class="sd">        Number of observations in the sample</span>
<span class="sd">    dist : scipy.stats.distribution</span>
<span class="sd">        A scipy.stats distribution sufficiently specified to implement its</span>
<span class="sd">        ppf() method.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    There is no return value. This operates on `ax` in place</span>
<span class="sd">    """</span>
    <span class="n">_check_for</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="s2">"ppf"</span><span class="p">)</span>
    <span class="n">axis_probs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">small</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
    <span class="n">axis_probs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="n">small</span><span class="p">,</span> <span class="n">axis_probs</span><span class="p">,</span> <span class="mi">100</span> <span class="o">-</span> <span class="n">small</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
    <span class="k">if</span> <span class="n">nobs</span> <span class="o">&gt;=</span> <span class="mi">50</span><span class="p">:</span>
        <span class="n">axis_probs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="n">small</span> <span class="o">/</span> <span class="mi">10</span><span class="p">,</span> <span class="n">axis_probs</span><span class="p">,</span> <span class="mi">100</span> <span class="o">-</span> <span class="n">small</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">10</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">nobs</span> <span class="o">&gt;=</span> <span class="mi">500</span><span class="p">:</span>
        <span class="n">axis_probs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="n">small</span> <span class="o">/</span> <span class="mi">100</span><span class="p">,</span> <span class="n">axis_probs</span><span class="p">,</span> <span class="mi">100</span> <span class="o">-</span> <span class="n">small</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100</span><span class="p">]</span>
    <span class="n">axis_probs</span> <span class="o">/=</span> <span class="mf">100.0</span>
    <span class="n">axis_qntls</span> <span class="o">=</span> <span class="n">dist</span><span class="o">.</span><span class="n">ppf</span><span class="p">(</span><span class="n">axis_probs</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">axis_qntls</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span>
        <span class="n">axis_probs</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span>
        <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span>
        <span class="n">rotation_mode</span><span class="o">=</span><span class="s2">"anchor"</span><span class="p">,</span>
        <span class="n">horizontalalignment</span><span class="o">=</span><span class="s2">"right"</span><span class="p">,</span>
        <span class="n">verticalalignment</span><span class="o">=</span><span class="s2">"center"</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="n">axis_qntls</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">axis_qntls</span><span class="o">.</span><span class="n">max</span><span class="p">()])</span>


<span class="k">def</span> <span class="nf">_do_plot</span><span class="p">(</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">"b"</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Boiler plate plotting function for the `ppplot`, `qqplot`, and</span>
<span class="sd">    `probplot` methods of the `ProbPlot` class</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    x : array_like</span>
<span class="sd">        X-axis data to be plotted</span>
<span class="sd">    y : array_like</span>
<span class="sd">        Y-axis data to be plotted</span>
<span class="sd">    dist : scipy.stats.distribution</span>
<span class="sd">        A scipy.stats distribution, needed if `line` is "q".</span>
<span class="sd">    line : {"45", "s", "r", "q", None}, default None</span>
<span class="sd">        Options for the reference line to which the data is compared.</span>
<span class="sd">    ax : AxesSubplot, optional</span>
<span class="sd">        If given, this subplot is used to plot in instead of a new figure being</span>
<span class="sd">        created.</span>
<span class="sd">    fmt : str, optional</span>
<span class="sd">        matplotlib-compatible formatting string for the data markers</span>
<span class="sd">    kwargs : keywords</span>
<span class="sd">        These are passed to matplotlib.plot</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    fig : Figure</span>
<span class="sd">        The figure containing `ax`.</span>
<span class="sd">    ax : AxesSubplot</span>
<span class="sd">        The original axes if provided.  Otherwise a new instance.</span>
<span class="sd">    """</span>
    <span class="n">plot_style</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"marker"</span><span class="p">:</span> <span class="s2">"o"</span><span class="p">,</span>
        <span class="s2">"markerfacecolor"</span><span class="p">:</span> <span class="s2">"C0"</span><span class="p">,</span>
        <span class="s2">"markeredgecolor"</span><span class="p">:</span> <span class="s2">"C0"</span><span class="p">,</span>
        <span class="s2">"linestyle"</span><span class="p">:</span> <span class="s2">"none"</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">plot_style</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">where</span> <span class="o">=</span> <span class="n">plot_style</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">"where"</span><span class="p">,</span> <span class="s2">"pre"</span><span class="p">)</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">create_mpl_ax</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xmargin</span><span class="p">(</span><span class="mf">0.02</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">step</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">fmt</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="n">where</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_style</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">fmt</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_style</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">line</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">line</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">"r"</span><span class="p">,</span> <span class="s2">"q"</span><span class="p">,</span> <span class="s2">"45"</span><span class="p">,</span> <span class="s2">"s"</span><span class="p">]:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"</span><span class="si">%s</span><span class="s2"> option for line not understood"</span> <span class="o">%</span> <span class="n">line</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="n">qqline</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="n">dist</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span>


<span class="k">def</span> <span class="nf">_check_for</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s2">"ppf"</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="n">attr</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"distribution must have a </span><span class="si">{</span><span class="n">attr</span><span class="si">}</span><span class="s2"> method"</span><span class="p">)</span>
</pre></div>

          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2009-2019, Josef Perktold, Skipper Seabold, Jonathan Taylor, statsmodels-developers.
              
          </div>
            Last updated on
              Nov 02, 2022.
            <br/>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../../../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>